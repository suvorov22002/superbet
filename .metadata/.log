!SESSION 2023-07-23 15:34:09.192 -----------------------------------------------
eclipse.buildId=4.24.0.I20220607-0700
java.version=17.0.4
java.vendor=Eclipse Adoptium
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=fr_FR
Framework arguments:  -product org.eclipse.epp.package.jee.product
Command-line arguments:  -os win32 -ws win32 -arch x86_64 -product org.eclipse.epp.package.jee.product

This is a continuation of log file D:\projets_JC\superbet\.metadata\.bak_0.log
Created Time: 2023-07-23 23:37:21.709

!ENTRY org.eclipse.jdt.core.manipulation 4 2 2023-07-23 23:37:21.710
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.jdt.core.manipulation".
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:344)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1272)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:868)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider$1.run(CoreASTProvider.java:294)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.createAST(CoreASTProvider.java:286)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.getAST(CoreASTProvider.java:199)
	at org.eclipse.jdt.core.manipulation.SharedASTProviderCore.getAST(SharedASTProviderCore.java:138)
	at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup.calculateASTandInform(SelectionListenerWithASTManager.java:166)
	at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup$1.run(SelectionListenerWithASTManager.java:151)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:63)

!ENTRY org.eclipse.jdt.core.manipulation 4 0 2023-07-23 23:37:21.712
!MESSAGE Error in JDT Core during AST creation
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:344)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1272)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:868)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider$1.run(CoreASTProvider.java:294)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.createAST(CoreASTProvider.java:286)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.getAST(CoreASTProvider.java:199)
	at org.eclipse.jdt.core.manipulation.SharedASTProviderCore.getAST(SharedASTProviderCore.java:138)
	at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup.calculateASTandInform(SelectionListenerWithASTManager.java:166)
	at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup$1.run(SelectionListenerWithASTManager.java:151)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:63)

!ENTRY org.eclipse.jdt.core 4 4 2023-07-23 23:37:23.167
!MESSAGE Exception occurred during compilation unit conversion:
----------------------------------- SOURCE BEGIN -------------------------------------
package business;

import java.io.IOException;
import java.net.URISyntaxException;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.servlet.http.HttpServletRequest;

import org.apache.commons.lang3.StringUtils;
import org.codehaus.jettison.json.JSONException;
import org.jasypt.util.password.ConfigurablePasswordEncryptor;

import config.Params;
import modele.CagnotteDto;
import modele.Caissier;
import modele.CaissierDto;
import modele.Config;
import modele.Keno;
import modele.Partner;
import modele.PartnerDto;
import modele.ResPartner;
import superbetDAO.AirtimeDAO;
import superbetDAO.CagnotteDAO;
import superbetDAO.CaissierDAO;
import superbetDAO.ConfigDAO;
import superbetDAO.EffChoicekDAO;
import superbetDAO.GameCycleDAO;
import superbetDAO.KenoDAO;
import superbetDAO.MisekDAO;
import superbetDAO.Misek_tempDAO;
import superbetDAO.MisetDAO;
import superbetDAO.PartnerDAO;
import superbetDAO.SpinDAO;
import superbetDAO.UtilDAO;
import superbetDAO.VersementDAO;
import superbetDAO.api.exeception.DAOAPIException;
import superbetDAO.api.implementations.SuperGameDAOAPI;
import superbetDAO.api.interfaces.ISuperGameDAOAPILocal;

public final class ConfigForm {
	
	private static final String FIELD_CODERACE = "ncpartner";
	private static final String FIELD_ZONE = "nczone";
	
	private static final String FIELD_NOM_CAISSIER = "ncuser";
	private static final String FIELD_LOGIN = "nclogin";
	private static final String FIELD_PASS = "ncpass";
	private static final String FIELD_PROFIL = "ncprofil";
	private static final String FIELD_PARTNER = "ncsalle_cais";
	private static final String FIELD_JEU = "ncbonus_jeu";
	
	private static final String FIELD_BONUSK0 = "bonu_sum_min";
	private static final String FIELD_BONUSK1 = "bonu_sum_max";
	private static final String FIELD_BONUSK_RATE = "ncbonus_rate";
	private static final String FIELD_BONUSK_RESERVE = "ncbonus_reserve";
	private static final String FIELD_KCODERACE = "ncbonus_part1";
	private static final String FIELD_DATE1 = "cgddebut";
	private  ISuperGameDAOAPILocal  supergameAPI;
	
	private  String resultat = null;
	private  String resultat_u = null;
	private  String resultat_b = null;
	private  String resultat_c = null;
	private  Map<String, String> erreurs;
	private  Map<String, String> erreurs_u;
	private  Map<String, String> erreurs_b;
	private  Map<String, String> erreurs_c;
	private String action="";
	private String coderace="", dat1;
	private String zone="";
	
	private String bonusk0;
	private String bonusk1;
    private double mbonusk0;
    private double mbonusk1;
    private int ajout = 0;
   
	
	private  Map<String, String> user;
	private List<Partner> lpartner;
	
	private KenoDAO kenoDao;
	private MisetDAO misetDao;
	private EffChoicekDAO effchoicekDao;
	private MisekDAO misekDao;
	private VersementDAO verstDao;
	private PartnerDAO partnerDao;
	private Misek_tempDAO misektpDao;
	private UtilDAO utilDao;
	private CaissierDAO caissierDao;
	private ConfigDAO configDao;
	private SpinDAO spinDao;
	private AirtimeDAO airtimeDao;
	private GameCycleDAO game_cycleDao;
	private CagnotteDAO cagnotteDao;
	
	
	public String getResultat() {
		return resultat;
	}
	
	public Map<String, String> getErreurs_u() {
		return erreurs_u;
	}

	public void setErreurs_u(String champ, String message) {
		erreurs_u.put(champ, message);
	}

	public Map<String, String> getErreurs_b() {
		return erreurs_b;
	}

	public void setErreurs_b(String champ, String message) {
		erreurs_b.put(champ, message);
	}

	public Map<String, String> getErreurs_c() {
		return erreurs_c;
	}

	public void setErreurs_c(String champ, String message) {
		erreurs_c.put(champ, message);
	}
	
	public String getResultat_u() {
		return resultat_u;
	}

	public String getResultat_b() {
		return resultat_b;
	}

	public String getResultat_c() {
		return resultat_c;
	}
	public String getAction() {
		return action;
	}
	
	public String getCoderace() {
		return coderace;
	}
	
	public String getZone() {
		return zone;
	}
	
	public Map<String, String> getErreurs() {
		return erreurs;
	}
	public void setErreurs(String champ, String message) {
		erreurs.put(champ, message);
	}
	
	
	
	public Map<String, String> getUser() {
		return user;
	}

	public void setUser(String champ, String message) {
		user.put(champ, message);;
	}
	
	public String getBonusk0() {
		return bonusk0;
	}

	public void setBonusk0(String bonusk0) {
		this.bonusk0 = bonusk0;
	}

	public String getBonusk1() {
		return bonusk1;
	}

	public void setBonusk1(String bonusk1) {
		this.bonusk1 = bonusk1;
	}

	public void setResultat(String resultat) {
		this.resultat = resultat;
	}

	public String getDat1() {
		return dat1;
	}

	public void setDat1(String dat1) {
		this.dat1 = dat1;
	}

	public ConfigForm(KenoDAO kenoDao,MisetDAO misetDao,UtilDAO utilDao,EffChoicekDAO effchoicekDao,MisekDAO misekDao,
			VersementDAO verstDao, PartnerDAO partnerDao, Misek_tempDAO misektpDao, CaissierDAO caissierDao, ConfigDAO configDao, SpinDAO spinDao, 
			AirtimeDAO airtimeDao, GameCycleDAO game_cycleDao){
		this.kenoDao = kenoDao;
		this.misetDao = misetDao;
		this.effchoicekDao = effchoicekDao;
		this.misekDao = misekDao;
		this.verstDao = verstDao;
		this.partnerDao = partnerDao;
		this.misektpDao = misektpDao;
		this.utilDao = utilDao;
		this.caissierDao = caissierDao;
		this.configDao = configDao;
		this.spinDao = spinDao;
		this.airtimeDao = airtimeDao;
		this.game_cycleDao = game_cycleDao;
		supergameAPI = SuperGameDAOAPI.getInstance();
	}
	
	public void manage_config(HttpServletRequest request){
		erreurs = new HashMap<String, String>();
		erreurs_u = new HashMap<String, String>();
		erreurs_b = new HashMap<String, String>();
		erreurs_c = new HashMap<String, String>();
		action = getName( request, "idconfig" );// definit l'action Ã  traiter. ajout partner, ajout caissier...
		
		if(action.equalsIgnoreCase("addpartner")){
			
			coderace = getName( request, FIELD_CODERACE );
			zone = getName( request, FIELD_ZONE );
			
			// recupere tous les partenaires
		    lpartner = partnerDao.getAllPartners();
		   
			
			if(StringUtils.isBlank(coderace)){
				return;
			}
			
			String[] spaceCoderace = coderace.trim().split(" ");
			
			if(coderace.length() < 5){
				
	  		  	setErreurs(FIELD_CODERACE, "Longueur du nom très court");
	  		  	resultat = "Nom très court, 5 caractères minimum";
	  		  	return;
	  		  	
			}
			else if(spaceCoderace.length > 1) {
				
				setErreurs_u(FIELD_LOGIN, "Pas d'espace dans le nom du partenaire");
				resultat = "Pas d'espace dans le nom du partenaire.";
		  		return;
		  		
			}
			
			 Partner partn = partnerDao.find(coderace);
			 
			 if(partn == null) {
				 
				 Partner part = new Partner();
				 part.setCoderace(coderace);
				 part.setZone(zone);
				 part.setGroupe(1);
				 part.setActif(1);
				 part.setCob("opened");
				 boolean isAdded = addNewPartenaire(part);
				 
				 if(isAdded) {
					 
					 PartnerDto pdto = new PartnerDto();
					 pdto.setCoderace(coderace);
					 pdto.setZone(zone);
					 ResPartner resp = supergameAPI.getSuperGameDAO().submitPartner(Params.url, pdto);
					 
				 }
				 
			 }
			
			
		
			//Partner partner = partnerDao.find(coderace);
			
			 PartnerDto pdto = new PartnerDto();
			 pdto.setCoderace(coderace);
			 pdto.setZone(zone);
			 ResPartner resp = supergameAPI.getSuperGameDAO().submitPartner(Params.url, pdto);
			 Partner p = resp.getPartner();
			 String respMess = resp.getMessage();

			 Partner part = new Partner();
			 part.setCoderace(coderace);
			 part.setZone(zone);
			 part.setGroupe(1);
			 part.setActif(1);
			 part.setCob("opened");

			 if ("EXISTS".equalsIgnoreCase(respMess)) {

				 Partner partner = partnerDao.find(coderace);

				 if (partner == null) {
					 addNewPartenaire(part);
				 }
				 else {
					 setErreurs(FIELD_CODERACE, "present");
					 resultat = "Partenaire/Salle deja présent.";
				 }

			 }
			 else if("NEW".equalsIgnoreCase(respMess)) {
				 addNewPartenaire(part);
			 }

		 } catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
			 // TODO Auto-generated catch block
			 e.printStackTrace();
		 }
		}
		else if(action.equalsIgnoreCase("addcaissier")){
			user = new HashMap<String, String>();
			
			String nom_user = getName(request, FIELD_NOM_CAISSIER);
			String login = getName(request, FIELD_LOGIN);
			String pass = getPass(request, FIELD_PASS);
			String profil = getName(request, FIELD_PROFIL);
			String partner = getName(request, FIELD_PARTNER);
			
			if(StringUtils.isBlank(login) || StringUtils.isBlank(pass) || StringUtils.isBlank(profil) || StringUtils.isBlank(partner)){
				return;
			}
			
			String[] spaceLogin = login.trim().split(" ");
			if(login.length() < 5){
	  		  setErreurs_u(FIELD_LOGIN, "Longueur du login très court");
	  		  resultat_u = "Login très court, 5 caractères minimum";
	  		  return;
			}
			else if(spaceLogin.length > 1) {
				setErreurs_u(FIELD_LOGIN, "Pas d'espace dans le login");
		  		resultat_u = "Pas d'espace dans le login.";
		  		return;
			}
			
			
			if(pass.length() < 6){
	  		  setErreurs_u(FIELD_PASS, "Longueur du mot de passe très court");
	  		  resultat_u = "pass très court, 5 caractÃ¨res minimum";
	  		  return;
			}
			
			ConfigurablePasswordEncryptor passwordEncryptor = new ConfigurablePasswordEncryptor();
			passwordEncryptor.setAlgorithm( Params.ALGO_CHIFFREMENT );
			passwordEncryptor.setPlainDigest( false );
			
			Caissier caissier = caissierDao.findByLogin(login);
			Long idpartner = partnerDao.find(partner).getIdpartner();
			Long idprofil = 2L;
			if(profil.equalsIgnoreCase("CAISSIER")){
				idprofil = 2L;
			}
			else if(profil.equalsIgnoreCase("ADMINISTRATEUR")){
				idprofil = 1L;
			}
			
			String passChiffre = passwordEncryptor.encryptPassword(pass);
			setUser("nomc", nom_user);
			setUser("loginc", login);
			setUser("passc", "******");
			
			if(caissier == null){
				
				int n = 0;
				Caissier cais = new Caissier();
				cais.setNomc(nom_user);
				cais.setLoginc(login);
				cais.setMdpc(passChiffre);
				cais.setPartner(partner);
				cais.setProfil(idprofil);
				cais.setGrpe(1);
				//System.out.println(cais);
				n = caissierDao.create(cais);
				
				try {
					
					if (n > 0) {
						// Utilisateur crée en local
						
						CaissierDto caisDto = new CaissierDto();
						caisDto.setNomc(nom_user);
						caisDto.setLoginc(login);
						caisDto.setMdpc(pass);
						caisDto.setPartner(partner);
						caisDto.setProfil(idprofil);
						caisDto.setGrpe(1);
						//System.out.println(caisDto);
						Caissier caisse = supergameAPI.getSuperGameDAO().saveUser(Params.url, caisDto, partner);
						if(caisse == null) {
							
							caissierDao.delete(cais);
							setErreurs_u(FIELD_LOGIN, "Echec lors de la creation");
							resultat_u = "Echec lors de la creation.";
							return;
						}
						
						resultat_u="Caissier crée avec succes";
						
					}
					
				} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
					e.printStackTrace();
					return;
				}
				
//				if(n > 0){	
//					Caissier user = caissierDao.findByLogin(login);
//					//creation de la ligne des mouvements
//					airtimeDao.createMvt(user.getIdCaissier(), 0);
//					resultat_u="Caissier crée avec succes";
//					return;
//				}
//				else{
//					setErreurs_u(FIELD_LOGIN, "Echec de creation");
//					resultat_u = "Echec de creation";
//					return;
//				}
				
				
			}
			else{
				setErreurs_u(FIELD_LOGIN, "present");
				resultat_u = "Login utilisé, veuillez entrer un autre";
			}
		}
		else if(action.equalsIgnoreCase("addbonus")){
			bonusk0 = getName(request, FIELD_BONUSK0);
			bonusk1 = getName(request, FIELD_BONUSK1);
			String jeu = getName(request, FIELD_JEU);
			//System.out.println("BONUSMIN: "+bonusk0+" BONUSMAX: "+bonusk1+" | "+jeu);
			coderace = getName( request, FIELD_KCODERACE );
			String bonusk_rate = getName(request,  FIELD_BONUSK_RATE);
			//System.out.println("coderace: "+coderace+" | "+bonusk_rate);
			Long idpartner = partnerDao.find(coderace).getIdpartner();
			resultat_b = "";
			erreurs_b.clear();
			if(jeu == null || jeu.equalsIgnoreCase("")){
				setErreurs_b(FIELD_JEU, "Mauvais jeu");
				resultat_b = "Veuillez selectionner un type de jeu";
				return;
			}
			
			if(jeu.equalsIgnoreCase("keno")){
				if(coderace == null || coderace.equalsIgnoreCase("")){
					setErreurs_b(FIELD_KCODERACE, "Mauvais partenaire");
					resultat_b = "Veuillez selectionner un partenaire";
					return;
				}
				if(jeu == null || jeu.equalsIgnoreCase("")){
					setErreurs_b(FIELD_JEU, "Mauvais jeu");
					resultat_b = "Veuillez selectionner un type de jeu";
					return;
				}
				if(bonusk0 != null && !bonusk0.equalsIgnoreCase("")){
					mbonusk0 = Double.parseDouble(bonusk0);
				}
				else{
					setErreurs_b(FIELD_BONUSK0, "Mauvais montant min");
					resultat_b = "Veuillez saisir un montant min valide";
					return;
				}
				if(bonusk1 != null && !bonusk1.equalsIgnoreCase("")){
					mbonusk1 = Double.parseDouble(bonusk1);
				}
				else{
					setErreurs_b(FIELD_BONUSK1, "Mauvais montant max");
					resultat_b = "Veuillez saisir un montant max valide";
					return;
				}
				if(mbonusk0 > mbonusk1){
					setErreurs_b(FIELD_BONUSK1, "Mauvais montant");
					resultat_b = "Bonus Min supérieur à Bonus Max";
					return;
				}
				if(bonusk_rate == null || bonusk_rate.equalsIgnoreCase("")){
					bonusk_rate = "2";
					//return;
				}
				double k_rate = Double.parseDouble(bonusk_rate)/100;
				
				try {
					//ajout = configDao.updateBonusK(k_rate, mbonusk0, mbonusk1, coderace );
					ajout = supergameAPI.getSuperGameDAO().updateBonusK(Params.url, k_rate, mbonusk0, mbonusk1, coderace);
					if(ajout != 0){
						erreurs.clear();
						resultat_b = "Mise à jour du bonus effectué avec succès";
					}
					else{
						setErreurs_b("Update", "Echec de la mise à jour");
						resultat_b = "Echec de la mise à jour";
						return;
					}
				} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
				
			}
			else if(jeu.equalsIgnoreCase("spin")){
				
			}
			else if(jeu.equalsIgnoreCase("dog")){
				
			}
		}
		else if(action.equalsIgnoreCase("addcagnotte")){
			
			String detail_lot = "";
			CagnotteDto cagnotte = new CagnotteDto();
			
			dat1 = getName(request, FIELD_DATE1);
			String partner = getName(request, "ncbonus_part2");
			String lot = getName(request, "ncbonus_part");
			String heur = getName(request, "cg_heure");
			
			if(lot == null) {
				setErreurs_c("Update", "Veuillez choisir un lot");
				resultat_c = "Veuillez choisir un lot";
				return;
			}
			if(dat1 == null) {
				setErreurs_c("Update", "Veuillez choisir le jour de tombée");
				resultat_c = "Veuillez choisir le jour de tombée";
				return;
			}
			
			System.out.println("Lot: "+lot+" Date: "+dat1+":"+heur+" partner: "+partner);
			if(lot.equalsIgnoreCase("1")) {
				detail_lot = "tel";
			}
			else if(lot.equalsIgnoreCase("2")) {
				detail_lot = "woofer";
			}
			else if(lot.equalsIgnoreCase("3")) {
				detail_lot = "tricot";
			}
			else if(lot.equalsIgnoreCase("4")) {
				detail_lot = "conso";
			}
			else if(lot.equalsIgnoreCase("5")) {
				detail_lot = "ecran";
			}
			else if(lot.equalsIgnoreCase("6")) {
				detail_lot = "cash";
			}
			
			cagnotte.setLot(detail_lot);
			cagnotte.setHeur(dat1 + " " + heur);
			cagnotte.setJeu("");
			
			
			try {
				cagnotte = supergameAPI.getSuperGameDAO().saveJackpot(Params.url, cagnotte, partner);
				resultat_c = "Cagnotte mis à  jour";
			} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
				setErreurs_c("Update", "Erreur de creation cagnotte");
				resultat = "Erreur de creation cagnotte";
				return;
			}
			
		}
		
		
	}
	
	private String getName( HttpServletRequest request,String nomChamp ) {
        String valeur = request.getParameter( nomChamp );
       
       if ( valeur == null || valeur.trim().length() == 0) {
           return null;
       } else{
    
    	  return valeur.trim(); 
       }
       
	}
	
	private String getPass( HttpServletRequest request,String nomChamp ) {
        String valeur = request.getParameter( nomChamp );
       
       if ( valeur == null || valeur.trim().length() == 0) {
           return null;
       } else{
    	  return valeur.trim(); 
       }
       
	}
	
	private String getValRadio(HttpServletRequest request, String nomChamp){
		String valeur = request.getParameter(nomChamp);
		return valeur;
	}
	
	private boolean addNewPartenaire(Partner part) {
		
		int nb_race;
		Long n = 0L;
		n = partnerDao.create(part);
		
		if(n > 0){	
			
			//ajout d'une de configuration
			Config conf = new Config();
			conf.setCoderace(coderace);
			configDao.create(conf);
			
			//ajout d'un tirage par defaut
			Keno ken = new Keno();
			ken.setDrawnumK("1");
			ken.setMultiplicateur("0");
			ken.setDrawnumbK("'1-2-3-4-5-6-7-8-9-10-11-12-13-14-15-16-17-18-19-20'");
			ken.setCoderace(coderace);
			ken.setHeureTirage("01/01/2020-00:00:00");
			nb_race = kenoDao.create(ken);
			
			//misetDao.createFree(n);
			
			if(nb_race > 0){
				resultat = "Partenaire enregistré avec succes";
			}
			else{
				setErreurs(FIELD_CODERACE, "Echec de creation");
				resultat = "Echec de creation";
				return Boolean.FALSE;
			}
			
			for (Partner pp : lpartner) {
				pp.setActif(0);
				pp.setCob("closed");
				partnerDao.update(pp);
			}
		}
		else {
			setErreurs(FIELD_CODERACE, "Echec de creation");
			resultat = "Echec de creation";
			return Boolean.FALSE;
		}
		
		return Boolean.TRUE;
	}		
}

----------------------------------- SOURCE END -------------------------------------
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:344)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1272)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:868)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider$1.run(CoreASTProvider.java:294)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.createAST(CoreASTProvider.java:286)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.getAST(CoreASTProvider.java:199)
	at org.eclipse.jdt.core.manipulation.SharedASTProviderCore.getAST(SharedASTProviderCore.java:138)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.getHoveredASTNode(JavadocHover.java:1003)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.getInfoText(JavadocHover.java:799)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.getHoverInfo(JavadocHover.java:743)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.internalGetHoverInfo(JavadocHover.java:666)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.getHoverInfo2(JavadocHover.java:658)
	at org.eclipse.lsp4e.jdt.LSJavaHoverProvider.lambda$0(LSJavaHoverProvider.java:68)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.exec(CompletableFuture.java:1796)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182)
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165)

!ENTRY org.eclipse.jdt.core.manipulation 4 2 2023-07-23 23:37:23.169
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.jdt.core.manipulation".
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:344)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1272)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:868)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider$1.run(CoreASTProvider.java:294)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.createAST(CoreASTProvider.java:286)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.getAST(CoreASTProvider.java:199)
	at org.eclipse.jdt.core.manipulation.SharedASTProviderCore.getAST(SharedASTProviderCore.java:138)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.getHoveredASTNode(JavadocHover.java:1003)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.getInfoText(JavadocHover.java:799)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.getHoverInfo(JavadocHover.java:743)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.internalGetHoverInfo(JavadocHover.java:666)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.getHoverInfo2(JavadocHover.java:658)
	at org.eclipse.lsp4e.jdt.LSJavaHoverProvider.lambda$0(LSJavaHoverProvider.java:68)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.exec(CompletableFuture.java:1796)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182)
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165)

!ENTRY org.eclipse.jdt.core.manipulation 4 0 2023-07-23 23:37:23.170
!MESSAGE Error in JDT Core during AST creation
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:344)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1272)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:868)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider$1.run(CoreASTProvider.java:294)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.createAST(CoreASTProvider.java:286)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.getAST(CoreASTProvider.java:199)
	at org.eclipse.jdt.core.manipulation.SharedASTProviderCore.getAST(SharedASTProviderCore.java:138)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.getHoveredASTNode(JavadocHover.java:1003)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.getInfoText(JavadocHover.java:799)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.getHoverInfo(JavadocHover.java:743)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.internalGetHoverInfo(JavadocHover.java:666)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.getHoverInfo2(JavadocHover.java:658)
	at org.eclipse.lsp4e.jdt.LSJavaHoverProvider.lambda$0(LSJavaHoverProvider.java:68)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.exec(CompletableFuture.java:1796)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182)
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165)

!ENTRY org.eclipse.jdt.core 4 4 2023-07-23 23:37:23.227
!MESSAGE Exception occurred during compilation unit conversion:
----------------------------------- SOURCE BEGIN -------------------------------------
package business;

import java.io.IOException;
import java.net.URISyntaxException;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.servlet.http.HttpServletRequest;

import org.apache.commons.lang3.StringUtils;
import org.codehaus.jettison.json.JSONException;
import org.jasypt.util.password.ConfigurablePasswordEncryptor;

import config.Params;
import modele.CagnotteDto;
import modele.Caissier;
import modele.CaissierDto;
import modele.Config;
import modele.Keno;
import modele.Partner;
import modele.PartnerDto;
import modele.ResPartner;
import superbetDAO.AirtimeDAO;
import superbetDAO.CagnotteDAO;
import superbetDAO.CaissierDAO;
import superbetDAO.ConfigDAO;
import superbetDAO.EffChoicekDAO;
import superbetDAO.GameCycleDAO;
import superbetDAO.KenoDAO;
import superbetDAO.MisekDAO;
import superbetDAO.Misek_tempDAO;
import superbetDAO.MisetDAO;
import superbetDAO.PartnerDAO;
import superbetDAO.SpinDAO;
import superbetDAO.UtilDAO;
import superbetDAO.VersementDAO;
import superbetDAO.api.exeception.DAOAPIException;
import superbetDAO.api.implementations.SuperGameDAOAPI;
import superbetDAO.api.interfaces.ISuperGameDAOAPILocal;

public final class ConfigForm {
	
	private static final String FIELD_CODERACE = "ncpartner";
	private static final String FIELD_ZONE = "nczone";
	
	private static final String FIELD_NOM_CAISSIER = "ncuser";
	private static final String FIELD_LOGIN = "nclogin";
	private static final String FIELD_PASS = "ncpass";
	private static final String FIELD_PROFIL = "ncprofil";
	private static final String FIELD_PARTNER = "ncsalle_cais";
	private static final String FIELD_JEU = "ncbonus_jeu";
	
	private static final String FIELD_BONUSK0 = "bonu_sum_min";
	private static final String FIELD_BONUSK1 = "bonu_sum_max";
	private static final String FIELD_BONUSK_RATE = "ncbonus_rate";
	private static final String FIELD_BONUSK_RESERVE = "ncbonus_reserve";
	private static final String FIELD_KCODERACE = "ncbonus_part1";
	private static final String FIELD_DATE1 = "cgddebut";
	private  ISuperGameDAOAPILocal  supergameAPI;
	
	private  String resultat = null;
	private  String resultat_u = null;
	private  String resultat_b = null;
	private  String resultat_c = null;
	private  Map<String, String> erreurs;
	private  Map<String, String> erreurs_u;
	private  Map<String, String> erreurs_b;
	private  Map<String, String> erreurs_c;
	private String action="";
	private String coderace="", dat1;
	private String zone="";
	
	private String bonusk0;
	private String bonusk1;
    private double mbonusk0;
    private double mbonusk1;
    private int ajout = 0;
   
	
	private  Map<String, String> user;
	private List<Partner> lpartner;
	
	private KenoDAO kenoDao;
	private MisetDAO misetDao;
	private EffChoicekDAO effchoicekDao;
	private MisekDAO misekDao;
	private VersementDAO verstDao;
	private PartnerDAO partnerDao;
	private Misek_tempDAO misektpDao;
	private UtilDAO utilDao;
	private CaissierDAO caissierDao;
	private ConfigDAO configDao;
	private SpinDAO spinDao;
	private AirtimeDAO airtimeDao;
	private GameCycleDAO game_cycleDao;
	private CagnotteDAO cagnotteDao;
	
	
	public String getResultat() {
		return resultat;
	}
	
	public Map<String, String> getErreurs_u() {
		return erreurs_u;
	}

	public void setErreurs_u(String champ, String message) {
		erreurs_u.put(champ, message);
	}

	public Map<String, String> getErreurs_b() {
		return erreurs_b;
	}

	public void setErreurs_b(String champ, String message) {
		erreurs_b.put(champ, message);
	}

	public Map<String, String> getErreurs_c() {
		return erreurs_c;
	}

	public void setErreurs_c(String champ, String message) {
		erreurs_c.put(champ, message);
	}
	
	public String getResultat_u() {
		return resultat_u;
	}

	public String getResultat_b() {
		return resultat_b;
	}

	public String getResultat_c() {
		return resultat_c;
	}
	public String getAction() {
		return action;
	}
	
	public String getCoderace() {
		return coderace;
	}
	
	public String getZone() {
		return zone;
	}
	
	public Map<String, String> getErreurs() {
		return erreurs;
	}
	public void setErreurs(String champ, String message) {
		erreurs.put(champ, message);
	}
	
	
	
	public Map<String, String> getUser() {
		return user;
	}

	public void setUser(String champ, String message) {
		user.put(champ, message);;
	}
	
	public String getBonusk0() {
		return bonusk0;
	}

	public void setBonusk0(String bonusk0) {
		this.bonusk0 = bonusk0;
	}

	public String getBonusk1() {
		return bonusk1;
	}

	public void setBonusk1(String bonusk1) {
		this.bonusk1 = bonusk1;
	}

	public void setResultat(String resultat) {
		this.resultat = resultat;
	}

	public String getDat1() {
		return dat1;
	}

	public void setDat1(String dat1) {
		this.dat1 = dat1;
	}

	public ConfigForm(KenoDAO kenoDao,MisetDAO misetDao,UtilDAO utilDao,EffChoicekDAO effchoicekDao,MisekDAO misekDao,
			VersementDAO verstDao, PartnerDAO partnerDao, Misek_tempDAO misektpDao, CaissierDAO caissierDao, ConfigDAO configDao, SpinDAO spinDao, 
			AirtimeDAO airtimeDao, GameCycleDAO game_cycleDao){
		this.kenoDao = kenoDao;
		this.misetDao = misetDao;
		this.effchoicekDao = effchoicekDao;
		this.misekDao = misekDao;
		this.verstDao = verstDao;
		this.partnerDao = partnerDao;
		this.misektpDao = misektpDao;
		this.utilDao = utilDao;
		this.caissierDao = caissierDao;
		this.configDao = configDao;
		this.spinDao = spinDao;
		this.airtimeDao = airtimeDao;
		this.game_cycleDao = game_cycleDao;
		supergameAPI = SuperGameDAOAPI.getInstance();
	}
	
	public void manage_config(HttpServletRequest request){
		erreurs = new HashMap<String, String>();
		erreurs_u = new HashMap<String, String>();
		erreurs_b = new HashMap<String, String>();
		erreurs_c = new HashMap<String, String>();
		action = getName( request, "idconfig" );// definit l'action Ã  traiter. ajout partner, ajout caissier...
		
		if(action.equalsIgnoreCase("addpartner")){
			
			coderace = getName( request, FIELD_CODERACE );
			zone = getName( request, FIELD_ZONE );
			
			// recupere tous les partenaires
		    lpartner = partnerDao.getAllPartners();
		   
			
			if(StringUtils.isBlank(coderace)){
				return;
			}
			
			String[] spaceCoderace = coderace.trim().split(" ");
			
			if(coderace.length() < 5){
				
	  		  	setErreurs(FIELD_CODERACE, "Longueur du nom très court");
	  		  	resultat = "Nom très court, 5 caractères minimum";
	  		  	return;
	  		  	
			}
			else if(spaceCoderace.length > 1) {
				
				setErreurs_u(FIELD_LOGIN, "Pas d'espace dans le nom du partenaire");
				resultat = "Pas d'espace dans le nom du partenaire.";
		  		return;
		  		
			}
			
			 Partner partn = partnerDao.find(coderace);
			 
			 if(partn == null) {
				 
				 Partner part = new Partner();
				 part.setCoderace(coderace);
				 part.setZone(zone);
				 part.setGroupe(1);
				 part.setActif(1);
				 part.setCob("opened");
				 boolean isAdded = addNewPartenaire(part);
				 
				 if(isAdded) {
					 
					 PartnerDto pdto = new PartnerDto();
					 pdto.setCoderace(coderace);
					 pdto.setZone(zone);
					 ResPartner resp = supergameAPI.getSuperGameDAO().submitPartner(Params.url, pdto);
					 
				 }
				 
			 }
			
			
		
			//Partner partner = partnerDao.find(coderace);
			
			 PartnerDto pdto = new PartnerDto();
			 pdto.setCoderace(coderace);
			 pdto.setZone(zone);
			 ResPartner resp = supergameAPI.getSuperGameDAO().submitPartner(Params.url, pdto);
			 Partner p = resp.getPartner();
			 String respMess = resp.getMessage();

			 Partner part = new Partner();
			 part.setCoderace(coderace);
			 part.setZone(zone);
			 part.setGroupe(1);
			 part.setActif(1);
			 part.setCob("opened");

			 if ("EXISTS".equalsIgnoreCase(respMess)) {

				 Partner partner = partnerDao.find(coderace);

				 if (partner == null) {
					 addNewPartenaire(part);
				 }
				 else {
					 setErreurs(FIELD_CODERACE, "present");
					 resultat = "Partenaire/Salle deja présent.";
				 }

			 }
			 else if("NEW".equalsIgnoreCase(respMess)) {
				 addNewPartenaire(part);
			 }

		 } catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
			 // TODO Auto-generated catch block
			 e.printStackTrace();
		 }
		}
		else if(action.equalsIgnoreCase("addcaissier")){
			user = new HashMap<String, String>();
			
			String nom_user = getName(request, FIELD_NOM_CAISSIER);
			String login = getName(request, FIELD_LOGIN);
			String pass = getPass(request, FIELD_PASS);
			String profil = getName(request, FIELD_PROFIL);
			String partner = getName(request, FIELD_PARTNER);
			
			if(StringUtils.isBlank(login) || StringUtils.isBlank(pass) || StringUtils.isBlank(profil) || StringUtils.isBlank(partner)){
				return;
			}
			
			String[] spaceLogin = login.trim().split(" ");
			if(login.length() < 5){
	  		  setErreurs_u(FIELD_LOGIN, "Longueur du login très court");
	  		  resultat_u = "Login très court, 5 caractères minimum";
	  		  return;
			}
			else if(spaceLogin.length > 1) {
				setErreurs_u(FIELD_LOGIN, "Pas d'espace dans le login");
		  		resultat_u = "Pas d'espace dans le login.";
		  		return;
			}
			
			
			if(pass.length() < 6){
	  		  setErreurs_u(FIELD_PASS, "Longueur du mot de passe très court");
	  		  resultat_u = "pass très court, 5 caractÃ¨res minimum";
	  		  return;
			}
			
			ConfigurablePasswordEncryptor passwordEncryptor = new ConfigurablePasswordEncryptor();
			passwordEncryptor.setAlgorithm( Params.ALGO_CHIFFREMENT );
			passwordEncryptor.setPlainDigest( false );
			
			Caissier caissier = caissierDao.findByLogin(login);
			Long idpartner = partnerDao.find(partner).getIdpartner();
			Long idprofil = 2L;
			if(profil.equalsIgnoreCase("CAISSIER")){
				idprofil = 2L;
			}
			else if(profil.equalsIgnoreCase("ADMINISTRATEUR")){
				idprofil = 1L;
			}
			
			String passChiffre = passwordEncryptor.encryptPassword(pass);
			setUser("nomc", nom_user);
			setUser("loginc", login);
			setUser("passc", "******");
			
			if(caissier == null){
				
				int n = 0;
				Caissier cais = new Caissier();
				cais.setNomc(nom_user);
				cais.setLoginc(login);
				cais.setMdpc(passChiffre);
				cais.setPartner(partner);
				cais.setProfil(idprofil);
				cais.setGrpe(1);
				//System.out.println(cais);
				n = caissierDao.create(cais);
				
				try {
					
					if (n > 0) {
						// Utilisateur crée en local
						
						CaissierDto caisDto = new CaissierDto();
						caisDto.setNomc(nom_user);
						caisDto.setLoginc(login);
						caisDto.setMdpc(pass);
						caisDto.setPartner(partner);
						caisDto.setProfil(idprofil);
						caisDto.setGrpe(1);
						//System.out.println(caisDto);
						Caissier caisse = supergameAPI.getSuperGameDAO().saveUser(Params.url, caisDto, partner);
						if(caisse == null) {
							
							caissierDao.delete(cais);
							setErreurs_u(FIELD_LOGIN, "Echec lors de la creation");
							resultat_u = "Echec lors de la creation.";
							return;
						}
						
						resultat_u="Caissier crée avec succes";
						
					}
					
				} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
					e.printStackTrace();
					return;
				}
				
//				if(n > 0){	
//					Caissier user = caissierDao.findByLogin(login);
//					//creation de la ligne des mouvements
//					airtimeDao.createMvt(user.getIdCaissier(), 0);
//					resultat_u="Caissier crée avec succes";
//					return;
//				}
//				else{
//					setErreurs_u(FIELD_LOGIN, "Echec de creation");
//					resultat_u = "Echec de creation";
//					return;
//				}
				
				
			}
			else{
				setErreurs_u(FIELD_LOGIN, "present");
				resultat_u = "Login utilisé, veuillez entrer un autre";
			}
		}
		else if(action.equalsIgnoreCase("addbonus")){
			bonusk0 = getName(request, FIELD_BONUSK0);
			bonusk1 = getName(request, FIELD_BONUSK1);
			String jeu = getName(request, FIELD_JEU);
			//System.out.println("BONUSMIN: "+bonusk0+" BONUSMAX: "+bonusk1+" | "+jeu);
			coderace = getName( request, FIELD_KCODERACE );
			String bonusk_rate = getName(request,  FIELD_BONUSK_RATE);
			//System.out.println("coderace: "+coderace+" | "+bonusk_rate);
			Long idpartner = partnerDao.find(coderace).getIdpartner();
			resultat_b = "";
			erreurs_b.clear();
			if(jeu == null || jeu.equalsIgnoreCase("")){
				setErreurs_b(FIELD_JEU, "Mauvais jeu");
				resultat_b = "Veuillez selectionner un type de jeu";
				return;
			}
			
			if(jeu.equalsIgnoreCase("keno")){
				if(coderace == null || coderace.equalsIgnoreCase("")){
					setErreurs_b(FIELD_KCODERACE, "Mauvais partenaire");
					resultat_b = "Veuillez selectionner un partenaire";
					return;
				}
				if(jeu == null || jeu.equalsIgnoreCase("")){
					setErreurs_b(FIELD_JEU, "Mauvais jeu");
					resultat_b = "Veuillez selectionner un type de jeu";
					return;
				}
				if(bonusk0 != null && !bonusk0.equalsIgnoreCase("")){
					mbonusk0 = Double.parseDouble(bonusk0);
				}
				else{
					setErreurs_b(FIELD_BONUSK0, "Mauvais montant min");
					resultat_b = "Veuillez saisir un montant min valide";
					return;
				}
				if(bonusk1 != null && !bonusk1.equalsIgnoreCase("")){
					mbonusk1 = Double.parseDouble(bonusk1);
				}
				else{
					setErreurs_b(FIELD_BONUSK1, "Mauvais montant max");
					resultat_b = "Veuillez saisir un montant max valide";
					return;
				}
				if(mbonusk0 > mbonusk1){
					setErreurs_b(FIELD_BONUSK1, "Mauvais montant");
					resultat_b = "Bonus Min supérieur à Bonus Max";
					return;
				}
				if(bonusk_rate == null || bonusk_rate.equalsIgnoreCase("")){
					bonusk_rate = "2";
					//return;
				}
				double k_rate = Double.parseDouble(bonusk_rate)/100;
				
				try {
					//ajout = configDao.updateBonusK(k_rate, mbonusk0, mbonusk1, coderace );
					ajout = supergameAPI.getSuperGameDAO().updateBonusK(Params.url, k_rate, mbonusk0, mbonusk1, coderace);
					if(ajout != 0){
						erreurs.clear();
						resultat_b = "Mise à jour du bonus effectué avec succès";
					}
					else{
						setErreurs_b("Update", "Echec de la mise à jour");
						resultat_b = "Echec de la mise à jour";
						return;
					}
				} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
				
			}
			else if(jeu.equalsIgnoreCase("spin")){
				
			}
			else if(jeu.equalsIgnoreCase("dog")){
				
			}
		}
		else if(action.equalsIgnoreCase("addcagnotte")){
			
			String detail_lot = "";
			CagnotteDto cagnotte = new CagnotteDto();
			
			dat1 = getName(request, FIELD_DATE1);
			String partner = getName(request, "ncbonus_part2");
			String lot = getName(request, "ncbonus_part");
			String heur = getName(request, "cg_heure");
			
			if(lot == null) {
				setErreurs_c("Update", "Veuillez choisir un lot");
				resultat_c = "Veuillez choisir un lot";
				return;
			}
			if(dat1 == null) {
				setErreurs_c("Update", "Veuillez choisir le jour de tombée");
				resultat_c = "Veuillez choisir le jour de tombée";
				return;
			}
			
			System.out.println("Lot: "+lot+" Date: "+dat1+":"+heur+" partner: "+partner);
			if(lot.equalsIgnoreCase("1")) {
				detail_lot = "tel";
			}
			else if(lot.equalsIgnoreCase("2")) {
				detail_lot = "woofer";
			}
			else if(lot.equalsIgnoreCase("3")) {
				detail_lot = "tricot";
			}
			else if(lot.equalsIgnoreCase("4")) {
				detail_lot = "conso";
			}
			else if(lot.equalsIgnoreCase("5")) {
				detail_lot = "ecran";
			}
			else if(lot.equalsIgnoreCase("6")) {
				detail_lot = "cash";
			}
			
			cagnotte.setLot(detail_lot);
			cagnotte.setHeur(dat1 + " " + heur);
			cagnotte.setJeu("");
			
			
			try {
				cagnotte = supergameAPI.getSuperGameDAO().saveJackpot(Params.url, cagnotte, partner);
				resultat_c = "Cagnotte mis à  jour";
			} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
				setErreurs_c("Update", "Erreur de creation cagnotte");
				resultat = "Erreur de creation cagnotte";
				return;
			}
			
		}
		
		
	}
	
	private String getName( HttpServletRequest request,String nomChamp ) {
        String valeur = request.getParameter( nomChamp );
       
       if ( valeur == null || valeur.trim().length() == 0) {
           return null;
       } else{
    
    	  return valeur.trim(); 
       }
       
	}
	
	private String getPass( HttpServletRequest request,String nomChamp ) {
        String valeur = request.getParameter( nomChamp );
       
       if ( valeur == null || valeur.trim().length() == 0) {
           return null;
       } else{
    	  return valeur.trim(); 
       }
       
	}
	
	private String getValRadio(HttpServletRequest request, String nomChamp){
		String valeur = request.getParameter(nomChamp);
		return valeur;
	}
	
	private boolean addNewPartenaire(Partner part) {
		
		int nb_race;
		Long n = 0L;
		n = partnerDao.create(part);
		
		if(n > 0){	
			
			//ajout d'une de configuration
			Config conf = new Config();
			conf.setCoderace(coderace);
			configDao.create(conf);
			
			//ajout d'un tirage par defaut
			Keno ken = new Keno();
			ken.setDrawnumK("1");
			ken.setMultiplicateur("0");
			ken.setDrawnumbK("'1-2-3-4-5-6-7-8-9-10-11-12-13-14-15-16-17-18-19-20'");
			ken.setCoderace(coderace);
			ken.setHeureTirage("01/01/2020-00:00:00");
			nb_race = kenoDao.create(ken);
			
			//misetDao.createFree(n);
			
			if(nb_race > 0){
				resultat = "Partenaire enregistré avec succes";
			}
			else{
				setErreurs(FIELD_CODERACE, "Echec de creation");
				resultat = "Echec de creation";
				return Boolean.FALSE;
			}
			
			for (Partner pp : lpartner) {
				pp.setActif(0);
				pp.setCob("closed");
				partnerDao.update(pp);
			}
		}
		else {
			setErreurs(FIELD_CODERACE, "Echec de creation");
			resultat = "Echec de creation";
			return Boolean.FALSE;
		}
		
		return Boolean.TRUE;
	}		
}

----------------------------------- SOURCE END -------------------------------------
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:344)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1272)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:868)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider$1.run(CoreASTProvider.java:294)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.createAST(CoreASTProvider.java:286)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.getAST(CoreASTProvider.java:199)
	at org.eclipse.jdt.core.manipulation.SharedASTProviderCore.getAST(SharedASTProviderCore.java:138)
	at org.eclipse.jdt.internal.ui.text.java.hover.NLSStringHover.internalGetHoverInfo(NLSStringHover.java:141)
	at org.eclipse.jdt.internal.ui.text.java.hover.NLSStringHover.getHoverInfo2(NLSStringHover.java:120)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:163)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:130)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo2(JavaEditorTextHoverProxy.java:89)
	at org.eclipse.jface.text.TextViewerHoverManager$1.run(TextViewerHoverManager.java:155)

!ENTRY org.eclipse.jdt.core.manipulation 4 2 2023-07-23 23:37:23.229
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.jdt.core.manipulation".
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:344)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1272)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:868)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider$1.run(CoreASTProvider.java:294)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.createAST(CoreASTProvider.java:286)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.getAST(CoreASTProvider.java:199)
	at org.eclipse.jdt.core.manipulation.SharedASTProviderCore.getAST(SharedASTProviderCore.java:138)
	at org.eclipse.jdt.internal.ui.text.java.hover.NLSStringHover.internalGetHoverInfo(NLSStringHover.java:141)
	at org.eclipse.jdt.internal.ui.text.java.hover.NLSStringHover.getHoverInfo2(NLSStringHover.java:120)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:163)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:130)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo2(JavaEditorTextHoverProxy.java:89)
	at org.eclipse.jface.text.TextViewerHoverManager$1.run(TextViewerHoverManager.java:155)

!ENTRY org.eclipse.jdt.core.manipulation 4 0 2023-07-23 23:37:23.230
!MESSAGE Error in JDT Core during AST creation
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:344)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1272)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:868)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider$1.run(CoreASTProvider.java:294)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.createAST(CoreASTProvider.java:286)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.getAST(CoreASTProvider.java:199)
	at org.eclipse.jdt.core.manipulation.SharedASTProviderCore.getAST(SharedASTProviderCore.java:138)
	at org.eclipse.jdt.internal.ui.text.java.hover.NLSStringHover.internalGetHoverInfo(NLSStringHover.java:141)
	at org.eclipse.jdt.internal.ui.text.java.hover.NLSStringHover.getHoverInfo2(NLSStringHover.java:120)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:163)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:130)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo2(JavaEditorTextHoverProxy.java:89)
	at org.eclipse.jface.text.TextViewerHoverManager$1.run(TextViewerHoverManager.java:155)

!ENTRY org.eclipse.jdt.core 4 4 2023-07-23 23:37:23.308
!MESSAGE Exception occurred during compilation unit conversion:
----------------------------------- SOURCE BEGIN -------------------------------------
package business;

import java.io.IOException;
import java.net.URISyntaxException;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.servlet.http.HttpServletRequest;

import org.apache.commons.lang3.StringUtils;
import org.codehaus.jettison.json.JSONException;
import org.jasypt.util.password.ConfigurablePasswordEncryptor;

import config.Params;
import modele.CagnotteDto;
import modele.Caissier;
import modele.CaissierDto;
import modele.Config;
import modele.Keno;
import modele.Partner;
import modele.PartnerDto;
import modele.ResPartner;
import superbetDAO.AirtimeDAO;
import superbetDAO.CagnotteDAO;
import superbetDAO.CaissierDAO;
import superbetDAO.ConfigDAO;
import superbetDAO.EffChoicekDAO;
import superbetDAO.GameCycleDAO;
import superbetDAO.KenoDAO;
import superbetDAO.MisekDAO;
import superbetDAO.Misek_tempDAO;
import superbetDAO.MisetDAO;
import superbetDAO.PartnerDAO;
import superbetDAO.SpinDAO;
import superbetDAO.UtilDAO;
import superbetDAO.VersementDAO;
import superbetDAO.api.exeception.DAOAPIException;
import superbetDAO.api.implementations.SuperGameDAOAPI;
import superbetDAO.api.interfaces.ISuperGameDAOAPILocal;

public final class ConfigForm {
	
	private static final String FIELD_CODERACE = "ncpartner";
	private static final String FIELD_ZONE = "nczone";
	
	private static final String FIELD_NOM_CAISSIER = "ncuser";
	private static final String FIELD_LOGIN = "nclogin";
	private static final String FIELD_PASS = "ncpass";
	private static final String FIELD_PROFIL = "ncprofil";
	private static final String FIELD_PARTNER = "ncsalle_cais";
	private static final String FIELD_JEU = "ncbonus_jeu";
	
	private static final String FIELD_BONUSK0 = "bonu_sum_min";
	private static final String FIELD_BONUSK1 = "bonu_sum_max";
	private static final String FIELD_BONUSK_RATE = "ncbonus_rate";
	private static final String FIELD_BONUSK_RESERVE = "ncbonus_reserve";
	private static final String FIELD_KCODERACE = "ncbonus_part1";
	private static final String FIELD_DATE1 = "cgddebut";
	private  ISuperGameDAOAPILocal  supergameAPI;
	
	private  String resultat = null;
	private  String resultat_u = null;
	private  String resultat_b = null;
	private  String resultat_c = null;
	private  Map<String, String> erreurs;
	private  Map<String, String> erreurs_u;
	private  Map<String, String> erreurs_b;
	private  Map<String, String> erreurs_c;
	private String action="";
	private String coderace="", dat1;
	private String zone="";
	
	private String bonusk0;
	private String bonusk1;
    private double mbonusk0;
    private double mbonusk1;
    private int ajout = 0;
   
	
	private  Map<String, String> user;
	private List<Partner> lpartner;
	
	private KenoDAO kenoDao;
	private MisetDAO misetDao;
	private EffChoicekDAO effchoicekDao;
	private MisekDAO misekDao;
	private VersementDAO verstDao;
	private PartnerDAO partnerDao;
	private Misek_tempDAO misektpDao;
	private UtilDAO utilDao;
	private CaissierDAO caissierDao;
	private ConfigDAO configDao;
	private SpinDAO spinDao;
	private AirtimeDAO airtimeDao;
	private GameCycleDAO game_cycleDao;
	private CagnotteDAO cagnotteDao;
	
	
	public String getResultat() {
		return resultat;
	}
	
	public Map<String, String> getErreurs_u() {
		return erreurs_u;
	}

	public void setErreurs_u(String champ, String message) {
		erreurs_u.put(champ, message);
	}

	public Map<String, String> getErreurs_b() {
		return erreurs_b;
	}

	public void setErreurs_b(String champ, String message) {
		erreurs_b.put(champ, message);
	}

	public Map<String, String> getErreurs_c() {
		return erreurs_c;
	}

	public void setErreurs_c(String champ, String message) {
		erreurs_c.put(champ, message);
	}
	
	public String getResultat_u() {
		return resultat_u;
	}

	public String getResultat_b() {
		return resultat_b;
	}

	public String getResultat_c() {
		return resultat_c;
	}
	public String getAction() {
		return action;
	}
	
	public String getCoderace() {
		return coderace;
	}
	
	public String getZone() {
		return zone;
	}
	
	public Map<String, String> getErreurs() {
		return erreurs;
	}
	public void setErreurs(String champ, String message) {
		erreurs.put(champ, message);
	}
	
	
	
	public Map<String, String> getUser() {
		return user;
	}

	public void setUser(String champ, String message) {
		user.put(champ, message);;
	}
	
	public String getBonusk0() {
		return bonusk0;
	}

	public void setBonusk0(String bonusk0) {
		this.bonusk0 = bonusk0;
	}

	public String getBonusk1() {
		return bonusk1;
	}

	public void setBonusk1(String bonusk1) {
		this.bonusk1 = bonusk1;
	}

	public void setResultat(String resultat) {
		this.resultat = resultat;
	}

	public String getDat1() {
		return dat1;
	}

	public void setDat1(String dat1) {
		this.dat1 = dat1;
	}

	public ConfigForm(KenoDAO kenoDao,MisetDAO misetDao,UtilDAO utilDao,EffChoicekDAO effchoicekDao,MisekDAO misekDao,
			VersementDAO verstDao, PartnerDAO partnerDao, Misek_tempDAO misektpDao, CaissierDAO caissierDao, ConfigDAO configDao, SpinDAO spinDao, 
			AirtimeDAO airtimeDao, GameCycleDAO game_cycleDao){
		this.kenoDao = kenoDao;
		this.misetDao = misetDao;
		this.effchoicekDao = effchoicekDao;
		this.misekDao = misekDao;
		this.verstDao = verstDao;
		this.partnerDao = partnerDao;
		this.misektpDao = misektpDao;
		this.utilDao = utilDao;
		this.caissierDao = caissierDao;
		this.configDao = configDao;
		this.spinDao = spinDao;
		this.airtimeDao = airtimeDao;
		this.game_cycleDao = game_cycleDao;
		supergameAPI = SuperGameDAOAPI.getInstance();
	}
	
	public void manage_config(HttpServletRequest request){
		erreurs = new HashMap<String, String>();
		erreurs_u = new HashMap<String, String>();
		erreurs_b = new HashMap<String, String>();
		erreurs_c = new HashMap<String, String>();
		action = getName( request, "idconfig" );// definit l'action Ã  traiter. ajout partner, ajout caissier...
		
		if(action.equalsIgnoreCase("addpartner")){
			
			coderace = getName( request, FIELD_CODERACE );
			zone = getName( request, FIELD_ZONE );
			
			// recupere tous les partenaires
		    lpartner = partnerDao.getAllPartners();
		   
			
			if(StringUtils.isBlank(coderace)){
				return;
			}
			
			String[] spaceCoderace = coderace.trim().split(" ");
			
			if(coderace.length() < 5){
				
	  		  	setErreurs(FIELD_CODERACE, "Longueur du nom très court");
	  		  	resultat = "Nom très court, 5 caractères minimum";
	  		  	return;
	  		  	
			}
			else if(spaceCoderace.length > 1) {
				
				setErreurs_u(FIELD_LOGIN, "Pas d'espace dans le nom du partenaire");
				resultat = "Pas d'espace dans le nom du partenaire.";
		  		return;
		  		
			}
			
			 Partner partn = partnerDao.find(coderace);
			 
			 if(partn == null) {
				 
				 Partner part = new Partner();
				 part.setCoderace(coderace);
				 part.setZone(zone);
				 part.setGroupe(1);
				 part.setActif(1);
				 part.setCob("opened");
				 boolean isAdded = addNewPartenaire(part);
				 
				 if(isAdded) {
					 
					 PartnerDto pdto = new PartnerDto();
					 pdto.setCoderace(coderace);
					 pdto.setZone(zone);
					 ResPartner resp = supergameAPI.getSuperGameDAO().submitPartner(Params.url, pdto);
					 
				 }
				 
			 }
			
			
		
			//Partner partner = partnerDao.find(coderace);
			
			 PartnerDto pdto = new PartnerDto();
			 pdto.setCoderace(coderace);
			 pdto.setZone(zone);
			 ResPartner resp = supergameAPI.getSuperGameDAO().submitPartner(Params.url, pdto);
			 Partner p = resp.getPartner();
			 String respMess = resp.getMessage();

			 Partner part = new Partner();
			 part.setCoderace(coderace);
			 part.setZone(zone);
			 part.setGroupe(1);
			 part.setActif(1);
			 part.setCob("opened");

			 if ("EXISTS".equalsIgnoreCase(respMess)) {

				 Partner partner = partnerDao.find(coderace);

				 if (partner == null) {
					 addNewPartenaire(part);
				 }
				 else {
					 setErreurs(FIELD_CODERACE, "present");
					 resultat = "Partenaire/Salle deja présent.";
				 }

			 }
			 else if("NEW".equalsIgnoreCase(respMess)) {
				 addNewPartenaire(part);
			 }

		 } catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
			 // TODO Auto-generated catch block
			 e.printStackTrace();
		 }
		}
		else if(action.equalsIgnoreCase("addcaissier")){
			user = new HashMap<String, String>();
			
			String nom_user = getName(request, FIELD_NOM_CAISSIER);
			String login = getName(request, FIELD_LOGIN);
			String pass = getPass(request, FIELD_PASS);
			String profil = getName(request, FIELD_PROFIL);
			String partner = getName(request, FIELD_PARTNER);
			
			if(StringUtils.isBlank(login) || StringUtils.isBlank(pass) || StringUtils.isBlank(profil) || StringUtils.isBlank(partner)){
				return;
			}
			
			String[] spaceLogin = login.trim().split(" ");
			if(login.length() < 5){
	  		  setErreurs_u(FIELD_LOGIN, "Longueur du login très court");
	  		  resultat_u = "Login très court, 5 caractères minimum";
	  		  return;
			}
			else if(spaceLogin.length > 1) {
				setErreurs_u(FIELD_LOGIN, "Pas d'espace dans le login");
		  		resultat_u = "Pas d'espace dans le login.";
		  		return;
			}
			
			
			if(pass.length() < 6){
	  		  setErreurs_u(FIELD_PASS, "Longueur du mot de passe très court");
	  		  resultat_u = "pass très court, 5 caractÃ¨res minimum";
	  		  return;
			}
			
			ConfigurablePasswordEncryptor passwordEncryptor = new ConfigurablePasswordEncryptor();
			passwordEncryptor.setAlgorithm( Params.ALGO_CHIFFREMENT );
			passwordEncryptor.setPlainDigest( false );
			
			Caissier caissier = caissierDao.findByLogin(login);
			Long idpartner = partnerDao.find(partner).getIdpartner();
			Long idprofil = 2L;
			if(profil.equalsIgnoreCase("CAISSIER")){
				idprofil = 2L;
			}
			else if(profil.equalsIgnoreCase("ADMINISTRATEUR")){
				idprofil = 1L;
			}
			
			String passChiffre = passwordEncryptor.encryptPassword(pass);
			setUser("nomc", nom_user);
			setUser("loginc", login);
			setUser("passc", "******");
			
			if(caissier == null){
				
				int n = 0;
				Caissier cais = new Caissier();
				cais.setNomc(nom_user);
				cais.setLoginc(login);
				cais.setMdpc(passChiffre);
				cais.setPartner(partner);
				cais.setProfil(idprofil);
				cais.setGrpe(1);
				//System.out.println(cais);
				n = caissierDao.create(cais);
				
				try {
					
					if (n > 0) {
						// Utilisateur crée en local
						
						CaissierDto caisDto = new CaissierDto();
						caisDto.setNomc(nom_user);
						caisDto.setLoginc(login);
						caisDto.setMdpc(pass);
						caisDto.setPartner(partner);
						caisDto.setProfil(idprofil);
						caisDto.setGrpe(1);
						//System.out.println(caisDto);
						Caissier caisse = supergameAPI.getSuperGameDAO().saveUser(Params.url, caisDto, partner);
						if(caisse == null) {
							
							caissierDao.delete(cais);
							setErreurs_u(FIELD_LOGIN, "Echec lors de la creation");
							resultat_u = "Echec lors de la creation.";
							return;
						}
						
						resultat_u="Caissier crée avec succes";
						
					}
					
				} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
					e.printStackTrace();
					return;
				}
				
//				if(n > 0){	
//					Caissier user = caissierDao.findByLogin(login);
//					//creation de la ligne des mouvements
//					airtimeDao.createMvt(user.getIdCaissier(), 0);
//					resultat_u="Caissier crée avec succes";
//					return;
//				}
//				else{
//					setErreurs_u(FIELD_LOGIN, "Echec de creation");
//					resultat_u = "Echec de creation";
//					return;
//				}
				
				
			}
			else{
				setErreurs_u(FIELD_LOGIN, "present");
				resultat_u = "Login utilisé, veuillez entrer un autre";
			}
		}
		else if(action.equalsIgnoreCase("addbonus")){
			bonusk0 = getName(request, FIELD_BONUSK0);
			bonusk1 = getName(request, FIELD_BONUSK1);
			String jeu = getName(request, FIELD_JEU);
			//System.out.println("BONUSMIN: "+bonusk0+" BONUSMAX: "+bonusk1+" | "+jeu);
			coderace = getName( request, FIELD_KCODERACE );
			String bonusk_rate = getName(request,  FIELD_BONUSK_RATE);
			//System.out.println("coderace: "+coderace+" | "+bonusk_rate);
			Long idpartner = partnerDao.find(coderace).getIdpartner();
			resultat_b = "";
			erreurs_b.clear();
			if(jeu == null || jeu.equalsIgnoreCase("")){
				setErreurs_b(FIELD_JEU, "Mauvais jeu");
				resultat_b = "Veuillez selectionner un type de jeu";
				return;
			}
			
			if(jeu.equalsIgnoreCase("keno")){
				if(coderace == null || coderace.equalsIgnoreCase("")){
					setErreurs_b(FIELD_KCODERACE, "Mauvais partenaire");
					resultat_b = "Veuillez selectionner un partenaire";
					return;
				}
				if(jeu == null || jeu.equalsIgnoreCase("")){
					setErreurs_b(FIELD_JEU, "Mauvais jeu");
					resultat_b = "Veuillez selectionner un type de jeu";
					return;
				}
				if(bonusk0 != null && !bonusk0.equalsIgnoreCase("")){
					mbonusk0 = Double.parseDouble(bonusk0);
				}
				else{
					setErreurs_b(FIELD_BONUSK0, "Mauvais montant min");
					resultat_b = "Veuillez saisir un montant min valide";
					return;
				}
				if(bonusk1 != null && !bonusk1.equalsIgnoreCase("")){
					mbonusk1 = Double.parseDouble(bonusk1);
				}
				else{
					setErreurs_b(FIELD_BONUSK1, "Mauvais montant max");
					resultat_b = "Veuillez saisir un montant max valide";
					return;
				}
				if(mbonusk0 > mbonusk1){
					setErreurs_b(FIELD_BONUSK1, "Mauvais montant");
					resultat_b = "Bonus Min supérieur à Bonus Max";
					return;
				}
				if(bonusk_rate == null || bonusk_rate.equalsIgnoreCase("")){
					bonusk_rate = "2";
					//return;
				}
				double k_rate = Double.parseDouble(bonusk_rate)/100;
				
				try {
					//ajout = configDao.updateBonusK(k_rate, mbonusk0, mbonusk1, coderace );
					ajout = supergameAPI.getSuperGameDAO().updateBonusK(Params.url, k_rate, mbonusk0, mbonusk1, coderace);
					if(ajout != 0){
						erreurs.clear();
						resultat_b = "Mise à jour du bonus effectué avec succès";
					}
					else{
						setErreurs_b("Update", "Echec de la mise à jour");
						resultat_b = "Echec de la mise à jour";
						return;
					}
				} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
				
			}
			else if(jeu.equalsIgnoreCase("spin")){
				
			}
			else if(jeu.equalsIgnoreCase("dog")){
				
			}
		}
		else if(action.equalsIgnoreCase("addcagnotte")){
			
			String detail_lot = "";
			CagnotteDto cagnotte = new CagnotteDto();
			
			dat1 = getName(request, FIELD_DATE1);
			String partner = getName(request, "ncbonus_part2");
			String lot = getName(request, "ncbonus_part");
			String heur = getName(request, "cg_heure");
			
			if(lot == null) {
				setErreurs_c("Update", "Veuillez choisir un lot");
				resultat_c = "Veuillez choisir un lot";
				return;
			}
			if(dat1 == null) {
				setErreurs_c("Update", "Veuillez choisir le jour de tombée");
				resultat_c = "Veuillez choisir le jour de tombée";
				return;
			}
			
			System.out.println("Lot: "+lot+" Date: "+dat1+":"+heur+" partner: "+partner);
			if(lot.equalsIgnoreCase("1")) {
				detail_lot = "tel";
			}
			else if(lot.equalsIgnoreCase("2")) {
				detail_lot = "woofer";
			}
			else if(lot.equalsIgnoreCase("3")) {
				detail_lot = "tricot";
			}
			else if(lot.equalsIgnoreCase("4")) {
				detail_lot = "conso";
			}
			else if(lot.equalsIgnoreCase("5")) {
				detail_lot = "ecran";
			}
			else if(lot.equalsIgnoreCase("6")) {
				detail_lot = "cash";
			}
			
			cagnotte.setLot(detail_lot);
			cagnotte.setHeur(dat1 + " " + heur);
			cagnotte.setJeu("");
			
			
			try {
				cagnotte = supergameAPI.getSuperGameDAO().saveJackpot(Params.url, cagnotte, partner);
				resultat_c = "Cagnotte mis à  jour";
			} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
				setErreurs_c("Update", "Erreur de creation cagnotte");
				resultat = "Erreur de creation cagnotte";
				return;
			}
			
		}
		
		
	}
	
	private String getName( HttpServletRequest request,String nomChamp ) {
        String valeur = request.getParameter( nomChamp );
       
       if ( valeur == null || valeur.trim().length() == 0) {
           return null;
       } else{
    
    	  return valeur.trim(); 
       }
       
	}
	
	private String getPass( HttpServletRequest request,String nomChamp ) {
        String valeur = request.getParameter( nomChamp );
       
       if ( valeur == null || valeur.trim().length() == 0) {
           return null;
       } else{
    	  return valeur.trim(); 
       }
       
	}
	
	private String getValRadio(HttpServletRequest request, String nomChamp){
		String valeur = request.getParameter(nomChamp);
		return valeur;
	}
	
	private boolean addNewPartenaire(Partner part) {
		
		int nb_race;
		Long n = 0L;
		n = partnerDao.create(part);
		
		if(n > 0){	
			
			//ajout d'une de configuration
			Config conf = new Config();
			conf.setCoderace(coderace);
			configDao.create(conf);
			
			//ajout d'un tirage par defaut
			Keno ken = new Keno();
			ken.setDrawnumK("1");
			ken.setMultiplicateur("0");
			ken.setDrawnumbK("'1-2-3-4-5-6-7-8-9-10-11-12-13-14-15-16-17-18-19-20'");
			ken.setCoderace(coderace);
			ken.setHeureTirage("01/01/2020-00:00:00");
			nb_race = kenoDao.create(ken);
			
			//misetDao.createFree(n);
			
			if(nb_race > 0){
				resultat = "Partenaire enregistré avec succes";
			}
			else{
				setErreurs(FIELD_CODERACE, "Echec de creation");
				resultat = "Echec de creation";
				return Boolean.FALSE;
			}
			
			for (Partner pp : lpartner) {
				pp.setActif(0);
				pp.setCob("closed");
				partnerDao.update(pp);
			}
		}
		else {
			setErreurs(FIELD_CODERACE, "Echec de creation");
			resultat = "Echec de creation";
			return Boolean.FALSE;
		}
		
		return Boolean.TRUE;
	}		
}

----------------------------------- SOURCE END -------------------------------------
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:344)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1272)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:868)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider$1.run(CoreASTProvider.java:294)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.createAST(CoreASTProvider.java:286)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.getAST(CoreASTProvider.java:199)
	at org.eclipse.jdt.core.manipulation.SharedASTProviderCore.getAST(SharedASTProviderCore.java:138)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.getHoveredASTNode(JavadocHover.java:1003)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.getInfoText(JavadocHover.java:799)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.getHoverInfo(JavadocHover.java:743)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.internalGetHoverInfo(JavadocHover.java:666)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.getHoverInfo2(JavadocHover.java:658)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:163)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:130)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo2(JavaEditorTextHoverProxy.java:89)
	at org.eclipse.jface.text.TextViewerHoverManager$1.run(TextViewerHoverManager.java:155)

!ENTRY org.eclipse.jdt.core.manipulation 4 2 2023-07-23 23:37:23.311
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.jdt.core.manipulation".
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:344)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1272)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:868)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider$1.run(CoreASTProvider.java:294)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.createAST(CoreASTProvider.java:286)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.getAST(CoreASTProvider.java:199)
	at org.eclipse.jdt.core.manipulation.SharedASTProviderCore.getAST(SharedASTProviderCore.java:138)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.getHoveredASTNode(JavadocHover.java:1003)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.getInfoText(JavadocHover.java:799)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.getHoverInfo(JavadocHover.java:743)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.internalGetHoverInfo(JavadocHover.java:666)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.getHoverInfo2(JavadocHover.java:658)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:163)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:130)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo2(JavaEditorTextHoverProxy.java:89)
	at org.eclipse.jface.text.TextViewerHoverManager$1.run(TextViewerHoverManager.java:155)

!ENTRY org.eclipse.jdt.core.manipulation 4 0 2023-07-23 23:37:23.312
!MESSAGE Error in JDT Core during AST creation
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:344)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1272)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:868)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider$1.run(CoreASTProvider.java:294)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.createAST(CoreASTProvider.java:286)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.getAST(CoreASTProvider.java:199)
	at org.eclipse.jdt.core.manipulation.SharedASTProviderCore.getAST(SharedASTProviderCore.java:138)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.getHoveredASTNode(JavadocHover.java:1003)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.getInfoText(JavadocHover.java:799)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.getHoverInfo(JavadocHover.java:743)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.internalGetHoverInfo(JavadocHover.java:666)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.getHoverInfo2(JavadocHover.java:658)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:163)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:130)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo2(JavaEditorTextHoverProxy.java:89)
	at org.eclipse.jface.text.TextViewerHoverManager$1.run(TextViewerHoverManager.java:155)

!ENTRY org.eclipse.jdt.core 4 4 2023-07-23 23:37:27.945
!MESSAGE Exception occurred during compilation unit conversion:
----------------------------------- SOURCE BEGIN -------------------------------------
package business;

import java.io.IOException;
import java.net.URISyntaxException;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.servlet.http.HttpServletRequest;

import org.apache.commons.lang3.StringUtils;
import org.codehaus.jettison.json.JSONException;
import org.jasypt.util.password.ConfigurablePasswordEncryptor;

import config.Params;
import modele.CagnotteDto;
import modele.Caissier;
import modele.CaissierDto;
import modele.Config;
import modele.Keno;
import modele.Partner;
import modele.PartnerDto;
import modele.ResPartner;
import superbetDAO.AirtimeDAO;
import superbetDAO.CagnotteDAO;
import superbetDAO.CaissierDAO;
import superbetDAO.ConfigDAO;
import superbetDAO.EffChoicekDAO;
import superbetDAO.GameCycleDAO;
import superbetDAO.KenoDAO;
import superbetDAO.MisekDAO;
import superbetDAO.Misek_tempDAO;
import superbetDAO.MisetDAO;
import superbetDAO.PartnerDAO;
import superbetDAO.SpinDAO;
import superbetDAO.UtilDAO;
import superbetDAO.VersementDAO;
import superbetDAO.api.exeception.DAOAPIException;
import superbetDAO.api.implementations.SuperGameDAOAPI;
import superbetDAO.api.interfaces.ISuperGameDAOAPILocal;

public final class ConfigForm {
	
	private static final String FIELD_CODERACE = "ncpartner";
	private static final String FIELD_ZONE = "nczone";
	
	private static final String FIELD_NOM_CAISSIER = "ncuser";
	private static final String FIELD_LOGIN = "nclogin";
	private static final String FIELD_PASS = "ncpass";
	private static final String FIELD_PROFIL = "ncprofil";
	private static final String FIELD_PARTNER = "ncsalle_cais";
	private static final String FIELD_JEU = "ncbonus_jeu";
	
	private static final String FIELD_BONUSK0 = "bonu_sum_min";
	private static final String FIELD_BONUSK1 = "bonu_sum_max";
	private static final String FIELD_BONUSK_RATE = "ncbonus_rate";
	private static final String FIELD_BONUSK_RESERVE = "ncbonus_reserve";
	private static final String FIELD_KCODERACE = "ncbonus_part1";
	private static final String FIELD_DATE1 = "cgddebut";
	private  ISuperGameDAOAPILocal  supergameAPI;
	
	private  String resultat = null;
	private  String resultat_u = null;
	private  String resultat_b = null;
	private  String resultat_c = null;
	private  Map<String, String> erreurs;
	private  Map<String, String> erreurs_u;
	private  Map<String, String> erreurs_b;
	private  Map<String, String> erreurs_c;
	private String action="";
	private String coderace="", dat1;
	private String zone="";
	
	private String bonusk0;
	private String bonusk1;
    private double mbonusk0;
    private double mbonusk1;
    private int ajout = 0;
   
	
	private  Map<String, String> user;
	private List<Partner> lpartner;
	
	private KenoDAO kenoDao;
	private MisetDAO misetDao;
	private EffChoicekDAO effchoicekDao;
	private MisekDAO misekDao;
	private VersementDAO verstDao;
	private PartnerDAO partnerDao;
	private Misek_tempDAO misektpDao;
	private UtilDAO utilDao;
	private CaissierDAO caissierDao;
	private ConfigDAO configDao;
	private SpinDAO spinDao;
	private AirtimeDAO airtimeDao;
	private GameCycleDAO game_cycleDao;
	private CagnotteDAO cagnotteDao;
	
	
	public String getResultat() {
		return resultat;
	}
	
	public Map<String, String> getErreurs_u() {
		return erreurs_u;
	}

	public void setErreurs_u(String champ, String message) {
		erreurs_u.put(champ, message);
	}

	public Map<String, String> getErreurs_b() {
		return erreurs_b;
	}

	public void setErreurs_b(String champ, String message) {
		erreurs_b.put(champ, message);
	}

	public Map<String, String> getErreurs_c() {
		return erreurs_c;
	}

	public void setErreurs_c(String champ, String message) {
		erreurs_c.put(champ, message);
	}
	
	public String getResultat_u() {
		return resultat_u;
	}

	public String getResultat_b() {
		return resultat_b;
	}

	public String getResultat_c() {
		return resultat_c;
	}
	public String getAction() {
		return action;
	}
	
	public String getCoderace() {
		return coderace;
	}
	
	public String getZone() {
		return zone;
	}
	
	public Map<String, String> getErreurs() {
		return erreurs;
	}
	public void setErreurs(String champ, String message) {
		erreurs.put(champ, message);
	}
	
	
	
	public Map<String, String> getUser() {
		return user;
	}

	public void setUser(String champ, String message) {
		user.put(champ, message);;
	}
	
	public String getBonusk0() {
		return bonusk0;
	}

	public void setBonusk0(String bonusk0) {
		this.bonusk0 = bonusk0;
	}

	public String getBonusk1() {
		return bonusk1;
	}

	public void setBonusk1(String bonusk1) {
		this.bonusk1 = bonusk1;
	}

	public void setResultat(String resultat) {
		this.resultat = resultat;
	}

	public String getDat1() {
		return dat1;
	}

	public void setDat1(String dat1) {
		this.dat1 = dat1;
	}

	public ConfigForm(KenoDAO kenoDao,MisetDAO misetDao,UtilDAO utilDao,EffChoicekDAO effchoicekDao,MisekDAO misekDao,
			VersementDAO verstDao, PartnerDAO partnerDao, Misek_tempDAO misektpDao, CaissierDAO caissierDao, ConfigDAO configDao, SpinDAO spinDao, 
			AirtimeDAO airtimeDao, GameCycleDAO game_cycleDao){
		this.kenoDao = kenoDao;
		this.misetDao = misetDao;
		this.effchoicekDao = effchoicekDao;
		this.misekDao = misekDao;
		this.verstDao = verstDao;
		this.partnerDao = partnerDao;
		this.misektpDao = misektpDao;
		this.utilDao = utilDao;
		this.caissierDao = caissierDao;
		this.configDao = configDao;
		this.spinDao = spinDao;
		this.airtimeDao = airtimeDao;
		this.game_cycleDao = game_cycleDao;
		supergameAPI = SuperGameDAOAPI.getInstance();
	}
	
	public void manage_config(HttpServletRequest request){
		erreurs = new HashMap<String, String>();
		erreurs_u = new HashMap<String, String>();
		erreurs_b = new HashMap<String, String>();
		erreurs_c = new HashMap<String, String>();
		action = getName( request, "idconfig" );// definit l'action Ã  traiter. ajout partner, ajout caissier...
		
		if(action.equalsIgnoreCase("addpartner")){
			
			coderace = getName( request, FIELD_CODERACE );
			zone = getName( request, FIELD_ZONE );
			
			// recupere tous les partenaires
		    lpartner = partnerDao.getAllPartners();
		   
			
			if(StringUtils.isBlank(coderace)){
				return;
			}
			
			String[] spaceCoderace = coderace.trim().split(" ");
			
			if(coderace.length() < 5){
				
	  		  	setErreurs(FIELD_CODERACE, "Longueur du nom très court");
	  		  	resultat = "Nom très court, 5 caractères minimum";
	  		  	return;
	  		  	
			}
			else if(spaceCoderace.length > 1) {
				
				setErreurs_u(FIELD_LOGIN, "Pas d'espace dans le nom du partenaire");
				resultat = "Pas d'espace dans le nom du partenaire.";
		  		return;
		  		
			}
			
			 Partner partn = partnerDao.find(coderace);
			 
			 if(partn == null) {
				 
				 Partner part = new Partner();
				 part.setCoderace(coderace);
				 part.setZone(zone);
				 part.setGroupe(1);
				 part.setActif(1);
				 part.setCob("opened");
				 boolean isAdded = addNewPartenaire(part);
				 
				 if(isAdded) {
					 
					 PartnerDto pdto = new PartnerDto();
					 pdto.setCoderace(coderace);
					 pdto.setZone(zone);
					 ResPartner resp = supergameAPI.getSuperGameDAO().submitPartner(Params.url, pdto);
					 
				 }
				 
			 }
			
			
		
			//Partner partner = partnerDao.find(coderace);
			
			 PartnerDto pdto = new PartnerDto();
			 pdto.setCoderace(coderace);
			 pdto.setZone(zone);
			 ResPartner resp = supergameAPI.getSuperGameDAO().submitPartner(Params.url, pdto);
			 Partner p = resp.getPartner();
			 String respMess = resp.getMessage();

			 Partner part = new Partner();
			 part.setCoderace(coderace);
			 part.setZone(zone);
			 part.setGroupe(1);
			 part.setActif(1);
			 part.setCob("opened");

			 if ("EXISTS".equalsIgnoreCase(respMess)) {

				 Partner partner = partnerDao.find(coderace);

				 if (partner == null) {
					 addNewPartenaire(part);
				 }
				 else {
					 setErreurs(FIELD_CODERACE, "present");
					 resultat = "Partenaire/Salle deja présent.";
				 }

			 }
			 else if("NEW".equalsIgnoreCase(respMess)) {
				 addNewPartenaire(part);
			 }

		 } catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
			 // TODO Auto-generated catch block
			 e.printStackTrace();
		 }
		}
		else if(action.equalsIgnoreCase("addcaissier")){
			user = new HashMap<String, String>();
			
			String nom_user = getName(request, FIELD_NOM_CAISSIER);
			String login = getName(request, FIELD_LOGIN);
			String pass = getPass(request, FIELD_PASS);
			String profil = getName(request, FIELD_PROFIL);
			String partner = getName(request, FIELD_PARTNER);
			
			if(StringUtils.isBlank(login) || StringUtils.isBlank(pass) || StringUtils.isBlank(profil) || StringUtils.isBlank(partner)){
				return;
			}
			
			String[] spaceLogin = login.trim().split(" ");
			if(login.length() < 5){
	  		  setErreurs_u(FIELD_LOGIN, "Longueur du login très court");
	  		  resultat_u = "Login très court, 5 caractères minimum";
	  		  return;
			}
			else if(spaceLogin.length > 1) {
				setErreurs_u(FIELD_LOGIN, "Pas d'espace dans le login");
		  		resultat_u = "Pas d'espace dans le login.";
		  		return;
			}
			
			
			if(pass.length() < 6){
	  		  setErreurs_u(FIELD_PASS, "Longueur du mot de passe très court");
	  		  resultat_u = "pass très court, 5 caractÃ¨res minimum";
	  		  return;
			}
			
			ConfigurablePasswordEncryptor passwordEncryptor = new ConfigurablePasswordEncryptor();
			passwordEncryptor.setAlgorithm( Params.ALGO_CHIFFREMENT );
			passwordEncryptor.setPlainDigest( false );
			
			Caissier caissier = caissierDao.findByLogin(login);
			Long idpartner = partnerDao.find(partner).getIdpartner();
			Long idprofil = 2L;
			if(profil.equalsIgnoreCase("CAISSIER")){
				idprofil = 2L;
			}
			else if(profil.equalsIgnoreCase("ADMINISTRATEUR")){
				idprofil = 1L;
			}
			
			String passChiffre = passwordEncryptor.encryptPassword(pass);
			setUser("nomc", nom_user);
			setUser("loginc", login);
			setUser("passc", "******");
			
			if(caissier == null){
				
				int n = 0;
				Caissier cais = new Caissier();
				cais.setNomc(nom_user);
				cais.setLoginc(login);
				cais.setMdpc(passChiffre);
				cais.setPartner(partner);
				cais.setProfil(idprofil);
				cais.setGrpe(1);
				//System.out.println(cais);
				n = caissierDao.create(cais);
				
				try {
					
					if (n > 0) {
						// Utilisateur crée en local
						
						CaissierDto caisDto = new CaissierDto();
						caisDto.setNomc(nom_user);
						caisDto.setLoginc(login);
						caisDto.setMdpc(pass);
						caisDto.setPartner(partner);
						caisDto.setProfil(idprofil);
						caisDto.setGrpe(1);
						//System.out.println(caisDto);
						Caissier caisse = supergameAPI.getSuperGameDAO().saveUser(Params.url, caisDto, partner);
						if(caisse == null) {
							
							caissierDao.delete(cais);
							setErreurs_u(FIELD_LOGIN, "Echec lors de la creation");
							resultat_u = "Echec lors de la creation.";
							return;
						}
						
						resultat_u="Caissier crée avec succes";
						
					}
					
				} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
					e.printStackTrace();
					return;
				}
				
//				if(n > 0){	
//					Caissier user = caissierDao.findByLogin(login);
//					//creation de la ligne des mouvements
//					airtimeDao.createMvt(user.getIdCaissier(), 0);
//					resultat_u="Caissier crée avec succes";
//					return;
//				}
//				else{
//					setErreurs_u(FIELD_LOGIN, "Echec de creation");
//					resultat_u = "Echec de creation";
//					return;
//				}
				
				
			}
			else{
				setErreurs_u(FIELD_LOGIN, "present");
				resultat_u = "Login utilisé, veuillez entrer un autre";
			}
		}
		else if(action.equalsIgnoreCase("addbonus")){
			bonusk0 = getName(request, FIELD_BONUSK0);
			bonusk1 = getName(request, FIELD_BONUSK1);
			String jeu = getName(request, FIELD_JEU);
			//System.out.println("BONUSMIN: "+bonusk0+" BONUSMAX: "+bonusk1+" | "+jeu);
			coderace = getName( request, FIELD_KCODERACE );
			String bonusk_rate = getName(request,  FIELD_BONUSK_RATE);
			//System.out.println("coderace: "+coderace+" | "+bonusk_rate);
			Long idpartner = partnerDao.find(coderace).getIdpartner();
			resultat_b = "";
			erreurs_b.clear();
			if(jeu == null || jeu.equalsIgnoreCase("")){
				setErreurs_b(FIELD_JEU, "Mauvais jeu");
				resultat_b = "Veuillez selectionner un type de jeu";
				return;
			}
			
			if(jeu.equalsIgnoreCase("keno")){
				if(coderace == null || coderace.equalsIgnoreCase("")){
					setErreurs_b(FIELD_KCODERACE, "Mauvais partenaire");
					resultat_b = "Veuillez selectionner un partenaire";
					return;
				}
				if(jeu == null || jeu.equalsIgnoreCase("")){
					setErreurs_b(FIELD_JEU, "Mauvais jeu");
					resultat_b = "Veuillez selectionner un type de jeu";
					return;
				}
				if(bonusk0 != null && !bonusk0.equalsIgnoreCase("")){
					mbonusk0 = Double.parseDouble(bonusk0);
				}
				else{
					setErreurs_b(FIELD_BONUSK0, "Mauvais montant min");
					resultat_b = "Veuillez saisir un montant min valide";
					return;
				}
				if(bonusk1 != null && !bonusk1.equalsIgnoreCase("")){
					mbonusk1 = Double.parseDouble(bonusk1);
				}
				else{
					setErreurs_b(FIELD_BONUSK1, "Mauvais montant max");
					resultat_b = "Veuillez saisir un montant max valide";
					return;
				}
				if(mbonusk0 > mbonusk1){
					setErreurs_b(FIELD_BONUSK1, "Mauvais montant");
					resultat_b = "Bonus Min supérieur à Bonus Max";
					return;
				}
				if(bonusk_rate == null || bonusk_rate.equalsIgnoreCase("")){
					bonusk_rate = "2";
					//return;
				}
				double k_rate = Double.parseDouble(bonusk_rate)/100;
				
				try {
					//ajout = configDao.updateBonusK(k_rate, mbonusk0, mbonusk1, coderace );
					ajout = supergameAPI.getSuperGameDAO().updateBonusK(Params.url, k_rate, mbonusk0, mbonusk1, coderace);
					if(ajout != 0){
						erreurs.clear();
						resultat_b = "Mise à jour du bonus effectué avec succès";
					}
					else{
						setErreurs_b("Update", "Echec de la mise à jour");
						resultat_b = "Echec de la mise à jour";
						return;
					}
				} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
				
			}
			else if(jeu.equalsIgnoreCase("spin")){
				
			}
			else if(jeu.equalsIgnoreCase("dog")){
				
			}
		}
		else if(action.equalsIgnoreCase("addcagnotte")){
			
			String detail_lot = "";
			CagnotteDto cagnotte = new CagnotteDto();
			
			dat1 = getName(request, FIELD_DATE1);
			String partner = getName(request, "ncbonus_part2");
			String lot = getName(request, "ncbonus_part");
			String heur = getName(request, "cg_heure");
			
			if(lot == null) {
				setErreurs_c("Update", "Veuillez choisir un lot");
				resultat_c = "Veuillez choisir un lot";
				return;
			}
			if(dat1 == null) {
				setErreurs_c("Update", "Veuillez choisir le jour de tombée");
				resultat_c = "Veuillez choisir le jour de tombée";
				return;
			}
			
			System.out.println("Lot: "+lot+" Date: "+dat1+":"+heur+" partner: "+partner);
			if(lot.equalsIgnoreCase("1")) {
				detail_lot = "tel";
			}
			else if(lot.equalsIgnoreCase("2")) {
				detail_lot = "woofer";
			}
			else if(lot.equalsIgnoreCase("3")) {
				detail_lot = "tricot";
			}
			else if(lot.equalsIgnoreCase("4")) {
				detail_lot = "conso";
			}
			else if(lot.equalsIgnoreCase("5")) {
				detail_lot = "ecran";
			}
			else if(lot.equalsIgnoreCase("6")) {
				detail_lot = "cash";
			}
			
			cagnotte.setLot(detail_lot);
			cagnotte.setHeur(dat1 + " " + heur);
			cagnotte.setJeu("");
			
			
			try {
				cagnotte = supergameAPI.getSuperGameDAO().saveJackpot(Params.url, cagnotte, partner);
				resultat_c = "Cagnotte mis à  jour";
			} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
				setErreurs_c("Update", "Erreur de creation cagnotte");
				resultat = "Erreur de creation cagnotte";
				return;
			}
			
		}
		
		
	}
	
	private String getName( HttpServletRequest request,String nomChamp ) {
        String valeur = request.getParameter( nomChamp );
       
       if ( valeur == null || valeur.trim().length() == 0) {
           return null;
       } else{
    
    	  return valeur.trim(); 
       }
       
	}
	
	private String getPass( HttpServletRequest request,String nomChamp ) {
        String valeur = request.getParameter( nomChamp );
       
       if ( valeur == null || valeur.trim().length() == 0) {
           return null;
       } else{
    	  return valeur.trim(); 
       }
       
	}
	
	private String getValRadio(HttpServletRequest request, String nomChamp){
		String valeur = request.getParameter(nomChamp);
		return valeur;
	}
	
	private boolean addNewPartenaire(Partner part) {
		
		int nb_race;
		Long n = 0L;
		n = partnerDao.create(part);
		
		if(n > 0){	
			
			//ajout d'une de configuration
			Config conf = new Config();
			conf.setCoderace(coderace);
			configDao.create(conf);
			
			//ajout d'un tirage par defaut
			Keno ken = new Keno();
			ken.setDrawnumK("1");
			ken.setMultiplicateur("0");
			ken.setDrawnumbK("'1-2-3-4-5-6-7-8-9-10-11-12-13-14-15-16-17-18-19-20'");
			ken.setCoderace(coderace);
			ken.setHeureTirage("01/01/2020-00:00:00");
			nb_race = kenoDao.create(ken);
			
			//misetDao.createFree(n);
			
			if(nb_race > 0){
				resultat = "Partenaire enregistré avec succes";
			}
			else{
				setErreurs(FIELD_CODERACE, "Echec de creation");
				resultat = "Echec de creation";
				return Boolean.FALSE;
			}
			
			for (Partner pp : lpartner) {
				pp.setActif(0);
				pp.setCob("closed");
				partnerDao.update(pp);
			}
		}
		else {
			setErreurs(FIELD_CODERACE, "Echec de creation");
			resultat = "Echec de creation";
			return Boolean.FALSE;
		}
		
		return Boolean.TRUE;
	}		
}

----------------------------------- SOURCE END -------------------------------------
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:344)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1272)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:868)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider$1.run(CoreASTProvider.java:294)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.createAST(CoreASTProvider.java:286)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.getAST(CoreASTProvider.java:199)
	at org.eclipse.jdt.core.manipulation.SharedASTProviderCore.getAST(SharedASTProviderCore.java:138)
	at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup.calculateASTandInform(SelectionListenerWithASTManager.java:166)
	at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup$1.run(SelectionListenerWithASTManager.java:151)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:63)

!ENTRY org.eclipse.jdt.core.manipulation 4 2 2023-07-23 23:37:27.947
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.jdt.core.manipulation".
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:344)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1272)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:868)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider$1.run(CoreASTProvider.java:294)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.createAST(CoreASTProvider.java:286)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.getAST(CoreASTProvider.java:199)
	at org.eclipse.jdt.core.manipulation.SharedASTProviderCore.getAST(SharedASTProviderCore.java:138)
	at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup.calculateASTandInform(SelectionListenerWithASTManager.java:166)
	at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup$1.run(SelectionListenerWithASTManager.java:151)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:63)

!ENTRY org.eclipse.jdt.core.manipulation 4 0 2023-07-23 23:37:27.948
!MESSAGE Error in JDT Core during AST creation
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:344)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1272)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:868)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider$1.run(CoreASTProvider.java:294)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.createAST(CoreASTProvider.java:286)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.getAST(CoreASTProvider.java:199)
	at org.eclipse.jdt.core.manipulation.SharedASTProviderCore.getAST(SharedASTProviderCore.java:138)
	at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup.calculateASTandInform(SelectionListenerWithASTManager.java:166)
	at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup$1.run(SelectionListenerWithASTManager.java:151)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:63)

!ENTRY org.eclipse.jdt.core 4 4 2023-07-23 23:37:29.838
!MESSAGE Exception occurred during compilation unit conversion:
----------------------------------- SOURCE BEGIN -------------------------------------
package business;

import java.io.IOException;
import java.net.URISyntaxException;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.servlet.http.HttpServletRequest;

import org.apache.commons.lang3.StringUtils;
import org.codehaus.jettison.json.JSONException;
import org.jasypt.util.password.ConfigurablePasswordEncryptor;

import config.Params;
import modele.CagnotteDto;
import modele.Caissier;
import modele.CaissierDto;
import modele.Config;
import modele.Keno;
import modele.Partner;
import modele.PartnerDto;
import modele.ResPartner;
import superbetDAO.AirtimeDAO;
import superbetDAO.CagnotteDAO;
import superbetDAO.CaissierDAO;
import superbetDAO.ConfigDAO;
import superbetDAO.EffChoicekDAO;
import superbetDAO.GameCycleDAO;
import superbetDAO.KenoDAO;
import superbetDAO.MisekDAO;
import superbetDAO.Misek_tempDAO;
import superbetDAO.MisetDAO;
import superbetDAO.PartnerDAO;
import superbetDAO.SpinDAO;
import superbetDAO.UtilDAO;
import superbetDAO.VersementDAO;
import superbetDAO.api.exeception.DAOAPIException;
import superbetDAO.api.implementations.SuperGameDAOAPI;
import superbetDAO.api.interfaces.ISuperGameDAOAPILocal;

public final class ConfigForm {
	
	private static final String FIELD_CODERACE = "ncpartner";
	private static final String FIELD_ZONE = "nczone";
	
	private static final String FIELD_NOM_CAISSIER = "ncuser";
	private static final String FIELD_LOGIN = "nclogin";
	private static final String FIELD_PASS = "ncpass";
	private static final String FIELD_PROFIL = "ncprofil";
	private static final String FIELD_PARTNER = "ncsalle_cais";
	private static final String FIELD_JEU = "ncbonus_jeu";
	
	private static final String FIELD_BONUSK0 = "bonu_sum_min";
	private static final String FIELD_BONUSK1 = "bonu_sum_max";
	private static final String FIELD_BONUSK_RATE = "ncbonus_rate";
	private static final String FIELD_BONUSK_RESERVE = "ncbonus_reserve";
	private static final String FIELD_KCODERACE = "ncbonus_part1";
	private static final String FIELD_DATE1 = "cgddebut";
	private  ISuperGameDAOAPILocal  supergameAPI;
	
	private  String resultat = null;
	private  String resultat_u = null;
	private  String resultat_b = null;
	private  String resultat_c = null;
	private  Map<String, String> erreurs;
	private  Map<String, String> erreurs_u;
	private  Map<String, String> erreurs_b;
	private  Map<String, String> erreurs_c;
	private String action="";
	private String coderace="", dat1;
	private String zone="";
	
	private String bonusk0;
	private String bonusk1;
    private double mbonusk0;
    private double mbonusk1;
    private int ajout = 0;
   
	
	private  Map<String, String> user;
	private List<Partner> lpartner;
	
	private KenoDAO kenoDao;
	private MisetDAO misetDao;
	private EffChoicekDAO effchoicekDao;
	private MisekDAO misekDao;
	private VersementDAO verstDao;
	private PartnerDAO partnerDao;
	private Misek_tempDAO misektpDao;
	private UtilDAO utilDao;
	private CaissierDAO caissierDao;
	private ConfigDAO configDao;
	private SpinDAO spinDao;
	private AirtimeDAO airtimeDao;
	private GameCycleDAO game_cycleDao;
	private CagnotteDAO cagnotteDao;
	
	
	public String getResultat() {
		return resultat;
	}
	
	public Map<String, String> getErreurs_u() {
		return erreurs_u;
	}

	public void setErreurs_u(String champ, String message) {
		erreurs_u.put(champ, message);
	}

	public Map<String, String> getErreurs_b() {
		return erreurs_b;
	}

	public void setErreurs_b(String champ, String message) {
		erreurs_b.put(champ, message);
	}

	public Map<String, String> getErreurs_c() {
		return erreurs_c;
	}

	public void setErreurs_c(String champ, String message) {
		erreurs_c.put(champ, message);
	}
	
	public String getResultat_u() {
		return resultat_u;
	}

	public String getResultat_b() {
		return resultat_b;
	}

	public String getResultat_c() {
		return resultat_c;
	}
	public String getAction() {
		return action;
	}
	
	public String getCoderace() {
		return coderace;
	}
	
	public String getZone() {
		return zone;
	}
	
	public Map<String, String> getErreurs() {
		return erreurs;
	}
	public void setErreurs(String champ, String message) {
		erreurs.put(champ, message);
	}
	
	
	
	public Map<String, String> getUser() {
		return user;
	}

	public void setUser(String champ, String message) {
		user.put(champ, message);;
	}
	
	public String getBonusk0() {
		return bonusk0;
	}

	public void setBonusk0(String bonusk0) {
		this.bonusk0 = bonusk0;
	}

	public String getBonusk1() {
		return bonusk1;
	}

	public void setBonusk1(String bonusk1) {
		this.bonusk1 = bonusk1;
	}

	public void setResultat(String resultat) {
		this.resultat = resultat;
	}

	public String getDat1() {
		return dat1;
	}

	public void setDat1(String dat1) {
		this.dat1 = dat1;
	}

	public ConfigForm(KenoDAO kenoDao,MisetDAO misetDao,UtilDAO utilDao,EffChoicekDAO effchoicekDao,MisekDAO misekDao,
			VersementDAO verstDao, PartnerDAO partnerDao, Misek_tempDAO misektpDao, CaissierDAO caissierDao, ConfigDAO configDao, SpinDAO spinDao, 
			AirtimeDAO airtimeDao, GameCycleDAO game_cycleDao){
		this.kenoDao = kenoDao;
		this.misetDao = misetDao;
		this.effchoicekDao = effchoicekDao;
		this.misekDao = misekDao;
		this.verstDao = verstDao;
		this.partnerDao = partnerDao;
		this.misektpDao = misektpDao;
		this.utilDao = utilDao;
		this.caissierDao = caissierDao;
		this.configDao = configDao;
		this.spinDao = spinDao;
		this.airtimeDao = airtimeDao;
		this.game_cycleDao = game_cycleDao;
		supergameAPI = SuperGameDAOAPI.getInstance();
	}
	
	public void manage_config(HttpServletRequest request){
		erreurs = new HashMap<String, String>();
		erreurs_u = new HashMap<String, String>();
		erreurs_b = new HashMap<String, String>();
		erreurs_c = new HashMap<String, String>();
		action = getName( request, "idconfig" );// definit l'action Ã  traiter. ajout partner, ajout caissier...
		
		if(action.equalsIgnoreCase("addpartner")){
			
			coderace = getName( request, FIELD_CODERACE );
			zone = getName( request, FIELD_ZONE );
			
			// recupere tous les partenaires
		    lpartner = partnerDao.getAllPartners();
		   
			
			if(StringUtils.isBlank(coderace)){
				return;
			}
			
			String[] spaceCoderace = coderace.trim().split(" ");
			
			if(coderace.length() < 5){
				
	  		  	setErreurs(FIELD_CODERACE, "Longueur du nom très court");
	  		  	resultat = "Nom très court, 5 caractères minimum";
	  		  	return;
	  		  	
			}
			else if(spaceCoderace.length > 1) {
				
				setErreurs_u(FIELD_LOGIN, "Pas d'espace dans le nom du partenaire");
				resultat = "Pas d'espace dans le nom du partenaire.";
		  		return;
		  		
			}
			
			 Partner partn = partnerDao.find(coderace);
			 
			 if(partn == null) {
				 
				 Partner part = new Partner();
				 part.setCoderace(coderace);
				 part.setZone(zone);
				 part.setGroupe(1);
				 part.setActif(1);
				 part.setCob("opened");
				 boolean isAdded = addNewPartenaire(part);
				 
				 if(isAdded) {
					 
					 PartnerDto pdto = new PartnerDto();
					 pdto.setCoderace(coderace);
					 pdto.setZone(zone);
					 ResPartner resp = supergameAPI.getSuperGameDAO().submitPartner(Params.url, pdto);
					 
				 }
				 
			 }
			
			
		
			//Partner partner = partnerDao.find(coderace);
			
			 PartnerDto pdto = new PartnerDto();
			 pdto.setCoderace(coderace);
			 pdto.setZone(zone);
			 ResPartner resp = supergameAPI.getSuperGameDAO().submitPartner(Params.url, pdto);
			 Partner p = resp.getPartner();
			 String respMess = resp.getMessage();

			 Partner part = new Partner();
			 part.setCoderace(coderace);
			 part.setZone(zone);
			 part.setGroupe(1);
			 part.setActif(1);
			 part.setCob("opened");

			 if ("EXISTS".equalsIgnoreCase(respMess)) {

				 Partner partner = partnerDao.find(coderace);

				 if (partner == null) {
					 addNewPartenaire(part);
				 }
				 else {
					 setErreurs(FIELD_CODERACE, "present");
					 resultat = "Partenaire/Salle deja présent.";
				 }

			 }
			 else if("NEW".equalsIgnoreCase(respMess)) {
				 addNewPartenaire(part);
			 }

		 } catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
			 // TODO Auto-generated catch block
			 e.printStackTrace();
		 }
		}
		else if(action.equalsIgnoreCase("addcaissier")){
			user = new HashMap<String, String>();
			
			String nom_user = getName(request, FIELD_NOM_CAISSIER);
			String login = getName(request, FIELD_LOGIN);
			String pass = getPass(request, FIELD_PASS);
			String profil = getName(request, FIELD_PROFIL);
			String partner = getName(request, FIELD_PARTNER);
			
			if(StringUtils.isBlank(login) || StringUtils.isBlank(pass) || StringUtils.isBlank(profil) || StringUtils.isBlank(partner)){
				return;
			}
			
			String[] spaceLogin = login.trim().split(" ");
			if(login.length() < 5){
	  		  setErreurs_u(FIELD_LOGIN, "Longueur du login très court");
	  		  resultat_u = "Login très court, 5 caractères minimum";
	  		  return;
			}
			else if(spaceLogin.length > 1) {
				setErreurs_u(FIELD_LOGIN, "Pas d'espace dans le login");
		  		resultat_u = "Pas d'espace dans le login.";
		  		return;
			}
			
			
			if(pass.length() < 6){
	  		  setErreurs_u(FIELD_PASS, "Longueur du mot de passe très court");
	  		  resultat_u = "pass très court, 5 caractÃ¨res minimum";
	  		  return;
			}
			
			ConfigurablePasswordEncryptor passwordEncryptor = new ConfigurablePasswordEncryptor();
			passwordEncryptor.setAlgorithm( Params.ALGO_CHIFFREMENT );
			passwordEncryptor.setPlainDigest( false );
			
			Caissier caissier = caissierDao.findByLogin(login);
			Long idpartner = partnerDao.find(partner).getIdpartner();
			Long idprofil = 2L;
			if(profil.equalsIgnoreCase("CAISSIER")){
				idprofil = 2L;
			}
			else if(profil.equalsIgnoreCase("ADMINISTRATEUR")){
				idprofil = 1L;
			}
			
			String passChiffre = passwordEncryptor.encryptPassword(pass);
			setUser("nomc", nom_user);
			setUser("loginc", login);
			setUser("passc", "******");
			
			if(caissier == null){
				
				int n = 0;
				Caissier cais = new Caissier();
				cais.setNomc(nom_user);
				cais.setLoginc(login);
				cais.setMdpc(passChiffre);
				cais.setPartner(partner);
				cais.setProfil(idprofil);
				cais.setGrpe(1);
				//System.out.println(cais);
				n = caissierDao.create(cais);
				
				try {
					
					if (n > 0) {
						// Utilisateur crée en local
						
						CaissierDto caisDto = new CaissierDto();
						caisDto.setNomc(nom_user);
						caisDto.setLoginc(login);
						caisDto.setMdpc(pass);
						caisDto.setPartner(partner);
						caisDto.setProfil(idprofil);
						caisDto.setGrpe(1);
						//System.out.println(caisDto);
						Caissier caisse = supergameAPI.getSuperGameDAO().saveUser(Params.url, caisDto, partner);
						if(caisse == null) {
							
							caissierDao.delete(cais);
							setErreurs_u(FIELD_LOGIN, "Echec lors de la creation");
							resultat_u = "Echec lors de la creation.";
							return;
						}
						
						resultat_u="Caissier crée avec succes";
						
					}
					
				} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
					e.printStackTrace();
					return;
				}
				
//				if(n > 0){	
//					Caissier user = caissierDao.findByLogin(login);
//					//creation de la ligne des mouvements
//					airtimeDao.createMvt(user.getIdCaissier(), 0);
//					resultat_u="Caissier crée avec succes";
//					return;
//				}
//				else{
//					setErreurs_u(FIELD_LOGIN, "Echec de creation");
//					resultat_u = "Echec de creation";
//					return;
//				}
				
				
			}
			else{
				setErreurs_u(FIELD_LOGIN, "present");
				resultat_u = "Login utilisé, veuillez entrer un autre";
			}
		}
		else if(action.equalsIgnoreCase("addbonus")){
			bonusk0 = getName(request, FIELD_BONUSK0);
			bonusk1 = getName(request, FIELD_BONUSK1);
			String jeu = getName(request, FIELD_JEU);
			//System.out.println("BONUSMIN: "+bonusk0+" BONUSMAX: "+bonusk1+" | "+jeu);
			coderace = getName( request, FIELD_KCODERACE );
			String bonusk_rate = getName(request,  FIELD_BONUSK_RATE);
			//System.out.println("coderace: "+coderace+" | "+bonusk_rate);
			Long idpartner = partnerDao.find(coderace).getIdpartner();
			resultat_b = "";
			erreurs_b.clear();
			if(jeu == null || jeu.equalsIgnoreCase("")){
				setErreurs_b(FIELD_JEU, "Mauvais jeu");
				resultat_b = "Veuillez selectionner un type de jeu";
				return;
			}
			
			if(jeu.equalsIgnoreCase("keno")){
				if(coderace == null || coderace.equalsIgnoreCase("")){
					setErreurs_b(FIELD_KCODERACE, "Mauvais partenaire");
					resultat_b = "Veuillez selectionner un partenaire";
					return;
				}
				if(jeu == null || jeu.equalsIgnoreCase("")){
					setErreurs_b(FIELD_JEU, "Mauvais jeu");
					resultat_b = "Veuillez selectionner un type de jeu";
					return;
				}
				if(bonusk0 != null && !bonusk0.equalsIgnoreCase("")){
					mbonusk0 = Double.parseDouble(bonusk0);
				}
				else{
					setErreurs_b(FIELD_BONUSK0, "Mauvais montant min");
					resultat_b = "Veuillez saisir un montant min valide";
					return;
				}
				if(bonusk1 != null && !bonusk1.equalsIgnoreCase("")){
					mbonusk1 = Double.parseDouble(bonusk1);
				}
				else{
					setErreurs_b(FIELD_BONUSK1, "Mauvais montant max");
					resultat_b = "Veuillez saisir un montant max valide";
					return;
				}
				if(mbonusk0 > mbonusk1){
					setErreurs_b(FIELD_BONUSK1, "Mauvais montant");
					resultat_b = "Bonus Min supérieur à Bonus Max";
					return;
				}
				if(bonusk_rate == null || bonusk_rate.equalsIgnoreCase("")){
					bonusk_rate = "2";
					//return;
				}
				double k_rate = Double.parseDouble(bonusk_rate)/100;
				
				try {
					//ajout = configDao.updateBonusK(k_rate, mbonusk0, mbonusk1, coderace );
					ajout = supergameAPI.getSuperGameDAO().updateBonusK(Params.url, k_rate, mbonusk0, mbonusk1, coderace);
					if(ajout != 0){
						erreurs.clear();
						resultat_b = "Mise à jour du bonus effectué avec succès";
					}
					else{
						setErreurs_b("Update", "Echec de la mise à jour");
						resultat_b = "Echec de la mise à jour";
						return;
					}
				} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
				
			}
			else if(jeu.equalsIgnoreCase("spin")){
				
			}
			else if(jeu.equalsIgnoreCase("dog")){
				
			}
		}
		else if(action.equalsIgnoreCase("addcagnotte")){
			
			String detail_lot = "";
			CagnotteDto cagnotte = new CagnotteDto();
			
			dat1 = getName(request, FIELD_DATE1);
			String partner = getName(request, "ncbonus_part2");
			String lot = getName(request, "ncbonus_part");
			String heur = getName(request, "cg_heure");
			
			if(lot == null) {
				setErreurs_c("Update", "Veuillez choisir un lot");
				resultat_c = "Veuillez choisir un lot";
				return;
			}
			if(dat1 == null) {
				setErreurs_c("Update", "Veuillez choisir le jour de tombée");
				resultat_c = "Veuillez choisir le jour de tombée";
				return;
			}
			
			System.out.println("Lot: "+lot+" Date: "+dat1+":"+heur+" partner: "+partner);
			if(lot.equalsIgnoreCase("1")) {
				detail_lot = "tel";
			}
			else if(lot.equalsIgnoreCase("2")) {
				detail_lot = "woofer";
			}
			else if(lot.equalsIgnoreCase("3")) {
				detail_lot = "tricot";
			}
			else if(lot.equalsIgnoreCase("4")) {
				detail_lot = "conso";
			}
			else if(lot.equalsIgnoreCase("5")) {
				detail_lot = "ecran";
			}
			else if(lot.equalsIgnoreCase("6")) {
				detail_lot = "cash";
			}
			
			cagnotte.setLot(detail_lot);
			cagnotte.setHeur(dat1 + " " + heur);
			cagnotte.setJeu("");
			
			
			try {
				cagnotte = supergameAPI.getSuperGameDAO().saveJackpot(Params.url, cagnotte, partner);
				resultat_c = "Cagnotte mis à  jour";
			} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
				setErreurs_c("Update", "Erreur de creation cagnotte");
				resultat = "Erreur de creation cagnotte";
				return;
			}
			
		}
		
		
	}
	
	private String getName( HttpServletRequest request,String nomChamp ) {
        String valeur = request.getParameter( nomChamp );
       
       if ( valeur == null || valeur.trim().length() == 0) {
           return null;
       } else{
    
    	  return valeur.trim(); 
       }
       
	}
	
	private String getPass( HttpServletRequest request,String nomChamp ) {
        String valeur = request.getParameter( nomChamp );
       
       if ( valeur == null || valeur.trim().length() == 0) {
           return null;
       } else{
    	  return valeur.trim(); 
       }
       
	}
	
	private String getValRadio(HttpServletRequest request, String nomChamp){
		String valeur = request.getParameter(nomChamp);
		return valeur;
	}
	
	private boolean addNewPartenaire(Partner part) {
		
		int nb_race;
		Long n = 0L;
		n = partnerDao.create(part);
		
		if(n > 0){	
			
			//ajout d'une de configuration
			Config conf = new Config();
			conf.setCoderace(coderace);
			configDao.create(conf);
			
			//ajout d'un tirage par defaut
			Keno ken = new Keno();
			ken.setDrawnumK("1");
			ken.setMultiplicateur("0");
			ken.setDrawnumbK("'1-2-3-4-5-6-7-8-9-10-11-12-13-14-15-16-17-18-19-20'");
			ken.setCoderace(coderace);
			ken.setHeureTirage("01/01/2020-00:00:00");
			nb_race = kenoDao.create(ken);
			
			//misetDao.createFree(n);
			
			if(nb_race > 0){
				resultat = "Partenaire enregistré avec succes";
			}
			else{
				setErreurs(FIELD_CODERACE, "Echec de creation");
				resultat = "Echec de creation";
				return Boolean.FALSE;
			}
			
			for (Partner pp : lpartner) {
				pp.setActif(0);
				pp.setCob("closed");
				partnerDao.update(pp);
			}
		}
		else {
			setErreurs(FIELD_CODERACE, "Echec de creation");
			resultat = "Echec de creation";
			return Boolean.FALSE;
		}
		
		return Boolean.TRUE;
	}		
}

----------------------------------- SOURCE END -------------------------------------
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:344)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1272)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:868)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider$1.run(CoreASTProvider.java:294)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.createAST(CoreASTProvider.java:286)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.getAST(CoreASTProvider.java:199)
	at org.eclipse.jdt.core.manipulation.SharedASTProviderCore.getAST(SharedASTProviderCore.java:138)
	at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup.calculateASTandInform(SelectionListenerWithASTManager.java:166)
	at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup$1.run(SelectionListenerWithASTManager.java:151)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:63)

!ENTRY org.eclipse.jdt.core.manipulation 4 2 2023-07-23 23:37:29.838
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.jdt.core.manipulation".
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:344)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1272)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:868)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider$1.run(CoreASTProvider.java:294)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.createAST(CoreASTProvider.java:286)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.getAST(CoreASTProvider.java:199)
	at org.eclipse.jdt.core.manipulation.SharedASTProviderCore.getAST(SharedASTProviderCore.java:138)
	at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup.calculateASTandInform(SelectionListenerWithASTManager.java:166)
	at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup$1.run(SelectionListenerWithASTManager.java:151)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:63)

!ENTRY org.eclipse.jdt.core.manipulation 4 0 2023-07-23 23:37:29.839
!MESSAGE Error in JDT Core during AST creation
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:344)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1272)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:868)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider$1.run(CoreASTProvider.java:294)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.createAST(CoreASTProvider.java:286)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.getAST(CoreASTProvider.java:199)
	at org.eclipse.jdt.core.manipulation.SharedASTProviderCore.getAST(SharedASTProviderCore.java:138)
	at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup.calculateASTandInform(SelectionListenerWithASTManager.java:166)
	at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup$1.run(SelectionListenerWithASTManager.java:151)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:63)

!ENTRY org.eclipse.jdt.core 4 4 2023-07-23 23:37:32.477
!MESSAGE Exception occurred during compilation unit conversion:
----------------------------------- SOURCE BEGIN -------------------------------------
package business;

import java.io.IOException;
import java.net.URISyntaxException;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.servlet.http.HttpServletRequest;

import org.apache.commons.lang3.StringUtils;
import org.codehaus.jettison.json.JSONException;
import org.jasypt.util.password.ConfigurablePasswordEncryptor;

import config.Params;
import modele.CagnotteDto;
import modele.Caissier;
import modele.CaissierDto;
import modele.Config;
import modele.Keno;
import modele.Partner;
import modele.PartnerDto;
import modele.ResPartner;
import superbetDAO.AirtimeDAO;
import superbetDAO.CagnotteDAO;
import superbetDAO.CaissierDAO;
import superbetDAO.ConfigDAO;
import superbetDAO.EffChoicekDAO;
import superbetDAO.GameCycleDAO;
import superbetDAO.KenoDAO;
import superbetDAO.MisekDAO;
import superbetDAO.Misek_tempDAO;
import superbetDAO.MisetDAO;
import superbetDAO.PartnerDAO;
import superbetDAO.SpinDAO;
import superbetDAO.UtilDAO;
import superbetDAO.VersementDAO;
import superbetDAO.api.exeception.DAOAPIException;
import superbetDAO.api.implementations.SuperGameDAOAPI;
import superbetDAO.api.interfaces.ISuperGameDAOAPILocal;

public final class ConfigForm {
	
	private static final String FIELD_CODERACE = "ncpartner";
	private static final String FIELD_ZONE = "nczone";
	
	private static final String FIELD_NOM_CAISSIER = "ncuser";
	private static final String FIELD_LOGIN = "nclogin";
	private static final String FIELD_PASS = "ncpass";
	private static final String FIELD_PROFIL = "ncprofil";
	private static final String FIELD_PARTNER = "ncsalle_cais";
	private static final String FIELD_JEU = "ncbonus_jeu";
	
	private static final String FIELD_BONUSK0 = "bonu_sum_min";
	private static final String FIELD_BONUSK1 = "bonu_sum_max";
	private static final String FIELD_BONUSK_RATE = "ncbonus_rate";
	private static final String FIELD_BONUSK_RESERVE = "ncbonus_reserve";
	private static final String FIELD_KCODERACE = "ncbonus_part1";
	private static final String FIELD_DATE1 = "cgddebut";
	private  ISuperGameDAOAPILocal  supergameAPI;
	
	private  String resultat = null;
	private  String resultat_u = null;
	private  String resultat_b = null;
	private  String resultat_c = null;
	private  Map<String, String> erreurs;
	private  Map<String, String> erreurs_u;
	private  Map<String, String> erreurs_b;
	private  Map<String, String> erreurs_c;
	private String action="";
	private String coderace="", dat1;
	private String zone="";
	
	private String bonusk0;
	private String bonusk1;
    private double mbonusk0;
    private double mbonusk1;
    private int ajout = 0;
   
	
	private  Map<String, String> user;
	private List<Partner> lpartner;
	
	private KenoDAO kenoDao;
	private MisetDAO misetDao;
	private EffChoicekDAO effchoicekDao;
	private MisekDAO misekDao;
	private VersementDAO verstDao;
	private PartnerDAO partnerDao;
	private Misek_tempDAO misektpDao;
	private UtilDAO utilDao;
	private CaissierDAO caissierDao;
	private ConfigDAO configDao;
	private SpinDAO spinDao;
	private AirtimeDAO airtimeDao;
	private GameCycleDAO game_cycleDao;
	private CagnotteDAO cagnotteDao;
	
	
	public String getResultat() {
		return resultat;
	}
	
	public Map<String, String> getErreurs_u() {
		return erreurs_u;
	}

	public void setErreurs_u(String champ, String message) {
		erreurs_u.put(champ, message);
	}

	public Map<String, String> getErreurs_b() {
		return erreurs_b;
	}

	public void setErreurs_b(String champ, String message) {
		erreurs_b.put(champ, message);
	}

	public Map<String, String> getErreurs_c() {
		return erreurs_c;
	}

	public void setErreurs_c(String champ, String message) {
		erreurs_c.put(champ, message);
	}
	
	public String getResultat_u() {
		return resultat_u;
	}

	public String getResultat_b() {
		return resultat_b;
	}

	public String getResultat_c() {
		return resultat_c;
	}
	public String getAction() {
		return action;
	}
	
	public String getCoderace() {
		return coderace;
	}
	
	public String getZone() {
		return zone;
	}
	
	public Map<String, String> getErreurs() {
		return erreurs;
	}
	public void setErreurs(String champ, String message) {
		erreurs.put(champ, message);
	}
	
	
	
	public Map<String, String> getUser() {
		return user;
	}

	public void setUser(String champ, String message) {
		user.put(champ, message);;
	}
	
	public String getBonusk0() {
		return bonusk0;
	}

	public void setBonusk0(String bonusk0) {
		this.bonusk0 = bonusk0;
	}

	public String getBonusk1() {
		return bonusk1;
	}

	public void setBonusk1(String bonusk1) {
		this.bonusk1 = bonusk1;
	}

	public void setResultat(String resultat) {
		this.resultat = resultat;
	}

	public String getDat1() {
		return dat1;
	}

	public void setDat1(String dat1) {
		this.dat1 = dat1;
	}

	public ConfigForm(KenoDAO kenoDao,MisetDAO misetDao,UtilDAO utilDao,EffChoicekDAO effchoicekDao,MisekDAO misekDao,
			VersementDAO verstDao, PartnerDAO partnerDao, Misek_tempDAO misektpDao, CaissierDAO caissierDao, ConfigDAO configDao, SpinDAO spinDao, 
			AirtimeDAO airtimeDao, GameCycleDAO game_cycleDao){
		this.kenoDao = kenoDao;
		this.misetDao = misetDao;
		this.effchoicekDao = effchoicekDao;
		this.misekDao = misekDao;
		this.verstDao = verstDao;
		this.partnerDao = partnerDao;
		this.misektpDao = misektpDao;
		this.utilDao = utilDao;
		this.caissierDao = caissierDao;
		this.configDao = configDao;
		this.spinDao = spinDao;
		this.airtimeDao = airtimeDao;
		this.game_cycleDao = game_cycleDao;
		supergameAPI = SuperGameDAOAPI.getInstance();
	}
	
	public void manage_config(HttpServletRequest request){
		erreurs = new HashMap<String, String>();
		erreurs_u = new HashMap<String, String>();
		erreurs_b = new HashMap<String, String>();
		erreurs_c = new HashMap<String, String>();
		action = getName( request, "idconfig" );// definit l'action Ã  traiter. ajout partner, ajout caissier...
		
		if(action.equalsIgnoreCase("addpartner")){
			
			coderace = getName( request, FIELD_CODERACE );
			zone = getName( request, FIELD_ZONE );
			
			// recupere tous les partenaires
		    lpartner = partnerDao.getAllPartners();
		   
			
			if(StringUtils.isBlank(coderace)){
				return;
			}
			
			String[] spaceCoderace = coderace.trim().split(" ");
			
			if(coderace.length() < 5){
				
	  		  	setErreurs(FIELD_CODERACE, "Longueur du nom très court");
	  		  	resultat = "Nom très court, 5 caractères minimum";
	  		  	return;
	  		  	
			}
			else if(spaceCoderace.length > 1) {
				
				setErreurs_u(FIELD_LOGIN, "Pas d'espace dans le nom du partenaire");
				resultat = "Pas d'espace dans le nom du partenaire.";
		  		return;
		  		
			}
			
			 Partner partn = partnerDao.find(coderace);
			 
			 if(partn == null) {
				 
				 Partner part = new Partner();
				 part.setCoderace(coderace);
				 part.setZone(zone);
				 part.setGroupe(1);
				 part.setActif(1);
				 part.setCob("opened");
				 boolean isAdded = addNewPartenaire(part);
				 
				 if(isAdded) {
					 
					 PartnerDto pdto = new PartnerDto();
					 pdto.setCoderace(coderace);
					 pdto.setZone(zone);
					 ResPartner resp = supergameAPI.getSuperGameDAO().submitPartner(Params.url, pdto);
					 
				 }
				 
			 }
			
			
		
			//Partner partner = partnerDao.find(coderace);
			
			 PartnerDto pdto = new PartnerDto();
			 pdto.setCoderace(coderace);
			 pdto.setZone(zone);
			 ResPartner resp = supergameAPI.getSuperGameDAO().submitPartner(Params.url, pdto);
			 Partner p = resp.getPartner();
			 String respMess = resp.getMessage();

			 Partner part = new Partner();
			 part.setCoderace(coderace);
			 part.setZone(zone);
			 part.setGroupe(1);
			 part.setActif(1);
			 part.setCob("opened");

			 if ("EXISTS".equalsIgnoreCase(respMess)) {

				 Partner partner = partnerDao.find(coderace);

				 if (partner == null) {
					 addNewPartenaire(part);
				 }
				 else {
					 setErreurs(FIELD_CODERACE, "present");
					 resultat = "Partenaire/Salle deja présent.";
				 }

			 }
			 else if("NEW".equalsIgnoreCase(respMess)) {
				 addNewPartenaire(part);
			 }

		 } catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
			 // TODO Auto-generated catch block
			 e.printStackTrace();
		 }
		}
		else if(action.equalsIgnoreCase("addcaissier")){
			user = new HashMap<String, String>();
			
			String nom_user = getName(request, FIELD_NOM_CAISSIER);
			String login = getName(request, FIELD_LOGIN);
			String pass = getPass(request, FIELD_PASS);
			String profil = getName(request, FIELD_PROFIL);
			String partner = getName(request, FIELD_PARTNER);
			
			if(StringUtils.isBlank(login) || StringUtils.isBlank(pass) || StringUtils.isBlank(profil) || StringUtils.isBlank(partner)){
				return;
			}
			
			String[] spaceLogin = login.trim().split(" ");
			if(login.length() < 5){
	  		  setErreurs_u(FIELD_LOGIN, "Longueur du login très court");
	  		  resultat_u = "Login très court, 5 caractères minimum";
	  		  return;
			}
			else if(spaceLogin.length > 1) {
				setErreurs_u(FIELD_LOGIN, "Pas d'espace dans le login");
		  		resultat_u = "Pas d'espace dans le login.";
		  		return;
			}
			
			
			if(pass.length() < 6){
	  		  setErreurs_u(FIELD_PASS, "Longueur du mot de passe très court");
	  		  resultat_u = "pass très court, 5 caractÃ¨res minimum";
	  		  return;
			}
			
			ConfigurablePasswordEncryptor passwordEncryptor = new ConfigurablePasswordEncryptor();
			passwordEncryptor.setAlgorithm( Params.ALGO_CHIFFREMENT );
			passwordEncryptor.setPlainDigest( false );
			
			Caissier caissier = caissierDao.findByLogin(login);
			Long idpartner = partnerDao.find(partner).getIdpartner();
			Long idprofil = 2L;
			if(profil.equalsIgnoreCase("CAISSIER")){
				idprofil = 2L;
			}
			else if(profil.equalsIgnoreCase("ADMINISTRATEUR")){
				idprofil = 1L;
			}
			
			String passChiffre = passwordEncryptor.encryptPassword(pass);
			setUser("nomc", nom_user);
			setUser("loginc", login);
			setUser("passc", "******");
			
			if(caissier == null){
				
				int n = 0;
				Caissier cais = new Caissier();
				cais.setNomc(nom_user);
				cais.setLoginc(login);
				cais.setMdpc(passChiffre);
				cais.setPartner(partner);
				cais.setProfil(idprofil);
				cais.setGrpe(1);
				//System.out.println(cais);
				n = caissierDao.create(cais);
				
				try {
					
					if (n > 0) {
						// Utilisateur crée en local
						
						CaissierDto caisDto = new CaissierDto();
						caisDto.setNomc(nom_user);
						caisDto.setLoginc(login);
						caisDto.setMdpc(pass);
						caisDto.setPartner(partner);
						caisDto.setProfil(idprofil);
						caisDto.setGrpe(1);
						//System.out.println(caisDto);
						Caissier caisse = supergameAPI.getSuperGameDAO().saveUser(Params.url, caisDto, partner);
						if(caisse == null) {
							
							caissierDao.delete(cais);
							setErreurs_u(FIELD_LOGIN, "Echec lors de la creation");
							resultat_u = "Echec lors de la creation.";
							return;
						}
						
						resultat_u="Caissier crée avec succes";
						
					}
					
				} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
					e.printStackTrace();
					return;
				}
				
//				if(n > 0){	
//					Caissier user = caissierDao.findByLogin(login);
//					//creation de la ligne des mouvements
//					airtimeDao.createMvt(user.getIdCaissier(), 0);
//					resultat_u="Caissier crée avec succes";
//					return;
//				}
//				else{
//					setErreurs_u(FIELD_LOGIN, "Echec de creation");
//					resultat_u = "Echec de creation";
//					return;
//				}
				
				
			}
			else{
				setErreurs_u(FIELD_LOGIN, "present");
				resultat_u = "Login utilisé, veuillez entrer un autre";
			}
		}
		else if(action.equalsIgnoreCase("addbonus")){
			bonusk0 = getName(request, FIELD_BONUSK0);
			bonusk1 = getName(request, FIELD_BONUSK1);
			String jeu = getName(request, FIELD_JEU);
			//System.out.println("BONUSMIN: "+bonusk0+" BONUSMAX: "+bonusk1+" | "+jeu);
			coderace = getName( request, FIELD_KCODERACE );
			String bonusk_rate = getName(request,  FIELD_BONUSK_RATE);
			//System.out.println("coderace: "+coderace+" | "+bonusk_rate);
			Long idpartner = partnerDao.find(coderace).getIdpartner();
			resultat_b = "";
			erreurs_b.clear();
			if(jeu == null || jeu.equalsIgnoreCase("")){
				setErreurs_b(FIELD_JEU, "Mauvais jeu");
				resultat_b = "Veuillez selectionner un type de jeu";
				return;
			}
			
			if(jeu.equalsIgnoreCase("keno")){
				if(coderace == null || coderace.equalsIgnoreCase("")){
					setErreurs_b(FIELD_KCODERACE, "Mauvais partenaire");
					resultat_b = "Veuillez selectionner un partenaire";
					return;
				}
				if(jeu == null || jeu.equalsIgnoreCase("")){
					setErreurs_b(FIELD_JEU, "Mauvais jeu");
					resultat_b = "Veuillez selectionner un type de jeu";
					return;
				}
				if(bonusk0 != null && !bonusk0.equalsIgnoreCase("")){
					mbonusk0 = Double.parseDouble(bonusk0);
				}
				else{
					setErreurs_b(FIELD_BONUSK0, "Mauvais montant min");
					resultat_b = "Veuillez saisir un montant min valide";
					return;
				}
				if(bonusk1 != null && !bonusk1.equalsIgnoreCase("")){
					mbonusk1 = Double.parseDouble(bonusk1);
				}
				else{
					setErreurs_b(FIELD_BONUSK1, "Mauvais montant max");
					resultat_b = "Veuillez saisir un montant max valide";
					return;
				}
				if(mbonusk0 > mbonusk1){
					setErreurs_b(FIELD_BONUSK1, "Mauvais montant");
					resultat_b = "Bonus Min supérieur à Bonus Max";
					return;
				}
				if(bonusk_rate == null || bonusk_rate.equalsIgnoreCase("")){
					bonusk_rate = "2";
					//return;
				}
				double k_rate = Double.parseDouble(bonusk_rate)/100;
				
				try {
					//ajout = configDao.updateBonusK(k_rate, mbonusk0, mbonusk1, coderace );
					ajout = supergameAPI.getSuperGameDAO().updateBonusK(Params.url, k_rate, mbonusk0, mbonusk1, coderace);
					if(ajout != 0){
						erreurs.clear();
						resultat_b = "Mise à jour du bonus effectué avec succès";
					}
					else{
						setErreurs_b("Update", "Echec de la mise à jour");
						resultat_b = "Echec de la mise à jour";
						return;
					}
				} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
				
			}
			else if(jeu.equalsIgnoreCase("spin")){
				
			}
			else if(jeu.equalsIgnoreCase("dog")){
				
			}
		}
		else if(action.equalsIgnoreCase("addcagnotte")){
			
			String detail_lot = "";
			CagnotteDto cagnotte = new CagnotteDto();
			
			dat1 = getName(request, FIELD_DATE1);
			String partner = getName(request, "ncbonus_part2");
			String lot = getName(request, "ncbonus_part");
			String heur = getName(request, "cg_heure");
			
			if(lot == null) {
				setErreurs_c("Update", "Veuillez choisir un lot");
				resultat_c = "Veuillez choisir un lot";
				return;
			}
			if(dat1 == null) {
				setErreurs_c("Update", "Veuillez choisir le jour de tombée");
				resultat_c = "Veuillez choisir le jour de tombée";
				return;
			}
			
			System.out.println("Lot: "+lot+" Date: "+dat1+":"+heur+" partner: "+partner);
			if(lot.equalsIgnoreCase("1")) {
				detail_lot = "tel";
			}
			else if(lot.equalsIgnoreCase("2")) {
				detail_lot = "woofer";
			}
			else if(lot.equalsIgnoreCase("3")) {
				detail_lot = "tricot";
			}
			else if(lot.equalsIgnoreCase("4")) {
				detail_lot = "conso";
			}
			else if(lot.equalsIgnoreCase("5")) {
				detail_lot = "ecran";
			}
			else if(lot.equalsIgnoreCase("6")) {
				detail_lot = "cash";
			}
			
			cagnotte.setLot(detail_lot);
			cagnotte.setHeur(dat1 + " " + heur);
			cagnotte.setJeu("");
			
			
			try {
				cagnotte = supergameAPI.getSuperGameDAO().saveJackpot(Params.url, cagnotte, partner);
				resultat_c = "Cagnotte mis à  jour";
			} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
				setErreurs_c("Update", "Erreur de creation cagnotte");
				resultat = "Erreur de creation cagnotte";
				return;
			}
			
		}
		
		
	}
	
	private String getName( HttpServletRequest request,String nomChamp ) {
        String valeur = request.getParameter( nomChamp );
       
       if ( valeur == null || valeur.trim().length() == 0) {
           return null;
       } else{
    
    	  return valeur.trim(); 
       }
       
	}
	
	private String getPass( HttpServletRequest request,String nomChamp ) {
        String valeur = request.getParameter( nomChamp );
       
       if ( valeur == null || valeur.trim().length() == 0) {
           return null;
       } else{
    	  return valeur.trim(); 
       }
       
	}
	
	private String getValRadio(HttpServletRequest request, String nomChamp){
		String valeur = request.getParameter(nomChamp);
		return valeur;
	}
	
	private boolean addNewPartenaire(Partner part) {
		
		int nb_race;
		Long n = 0L;
		n = partnerDao.create(part);
		
		if(n > 0){	
			
			//ajout d'une de configuration
			Config conf = new Config();
			conf.setCoderace(coderace);
			configDao.create(conf);
			
			//ajout d'un tirage par defaut
			Keno ken = new Keno();
			ken.setDrawnumK("1");
			ken.setMultiplicateur("0");
			ken.setDrawnumbK("'1-2-3-4-5-6-7-8-9-10-11-12-13-14-15-16-17-18-19-20'");
			ken.setCoderace(coderace);
			ken.setHeureTirage("01/01/2020-00:00:00");
			nb_race = kenoDao.create(ken);
			
			//misetDao.createFree(n);
			
			if(nb_race > 0){
				resultat = "Partenaire enregistré avec succes";
			}
			else{
				setErreurs(FIELD_CODERACE, "Echec de creation");
				resultat = "Echec de creation";
				return Boolean.FALSE;
			}
			
			for (Partner pp : lpartner) {
				pp.setActif(0);
				pp.setCob("closed");
				partnerDao.update(pp);
			}
		}
		else {
			setErreurs(FIELD_CODERACE, "Echec de creation");
			resultat = "Echec de creation";
			return Boolean.FALSE;
		}
		
		return Boolean.TRUE;
	}		
}

----------------------------------- SOURCE END -------------------------------------
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:344)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1272)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:868)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider$1.run(CoreASTProvider.java:294)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.createAST(CoreASTProvider.java:286)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.getAST(CoreASTProvider.java:199)
	at org.eclipse.jdt.core.manipulation.SharedASTProviderCore.getAST(SharedASTProviderCore.java:138)
	at org.eclipse.jdt.internal.ui.text.java.hover.NLSStringHover.internalGetHoverInfo(NLSStringHover.java:141)
	at org.eclipse.jdt.internal.ui.text.java.hover.NLSStringHover.getHoverInfo2(NLSStringHover.java:120)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:163)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:130)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo2(JavaEditorTextHoverProxy.java:89)
	at org.eclipse.jface.text.TextViewerHoverManager$1.run(TextViewerHoverManager.java:155)

!ENTRY org.eclipse.jdt.core.manipulation 4 2 2023-07-23 23:37:32.479
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.jdt.core.manipulation".
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:344)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1272)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:868)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider$1.run(CoreASTProvider.java:294)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.createAST(CoreASTProvider.java:286)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.getAST(CoreASTProvider.java:199)
	at org.eclipse.jdt.core.manipulation.SharedASTProviderCore.getAST(SharedASTProviderCore.java:138)
	at org.eclipse.jdt.internal.ui.text.java.hover.NLSStringHover.internalGetHoverInfo(NLSStringHover.java:141)
	at org.eclipse.jdt.internal.ui.text.java.hover.NLSStringHover.getHoverInfo2(NLSStringHover.java:120)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:163)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:130)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo2(JavaEditorTextHoverProxy.java:89)
	at org.eclipse.jface.text.TextViewerHoverManager$1.run(TextViewerHoverManager.java:155)

!ENTRY org.eclipse.jdt.core.manipulation 4 0 2023-07-23 23:37:32.479
!MESSAGE Error in JDT Core during AST creation
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:344)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1272)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:868)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider$1.run(CoreASTProvider.java:294)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.createAST(CoreASTProvider.java:286)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.getAST(CoreASTProvider.java:199)
	at org.eclipse.jdt.core.manipulation.SharedASTProviderCore.getAST(SharedASTProviderCore.java:138)
	at org.eclipse.jdt.internal.ui.text.java.hover.NLSStringHover.internalGetHoverInfo(NLSStringHover.java:141)
	at org.eclipse.jdt.internal.ui.text.java.hover.NLSStringHover.getHoverInfo2(NLSStringHover.java:120)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:163)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:130)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo2(JavaEditorTextHoverProxy.java:89)
	at org.eclipse.jface.text.TextViewerHoverManager$1.run(TextViewerHoverManager.java:155)

!ENTRY org.eclipse.jdt.core 4 4 2023-07-23 23:37:33.097
!MESSAGE Exception occurred during compilation unit conversion:
----------------------------------- SOURCE BEGIN -------------------------------------
package business;

import java.io.IOException;
import java.net.URISyntaxException;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.servlet.http.HttpServletRequest;

import org.apache.commons.lang3.StringUtils;
import org.codehaus.jettison.json.JSONException;
import org.jasypt.util.password.ConfigurablePasswordEncryptor;

import config.Params;
import modele.CagnotteDto;
import modele.Caissier;
import modele.CaissierDto;
import modele.Config;
import modele.Keno;
import modele.Partner;
import modele.PartnerDto;
import modele.ResPartner;
import superbetDAO.AirtimeDAO;
import superbetDAO.CagnotteDAO;
import superbetDAO.CaissierDAO;
import superbetDAO.ConfigDAO;
import superbetDAO.EffChoicekDAO;
import superbetDAO.GameCycleDAO;
import superbetDAO.KenoDAO;
import superbetDAO.MisekDAO;
import superbetDAO.Misek_tempDAO;
import superbetDAO.MisetDAO;
import superbetDAO.PartnerDAO;
import superbetDAO.SpinDAO;
import superbetDAO.UtilDAO;
import superbetDAO.VersementDAO;
import superbetDAO.api.exeception.DAOAPIException;
import superbetDAO.api.implementations.SuperGameDAOAPI;
import superbetDAO.api.interfaces.ISuperGameDAOAPILocal;

public final class ConfigForm {
	
	private static final String FIELD_CODERACE = "ncpartner";
	private static final String FIELD_ZONE = "nczone";
	
	private static final String FIELD_NOM_CAISSIER = "ncuser";
	private static final String FIELD_LOGIN = "nclogin";
	private static final String FIELD_PASS = "ncpass";
	private static final String FIELD_PROFIL = "ncprofil";
	private static final String FIELD_PARTNER = "ncsalle_cais";
	private static final String FIELD_JEU = "ncbonus_jeu";
	
	private static final String FIELD_BONUSK0 = "bonu_sum_min";
	private static final String FIELD_BONUSK1 = "bonu_sum_max";
	private static final String FIELD_BONUSK_RATE = "ncbonus_rate";
	private static final String FIELD_BONUSK_RESERVE = "ncbonus_reserve";
	private static final String FIELD_KCODERACE = "ncbonus_part1";
	private static final String FIELD_DATE1 = "cgddebut";
	private  ISuperGameDAOAPILocal  supergameAPI;
	
	private  String resultat = null;
	private  String resultat_u = null;
	private  String resultat_b = null;
	private  String resultat_c = null;
	private  Map<String, String> erreurs;
	private  Map<String, String> erreurs_u;
	private  Map<String, String> erreurs_b;
	private  Map<String, String> erreurs_c;
	private String action="";
	private String coderace="", dat1;
	private String zone="";
	
	private String bonusk0;
	private String bonusk1;
    private double mbonusk0;
    private double mbonusk1;
    private int ajout = 0;
   
	
	private  Map<String, String> user;
	private List<Partner> lpartner;
	
	private KenoDAO kenoDao;
	private MisetDAO misetDao;
	private EffChoicekDAO effchoicekDao;
	private MisekDAO misekDao;
	private VersementDAO verstDao;
	private PartnerDAO partnerDao;
	private Misek_tempDAO misektpDao;
	private UtilDAO utilDao;
	private CaissierDAO caissierDao;
	private ConfigDAO configDao;
	private SpinDAO spinDao;
	private AirtimeDAO airtimeDao;
	private GameCycleDAO game_cycleDao;
	private CagnotteDAO cagnotteDao;
	
	
	public String getResultat() {
		return resultat;
	}
	
	public Map<String, String> getErreurs_u() {
		return erreurs_u;
	}

	public void setErreurs_u(String champ, String message) {
		erreurs_u.put(champ, message);
	}

	public Map<String, String> getErreurs_b() {
		return erreurs_b;
	}

	public void setErreurs_b(String champ, String message) {
		erreurs_b.put(champ, message);
	}

	public Map<String, String> getErreurs_c() {
		return erreurs_c;
	}

	public void setErreurs_c(String champ, String message) {
		erreurs_c.put(champ, message);
	}
	
	public String getResultat_u() {
		return resultat_u;
	}

	public String getResultat_b() {
		return resultat_b;
	}

	public String getResultat_c() {
		return resultat_c;
	}
	public String getAction() {
		return action;
	}
	
	public String getCoderace() {
		return coderace;
	}
	
	public String getZone() {
		return zone;
	}
	
	public Map<String, String> getErreurs() {
		return erreurs;
	}
	public void setErreurs(String champ, String message) {
		erreurs.put(champ, message);
	}
	
	
	
	public Map<String, String> getUser() {
		return user;
	}

	public void setUser(String champ, String message) {
		user.put(champ, message);;
	}
	
	public String getBonusk0() {
		return bonusk0;
	}

	public void setBonusk0(String bonusk0) {
		this.bonusk0 = bonusk0;
	}

	public String getBonusk1() {
		return bonusk1;
	}

	public void setBonusk1(String bonusk1) {
		this.bonusk1 = bonusk1;
	}

	public void setResultat(String resultat) {
		this.resultat = resultat;
	}

	public String getDat1() {
		return dat1;
	}

	public void setDat1(String dat1) {
		this.dat1 = dat1;
	}

	public ConfigForm(KenoDAO kenoDao,MisetDAO misetDao,UtilDAO utilDao,EffChoicekDAO effchoicekDao,MisekDAO misekDao,
			VersementDAO verstDao, PartnerDAO partnerDao, Misek_tempDAO misektpDao, CaissierDAO caissierDao, ConfigDAO configDao, SpinDAO spinDao, 
			AirtimeDAO airtimeDao, GameCycleDAO game_cycleDao){
		this.kenoDao = kenoDao;
		this.misetDao = misetDao;
		this.effchoicekDao = effchoicekDao;
		this.misekDao = misekDao;
		this.verstDao = verstDao;
		this.partnerDao = partnerDao;
		this.misektpDao = misektpDao;
		this.utilDao = utilDao;
		this.caissierDao = caissierDao;
		this.configDao = configDao;
		this.spinDao = spinDao;
		this.airtimeDao = airtimeDao;
		this.game_cycleDao = game_cycleDao;
		supergameAPI = SuperGameDAOAPI.getInstance();
	}
	
	public void manage_config(HttpServletRequest request){
		erreurs = new HashMap<String, String>();
		erreurs_u = new HashMap<String, String>();
		erreurs_b = new HashMap<String, String>();
		erreurs_c = new HashMap<String, String>();
		action = getName( request, "idconfig" );// definit l'action Ã  traiter. ajout partner, ajout caissier...
		
		if(action.equalsIgnoreCase("addpartner")){
			
			coderace = getName( request, FIELD_CODERACE );
			zone = getName( request, FIELD_ZONE );
			
			// recupere tous les partenaires
		    lpartner = partnerDao.getAllPartners();
		   
			
			if(StringUtils.isBlank(coderace)){
				return;
			}
			
			String[] spaceCoderace = coderace.trim().split(" ");
			
			if(coderace.length() < 5){
				
	  		  	setErreurs(FIELD_CODERACE, "Longueur du nom très court");
	  		  	resultat = "Nom très court, 5 caractères minimum";
	  		  	return;
	  		  	
			}
			else if(spaceCoderace.length > 1) {
				
				setErreurs_u(FIELD_LOGIN, "Pas d'espace dans le nom du partenaire");
				resultat = "Pas d'espace dans le nom du partenaire.";
		  		return;
		  		
			}
			
			 Partner partn = partnerDao.find(coderace);
			 
			 if(partn == null) {
				 
				 Partner part = new Partner();
				 part.setCoderace(coderace);
				 part.setZone(zone);
				 part.setGroupe(1);
				 part.setActif(1);
				 part.setCob("opened");
				 boolean isAdded = addNewPartenaire(part);
				 
				 if(isAdded) {
					 
					 PartnerDto pdto = new PartnerDto();
					 pdto.setCoderace(coderace);
					 pdto.setZone(zone);
					 ResPartner resp = supergameAPI.getSuperGameDAO().submitPartner(Params.url, pdto);
					 
				 }
				 
			 }
			
			
		
			//Partner partner = partnerDao.find(coderace);
			
			 PartnerDto pdto = new PartnerDto();
			 pdto.setCoderace(coderace);
			 pdto.setZone(zone);
			 ResPartner resp = supergameAPI.getSuperGameDAO().submitPartner(Params.url, pdto);
			 Partner p = resp.getPartner();
			 String respMess = resp.getMessage();

			 Partner part = new Partner();
			 part.setCoderace(coderace);
			 part.setZone(zone);
			 part.setGroupe(1);
			 part.setActif(1);
			 part.setCob("opened");

			 if ("EXISTS".equalsIgnoreCase(respMess)) {

				 Partner partner = partnerDao.find(coderace);

				 if (partner == null) {
					 addNewPartenaire(part);
				 }
				 else {
					 setErreurs(FIELD_CODERACE, "present");
					 resultat = "Partenaire/Salle deja présent.";
				 }

			 }
			 else if("NEW".equalsIgnoreCase(respMess)) {
				 addNewPartenaire(part);
			 }

		 } catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
			 // TODO Auto-generated catch block
			 e.printStackTrace();
		 }
		}
		else if(action.equalsIgnoreCase("addcaissier")){
			user = new HashMap<String, String>();
			
			String nom_user = getName(request, FIELD_NOM_CAISSIER);
			String login = getName(request, FIELD_LOGIN);
			String pass = getPass(request, FIELD_PASS);
			String profil = getName(request, FIELD_PROFIL);
			String partner = getName(request, FIELD_PARTNER);
			
			if(StringUtils.isBlank(login) || StringUtils.isBlank(pass) || StringUtils.isBlank(profil) || StringUtils.isBlank(partner)){
				return;
			}
			
			String[] spaceLogin = login.trim().split(" ");
			if(login.length() < 5){
	  		  setErreurs_u(FIELD_LOGIN, "Longueur du login très court");
	  		  resultat_u = "Login très court, 5 caractères minimum";
	  		  return;
			}
			else if(spaceLogin.length > 1) {
				setErreurs_u(FIELD_LOGIN, "Pas d'espace dans le login");
		  		resultat_u = "Pas d'espace dans le login.";
		  		return;
			}
			
			
			if(pass.length() < 6){
	  		  setErreurs_u(FIELD_PASS, "Longueur du mot de passe très court");
	  		  resultat_u = "pass très court, 5 caractÃ¨res minimum";
	  		  return;
			}
			
			ConfigurablePasswordEncryptor passwordEncryptor = new ConfigurablePasswordEncryptor();
			passwordEncryptor.setAlgorithm( Params.ALGO_CHIFFREMENT );
			passwordEncryptor.setPlainDigest( false );
			
			Caissier caissier = caissierDao.findByLogin(login);
			Long idpartner = partnerDao.find(partner).getIdpartner();
			Long idprofil = 2L;
			if(profil.equalsIgnoreCase("CAISSIER")){
				idprofil = 2L;
			}
			else if(profil.equalsIgnoreCase("ADMINISTRATEUR")){
				idprofil = 1L;
			}
			
			String passChiffre = passwordEncryptor.encryptPassword(pass);
			setUser("nomc", nom_user);
			setUser("loginc", login);
			setUser("passc", "******");
			
			if(caissier == null){
				
				int n = 0;
				Caissier cais = new Caissier();
				cais.setNomc(nom_user);
				cais.setLoginc(login);
				cais.setMdpc(passChiffre);
				cais.setPartner(partner);
				cais.setProfil(idprofil);
				cais.setGrpe(1);
				//System.out.println(cais);
				n = caissierDao.create(cais);
				
				try {
					
					if (n > 0) {
						// Utilisateur crée en local
						
						CaissierDto caisDto = new CaissierDto();
						caisDto.setNomc(nom_user);
						caisDto.setLoginc(login);
						caisDto.setMdpc(pass);
						caisDto.setPartner(partner);
						caisDto.setProfil(idprofil);
						caisDto.setGrpe(1);
						//System.out.println(caisDto);
						Caissier caisse = supergameAPI.getSuperGameDAO().saveUser(Params.url, caisDto, partner);
						if(caisse == null) {
							
							caissierDao.delete(cais);
							setErreurs_u(FIELD_LOGIN, "Echec lors de la creation");
							resultat_u = "Echec lors de la creation.";
							return;
						}
						
						resultat_u="Caissier crée avec succes";
						
					}
					
				} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
					e.printStackTrace();
					return;
				}
				
//				if(n > 0){	
//					Caissier user = caissierDao.findByLogin(login);
//					//creation de la ligne des mouvements
//					airtimeDao.createMvt(user.getIdCaissier(), 0);
//					resultat_u="Caissier crée avec succes";
//					return;
//				}
//				else{
//					setErreurs_u(FIELD_LOGIN, "Echec de creation");
//					resultat_u = "Echec de creation";
//					return;
//				}
				
				
			}
			else{
				setErreurs_u(FIELD_LOGIN, "present");
				resultat_u = "Login utilisé, veuillez entrer un autre";
			}
		}
		else if(action.equalsIgnoreCase("addbonus")){
			bonusk0 = getName(request, FIELD_BONUSK0);
			bonusk1 = getName(request, FIELD_BONUSK1);
			String jeu = getName(request, FIELD_JEU);
			//System.out.println("BONUSMIN: "+bonusk0+" BONUSMAX: "+bonusk1+" | "+jeu);
			coderace = getName( request, FIELD_KCODERACE );
			String bonusk_rate = getName(request,  FIELD_BONUSK_RATE);
			//System.out.println("coderace: "+coderace+" | "+bonusk_rate);
			Long idpartner = partnerDao.find(coderace).getIdpartner();
			resultat_b = "";
			erreurs_b.clear();
			if(jeu == null || jeu.equalsIgnoreCase("")){
				setErreurs_b(FIELD_JEU, "Mauvais jeu");
				resultat_b = "Veuillez selectionner un type de jeu";
				return;
			}
			
			if(jeu.equalsIgnoreCase("keno")){
				if(coderace == null || coderace.equalsIgnoreCase("")){
					setErreurs_b(FIELD_KCODERACE, "Mauvais partenaire");
					resultat_b = "Veuillez selectionner un partenaire";
					return;
				}
				if(jeu == null || jeu.equalsIgnoreCase("")){
					setErreurs_b(FIELD_JEU, "Mauvais jeu");
					resultat_b = "Veuillez selectionner un type de jeu";
					return;
				}
				if(bonusk0 != null && !bonusk0.equalsIgnoreCase("")){
					mbonusk0 = Double.parseDouble(bonusk0);
				}
				else{
					setErreurs_b(FIELD_BONUSK0, "Mauvais montant min");
					resultat_b = "Veuillez saisir un montant min valide";
					return;
				}
				if(bonusk1 != null && !bonusk1.equalsIgnoreCase("")){
					mbonusk1 = Double.parseDouble(bonusk1);
				}
				else{
					setErreurs_b(FIELD_BONUSK1, "Mauvais montant max");
					resultat_b = "Veuillez saisir un montant max valide";
					return;
				}
				if(mbonusk0 > mbonusk1){
					setErreurs_b(FIELD_BONUSK1, "Mauvais montant");
					resultat_b = "Bonus Min supérieur à Bonus Max";
					return;
				}
				if(bonusk_rate == null || bonusk_rate.equalsIgnoreCase("")){
					bonusk_rate = "2";
					//return;
				}
				double k_rate = Double.parseDouble(bonusk_rate)/100;
				
				try {
					//ajout = configDao.updateBonusK(k_rate, mbonusk0, mbonusk1, coderace );
					ajout = supergameAPI.getSuperGameDAO().updateBonusK(Params.url, k_rate, mbonusk0, mbonusk1, coderace);
					if(ajout != 0){
						erreurs.clear();
						resultat_b = "Mise à jour du bonus effectué avec succès";
					}
					else{
						setErreurs_b("Update", "Echec de la mise à jour");
						resultat_b = "Echec de la mise à jour";
						return;
					}
				} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
				
			}
			else if(jeu.equalsIgnoreCase("spin")){
				
			}
			else if(jeu.equalsIgnoreCase("dog")){
				
			}
		}
		else if(action.equalsIgnoreCase("addcagnotte")){
			
			String detail_lot = "";
			CagnotteDto cagnotte = new CagnotteDto();
			
			dat1 = getName(request, FIELD_DATE1);
			String partner = getName(request, "ncbonus_part2");
			String lot = getName(request, "ncbonus_part");
			String heur = getName(request, "cg_heure");
			
			if(lot == null) {
				setErreurs_c("Update", "Veuillez choisir un lot");
				resultat_c = "Veuillez choisir un lot";
				return;
			}
			if(dat1 == null) {
				setErreurs_c("Update", "Veuillez choisir le jour de tombée");
				resultat_c = "Veuillez choisir le jour de tombée";
				return;
			}
			
			System.out.println("Lot: "+lot+" Date: "+dat1+":"+heur+" partner: "+partner);
			if(lot.equalsIgnoreCase("1")) {
				detail_lot = "tel";
			}
			else if(lot.equalsIgnoreCase("2")) {
				detail_lot = "woofer";
			}
			else if(lot.equalsIgnoreCase("3")) {
				detail_lot = "tricot";
			}
			else if(lot.equalsIgnoreCase("4")) {
				detail_lot = "conso";
			}
			else if(lot.equalsIgnoreCase("5")) {
				detail_lot = "ecran";
			}
			else if(lot.equalsIgnoreCase("6")) {
				detail_lot = "cash";
			}
			
			cagnotte.setLot(detail_lot);
			cagnotte.setHeur(dat1 + " " + heur);
			cagnotte.setJeu("");
			
			
			try {
				cagnotte = supergameAPI.getSuperGameDAO().saveJackpot(Params.url, cagnotte, partner);
				resultat_c = "Cagnotte mis à  jour";
			} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
				setErreurs_c("Update", "Erreur de creation cagnotte");
				resultat = "Erreur de creation cagnotte";
				return;
			}
			
		}
		
		
	}
	
	private String getName( HttpServletRequest request,String nomChamp ) {
        String valeur = request.getParameter( nomChamp );
       
       if ( valeur == null || valeur.trim().length() == 0) {
           return null;
       } else{
    
    	  return valeur.trim(); 
       }
       
	}
	
	private String getPass( HttpServletRequest request,String nomChamp ) {
        String valeur = request.getParameter( nomChamp );
       
       if ( valeur == null || valeur.trim().length() == 0) {
           return null;
       } else{
    	  return valeur.trim(); 
       }
       
	}
	
	private String getValRadio(HttpServletRequest request, String nomChamp){
		String valeur = request.getParameter(nomChamp);
		return valeur;
	}
	
	private boolean addNewPartenaire(Partner part) {
		
		int nb_race;
		Long n = 0L;
		n = partnerDao.create(part);
		
		if(n > 0){	
			
			//ajout d'une de configuration
			Config conf = new Config();
			conf.setCoderace(coderace);
			configDao.create(conf);
			
			//ajout d'un tirage par defaut
			Keno ken = new Keno();
			ken.setDrawnumK("1");
			ken.setMultiplicateur("0");
			ken.setDrawnumbK("'1-2-3-4-5-6-7-8-9-10-11-12-13-14-15-16-17-18-19-20'");
			ken.setCoderace(coderace);
			ken.setHeureTirage("01/01/2020-00:00:00");
			nb_race = kenoDao.create(ken);
			
			//misetDao.createFree(n);
			
			if(nb_race > 0){
				resultat = "Partenaire enregistré avec succes";
			}
			else{
				setErreurs(FIELD_CODERACE, "Echec de creation");
				resultat = "Echec de creation";
				return Boolean.FALSE;
			}
			
			for (Partner pp : lpartner) {
				pp.setActif(0);
				pp.setCob("closed");
				partnerDao.update(pp);
			}
		}
		else {
			setErreurs(FIELD_CODERACE, "Echec de creation");
			resultat = "Echec de creation";
			return Boolean.FALSE;
		}
		
		return Boolean.TRUE;
	}		
}

----------------------------------- SOURCE END -------------------------------------
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:344)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1272)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:868)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider$1.run(CoreASTProvider.java:294)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.createAST(CoreASTProvider.java:286)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.getAST(CoreASTProvider.java:199)
	at org.eclipse.jdt.core.manipulation.SharedASTProviderCore.getAST(SharedASTProviderCore.java:138)
	at org.eclipse.jdt.internal.ui.text.java.hover.NLSStringHover.internalGetHoverInfo(NLSStringHover.java:141)
	at org.eclipse.jdt.internal.ui.text.java.hover.NLSStringHover.getHoverInfo2(NLSStringHover.java:120)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:163)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:130)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo2(JavaEditorTextHoverProxy.java:89)
	at org.eclipse.jface.text.TextViewerHoverManager$1.run(TextViewerHoverManager.java:155)

!ENTRY org.eclipse.jdt.core.manipulation 4 2 2023-07-23 23:37:33.098
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.jdt.core.manipulation".
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:344)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1272)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:868)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider$1.run(CoreASTProvider.java:294)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.createAST(CoreASTProvider.java:286)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.getAST(CoreASTProvider.java:199)
	at org.eclipse.jdt.core.manipulation.SharedASTProviderCore.getAST(SharedASTProviderCore.java:138)
	at org.eclipse.jdt.internal.ui.text.java.hover.NLSStringHover.internalGetHoverInfo(NLSStringHover.java:141)
	at org.eclipse.jdt.internal.ui.text.java.hover.NLSStringHover.getHoverInfo2(NLSStringHover.java:120)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:163)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:130)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo2(JavaEditorTextHoverProxy.java:89)
	at org.eclipse.jface.text.TextViewerHoverManager$1.run(TextViewerHoverManager.java:155)

!ENTRY org.eclipse.jdt.core.manipulation 4 0 2023-07-23 23:37:33.099
!MESSAGE Error in JDT Core during AST creation
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:344)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1272)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:868)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider$1.run(CoreASTProvider.java:294)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.createAST(CoreASTProvider.java:286)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.getAST(CoreASTProvider.java:199)
	at org.eclipse.jdt.core.manipulation.SharedASTProviderCore.getAST(SharedASTProviderCore.java:138)
	at org.eclipse.jdt.internal.ui.text.java.hover.NLSStringHover.internalGetHoverInfo(NLSStringHover.java:141)
	at org.eclipse.jdt.internal.ui.text.java.hover.NLSStringHover.getHoverInfo2(NLSStringHover.java:120)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:163)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:130)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo2(JavaEditorTextHoverProxy.java:89)
	at org.eclipse.jface.text.TextViewerHoverManager$1.run(TextViewerHoverManager.java:155)

!ENTRY org.eclipse.jdt.core 4 4 2023-07-23 23:37:36.090
!MESSAGE Exception occurred during compilation unit conversion:
----------------------------------- SOURCE BEGIN -------------------------------------
package business;

import java.io.IOException;
import java.net.URISyntaxException;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.servlet.http.HttpServletRequest;

import org.apache.commons.lang3.StringUtils;
import org.codehaus.jettison.json.JSONException;
import org.jasypt.util.password.ConfigurablePasswordEncryptor;

import config.Params;
import modele.CagnotteDto;
import modele.Caissier;
import modele.CaissierDto;
import modele.Config;
import modele.Keno;
import modele.Partner;
import modele.PartnerDto;
import modele.ResPartner;
import superbetDAO.AirtimeDAO;
import superbetDAO.CagnotteDAO;
import superbetDAO.CaissierDAO;
import superbetDAO.ConfigDAO;
import superbetDAO.EffChoicekDAO;
import superbetDAO.GameCycleDAO;
import superbetDAO.KenoDAO;
import superbetDAO.MisekDAO;
import superbetDAO.Misek_tempDAO;
import superbetDAO.MisetDAO;
import superbetDAO.PartnerDAO;
import superbetDAO.SpinDAO;
import superbetDAO.UtilDAO;
import superbetDAO.VersementDAO;
import superbetDAO.api.exeception.DAOAPIException;
import superbetDAO.api.implementations.SuperGameDAOAPI;
import superbetDAO.api.interfaces.ISuperGameDAOAPILocal;

public final class ConfigForm {
	
	private static final String FIELD_CODERACE = "ncpartner";
	private static final String FIELD_ZONE = "nczone";
	
	private static final String FIELD_NOM_CAISSIER = "ncuser";
	private static final String FIELD_LOGIN = "nclogin";
	private static final String FIELD_PASS = "ncpass";
	private static final String FIELD_PROFIL = "ncprofil";
	private static final String FIELD_PARTNER = "ncsalle_cais";
	private static final String FIELD_JEU = "ncbonus_jeu";
	
	private static final String FIELD_BONUSK0 = "bonu_sum_min";
	private static final String FIELD_BONUSK1 = "bonu_sum_max";
	private static final String FIELD_BONUSK_RATE = "ncbonus_rate";
	private static final String FIELD_BONUSK_RESERVE = "ncbonus_reserve";
	private static final String FIELD_KCODERACE = "ncbonus_part1";
	private static final String FIELD_DATE1 = "cgddebut";
	private  ISuperGameDAOAPILocal  supergameAPI;
	
	private  String resultat = null;
	private  String resultat_u = null;
	private  String resultat_b = null;
	private  String resultat_c = null;
	private  Map<String, String> erreurs;
	private  Map<String, String> erreurs_u;
	private  Map<String, String> erreurs_b;
	private  Map<String, String> erreurs_c;
	private String action="";
	private String coderace="", dat1;
	private String zone="";
	
	private String bonusk0;
	private String bonusk1;
    private double mbonusk0;
    private double mbonusk1;
    private int ajout = 0;
   
	
	private  Map<String, String> user;
	private List<Partner> lpartner;
	
	private KenoDAO kenoDao;
	private MisetDAO misetDao;
	private EffChoicekDAO effchoicekDao;
	private MisekDAO misekDao;
	private VersementDAO verstDao;
	private PartnerDAO partnerDao;
	private Misek_tempDAO misektpDao;
	private UtilDAO utilDao;
	private CaissierDAO caissierDao;
	private ConfigDAO configDao;
	private SpinDAO spinDao;
	private AirtimeDAO airtimeDao;
	private GameCycleDAO game_cycleDao;
	private CagnotteDAO cagnotteDao;
	
	
	public String getResultat() {
		return resultat;
	}
	
	public Map<String, String> getErreurs_u() {
		return erreurs_u;
	}

	public void setErreurs_u(String champ, String message) {
		erreurs_u.put(champ, message);
	}

	public Map<String, String> getErreurs_b() {
		return erreurs_b;
	}

	public void setErreurs_b(String champ, String message) {
		erreurs_b.put(champ, message);
	}

	public Map<String, String> getErreurs_c() {
		return erreurs_c;
	}

	public void setErreurs_c(String champ, String message) {
		erreurs_c.put(champ, message);
	}
	
	public String getResultat_u() {
		return resultat_u;
	}

	public String getResultat_b() {
		return resultat_b;
	}

	public String getResultat_c() {
		return resultat_c;
	}
	public String getAction() {
		return action;
	}
	
	public String getCoderace() {
		return coderace;
	}
	
	public String getZone() {
		return zone;
	}
	
	public Map<String, String> getErreurs() {
		return erreurs;
	}
	public void setErreurs(String champ, String message) {
		erreurs.put(champ, message);
	}
	
	
	
	public Map<String, String> getUser() {
		return user;
	}

	public void setUser(String champ, String message) {
		user.put(champ, message);;
	}
	
	public String getBonusk0() {
		return bonusk0;
	}

	public void setBonusk0(String bonusk0) {
		this.bonusk0 = bonusk0;
	}

	public String getBonusk1() {
		return bonusk1;
	}

	public void setBonusk1(String bonusk1) {
		this.bonusk1 = bonusk1;
	}

	public void setResultat(String resultat) {
		this.resultat = resultat;
	}

	public String getDat1() {
		return dat1;
	}

	public void setDat1(String dat1) {
		this.dat1 = dat1;
	}

	public ConfigForm(KenoDAO kenoDao,MisetDAO misetDao,UtilDAO utilDao,EffChoicekDAO effchoicekDao,MisekDAO misekDao,
			VersementDAO verstDao, PartnerDAO partnerDao, Misek_tempDAO misektpDao, CaissierDAO caissierDao, ConfigDAO configDao, SpinDAO spinDao, 
			AirtimeDAO airtimeDao, GameCycleDAO game_cycleDao){
		this.kenoDao = kenoDao;
		this.misetDao = misetDao;
		this.effchoicekDao = effchoicekDao;
		this.misekDao = misekDao;
		this.verstDao = verstDao;
		this.partnerDao = partnerDao;
		this.misektpDao = misektpDao;
		this.utilDao = utilDao;
		this.caissierDao = caissierDao;
		this.configDao = configDao;
		this.spinDao = spinDao;
		this.airtimeDao = airtimeDao;
		this.game_cycleDao = game_cycleDao;
		supergameAPI = SuperGameDAOAPI.getInstance();
	}
	
	public void manage_config(HttpServletRequest request){
		erreurs = new HashMap<String, String>();
		erreurs_u = new HashMap<String, String>();
		erreurs_b = new HashMap<String, String>();
		erreurs_c = new HashMap<String, String>();
		action = getName( request, "idconfig" );// definit l'action Ã  traiter. ajout partner, ajout caissier...
		
		if(action.equalsIgnoreCase("addpartner")){
			
			coderace = getName( request, FIELD_CODERACE );
			zone = getName( request, FIELD_ZONE );
			
			// recupere tous les partenaires
		    lpartner = partnerDao.getAllPartners();
		   
			
			if(StringUtils.isBlank(coderace)){
				return;
			}
			
			String[] spaceCoderace = coderace.trim().split(" ");
			
			if(coderace.length() < 5){
				
	  		  	setErreurs(FIELD_CODERACE, "Longueur du nom très court");
	  		  	resultat = "Nom très court, 5 caractères minimum";
	  		  	return;
	  		  	
			}
			else if(spaceCoderace.length > 1) {
				
				setErreurs_u(FIELD_LOGIN, "Pas d'espace dans le nom du partenaire");
				resultat = "Pas d'espace dans le nom du partenaire.";
		  		return;
		  		
			}
			
			 Partner partn = partnerDao.find(coderace);
			 
			 if(partn == null) {
				 
				 Partner part = new Partner();
				 part.setCoderace(coderace);
				 part.setZone(zone);
				 part.setGroupe(1);
				 part.setActif(1);
				 part.setCob("opened");
				 boolean isAdded = addNewPartenaire(part);
				 
				 if(isAdded) {
					 
					 PartnerDto pdto = new PartnerDto();
					 pdto.setCoderace(coderace);
					 pdto.setZone(zone);
					 ResPartner resp = supergameAPI.getSuperGameDAO().submitPartner(Params.url, pdto);
					 
				 }
				 
			 }
			
			
		
			//Partner partner = partnerDao.find(coderace);
			
			 PartnerDto pdto = new PartnerDto();
			 pdto.setCoderace(coderace);
			 pdto.setZone(zone);
			 ResPartner resp = supergameAPI.getSuperGameDAO().submitPartner(Params.url, pdto);
			 Partner p = resp.getPartner();
			 String respMess = resp.getMessage();

			 Partner part = new Partner();
			 part.setCoderace(coderace);
			 part.setZone(zone);
			 part.setGroupe(1);
			 part.setActif(1);
			 part.setCob("opened");

			 if ("EXISTS".equalsIgnoreCase(respMess)) {

				 Partner partner = partnerDao.find(coderace);

				 if (partner == null) {
					 addNewPartenaire(part);
				 }
				 else {
					 setErreurs(FIELD_CODERACE, "present");
					 resultat = "Partenaire/Salle deja présent.";
				 }

			 }
			 else if("NEW".equalsIgnoreCase(respMess)) {
				 addNewPartenaire(part);
			 }

		 } catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
			 // TODO Auto-generated catch block
			 e.printStackTrace();
		 }
		}
		else if(action.equalsIgnoreCase("addcaissier")){
			user = new HashMap<String, String>();
			
			String nom_user = getName(request, FIELD_NOM_CAISSIER);
			String login = getName(request, FIELD_LOGIN);
			String pass = getPass(request, FIELD_PASS);
			String profil = getName(request, FIELD_PROFIL);
			String partner = getName(request, FIELD_PARTNER);
			
			if(StringUtils.isBlank(login) || StringUtils.isBlank(pass) || StringUtils.isBlank(profil) || StringUtils.isBlank(partner)){
				return;
			}
			
			String[] spaceLogin = login.trim().split(" ");
			if(login.length() < 5){
	  		  setErreurs_u(FIELD_LOGIN, "Longueur du login très court");
	  		  resultat_u = "Login très court, 5 caractères minimum";
	  		  return;
			}
			else if(spaceLogin.length > 1) {
				setErreurs_u(FIELD_LOGIN, "Pas d'espace dans le login");
		  		resultat_u = "Pas d'espace dans le login.";
		  		return;
			}
			
			
			if(pass.length() < 6){
	  		  setErreurs_u(FIELD_PASS, "Longueur du mot de passe très court");
	  		  resultat_u = "pass très court, 5 caractÃ¨res minimum";
	  		  return;
			}
			
			ConfigurablePasswordEncryptor passwordEncryptor = new ConfigurablePasswordEncryptor();
			passwordEncryptor.setAlgorithm( Params.ALGO_CHIFFREMENT );
			passwordEncryptor.setPlainDigest( false );
			
			Caissier caissier = caissierDao.findByLogin(login);
			Long idpartner = partnerDao.find(partner).getIdpartner();
			Long idprofil = 2L;
			if(profil.equalsIgnoreCase("CAISSIER")){
				idprofil = 2L;
			}
			else if(profil.equalsIgnoreCase("ADMINISTRATEUR")){
				idprofil = 1L;
			}
			
			String passChiffre = passwordEncryptor.encryptPassword(pass);
			setUser("nomc", nom_user);
			setUser("loginc", login);
			setUser("passc", "******");
			
			if(caissier == null){
				
				int n = 0;
				Caissier cais = new Caissier();
				cais.setNomc(nom_user);
				cais.setLoginc(login);
				cais.setMdpc(passChiffre);
				cais.setPartner(partner);
				cais.setProfil(idprofil);
				cais.setGrpe(1);
				//System.out.println(cais);
				n = caissierDao.create(cais);
				
				try {
					
					if (n > 0) {
						// Utilisateur crée en local
						
						CaissierDto caisDto = new CaissierDto();
						caisDto.setNomc(nom_user);
						caisDto.setLoginc(login);
						caisDto.setMdpc(pass);
						caisDto.setPartner(partner);
						caisDto.setProfil(idprofil);
						caisDto.setGrpe(1);
						//System.out.println(caisDto);
						Caissier caisse = supergameAPI.getSuperGameDAO().saveUser(Params.url, caisDto, partner);
						if(caisse == null) {
							
							caissierDao.delete(cais);
							setErreurs_u(FIELD_LOGIN, "Echec lors de la creation");
							resultat_u = "Echec lors de la creation.";
							return;
						}
						
						resultat_u="Caissier crée avec succes";
						
					}
					
				} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
					e.printStackTrace();
					return;
				}
				
//				if(n > 0){	
//					Caissier user = caissierDao.findByLogin(login);
//					//creation de la ligne des mouvements
//					airtimeDao.createMvt(user.getIdCaissier(), 0);
//					resultat_u="Caissier crée avec succes";
//					return;
//				}
//				else{
//					setErreurs_u(FIELD_LOGIN, "Echec de creation");
//					resultat_u = "Echec de creation";
//					return;
//				}
				
				
			}
			else{
				setErreurs_u(FIELD_LOGIN, "present");
				resultat_u = "Login utilisé, veuillez entrer un autre";
			}
		}
		else if(action.equalsIgnoreCase("addbonus")){
			bonusk0 = getName(request, FIELD_BONUSK0);
			bonusk1 = getName(request, FIELD_BONUSK1);
			String jeu = getName(request, FIELD_JEU);
			//System.out.println("BONUSMIN: "+bonusk0+" BONUSMAX: "+bonusk1+" | "+jeu);
			coderace = getName( request, FIELD_KCODERACE );
			String bonusk_rate = getName(request,  FIELD_BONUSK_RATE);
			//System.out.println("coderace: "+coderace+" | "+bonusk_rate);
			Long idpartner = partnerDao.find(coderace).getIdpartner();
			resultat_b = "";
			erreurs_b.clear();
			if(jeu == null || jeu.equalsIgnoreCase("")){
				setErreurs_b(FIELD_JEU, "Mauvais jeu");
				resultat_b = "Veuillez selectionner un type de jeu";
				return;
			}
			
			if(jeu.equalsIgnoreCase("keno")){
				if(coderace == null || coderace.equalsIgnoreCase("")){
					setErreurs_b(FIELD_KCODERACE, "Mauvais partenaire");
					resultat_b = "Veuillez selectionner un partenaire";
					return;
				}
				if(jeu == null || jeu.equalsIgnoreCase("")){
					setErreurs_b(FIELD_JEU, "Mauvais jeu");
					resultat_b = "Veuillez selectionner un type de jeu";
					return;
				}
				if(bonusk0 != null && !bonusk0.equalsIgnoreCase("")){
					mbonusk0 = Double.parseDouble(bonusk0);
				}
				else{
					setErreurs_b(FIELD_BONUSK0, "Mauvais montant min");
					resultat_b = "Veuillez saisir un montant min valide";
					return;
				}
				if(bonusk1 != null && !bonusk1.equalsIgnoreCase("")){
					mbonusk1 = Double.parseDouble(bonusk1);
				}
				else{
					setErreurs_b(FIELD_BONUSK1, "Mauvais montant max");
					resultat_b = "Veuillez saisir un montant max valide";
					return;
				}
				if(mbonusk0 > mbonusk1){
					setErreurs_b(FIELD_BONUSK1, "Mauvais montant");
					resultat_b = "Bonus Min supérieur à Bonus Max";
					return;
				}
				if(bonusk_rate == null || bonusk_rate.equalsIgnoreCase("")){
					bonusk_rate = "2";
					//return;
				}
				double k_rate = Double.parseDouble(bonusk_rate)/100;
				
				try {
					//ajout = configDao.updateBonusK(k_rate, mbonusk0, mbonusk1, coderace );
					ajout = supergameAPI.getSuperGameDAO().updateBonusK(Params.url, k_rate, mbonusk0, mbonusk1, coderace);
					if(ajout != 0){
						erreurs.clear();
						resultat_b = "Mise à jour du bonus effectué avec succès";
					}
					else{
						setErreurs_b("Update", "Echec de la mise à jour");
						resultat_b = "Echec de la mise à jour";
						return;
					}
				} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
				
			}
			else if(jeu.equalsIgnoreCase("spin")){
				
			}
			else if(jeu.equalsIgnoreCase("dog")){
				
			}
		}
		else if(action.equalsIgnoreCase("addcagnotte")){
			
			String detail_lot = "";
			CagnotteDto cagnotte = new CagnotteDto();
			
			dat1 = getName(request, FIELD_DATE1);
			String partner = getName(request, "ncbonus_part2");
			String lot = getName(request, "ncbonus_part");
			String heur = getName(request, "cg_heure");
			
			if(lot == null) {
				setErreurs_c("Update", "Veuillez choisir un lot");
				resultat_c = "Veuillez choisir un lot";
				return;
			}
			if(dat1 == null) {
				setErreurs_c("Update", "Veuillez choisir le jour de tombée");
				resultat_c = "Veuillez choisir le jour de tombée";
				return;
			}
			
			System.out.println("Lot: "+lot+" Date: "+dat1+":"+heur+" partner: "+partner);
			if(lot.equalsIgnoreCase("1")) {
				detail_lot = "tel";
			}
			else if(lot.equalsIgnoreCase("2")) {
				detail_lot = "woofer";
			}
			else if(lot.equalsIgnoreCase("3")) {
				detail_lot = "tricot";
			}
			else if(lot.equalsIgnoreCase("4")) {
				detail_lot = "conso";
			}
			else if(lot.equalsIgnoreCase("5")) {
				detail_lot = "ecran";
			}
			else if(lot.equalsIgnoreCase("6")) {
				detail_lot = "cash";
			}
			
			cagnotte.setLot(detail_lot);
			cagnotte.setHeur(dat1 + " " + heur);
			cagnotte.setJeu("");
			
			
			try {
				cagnotte = supergameAPI.getSuperGameDAO().saveJackpot(Params.url, cagnotte, partner);
				resultat_c = "Cagnotte mis à  jour";
			} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
				setErreurs_c("Update", "Erreur de creation cagnotte");
				resultat = "Erreur de creation cagnotte";
				return;
			}
			
		}
		
		
	}
	
	private String getName( HttpServletRequest request,String nomChamp ) {
        String valeur = request.getParameter( nomChamp );
       
       if ( valeur == null || valeur.trim().length() == 0) {
           return null;
       } else{
    
    	  return valeur.trim(); 
       }
       
	}
	
	private String getPass( HttpServletRequest request,String nomChamp ) {
        String valeur = request.getParameter( nomChamp );
       
       if ( valeur == null || valeur.trim().length() == 0) {
           return null;
       } else{
    	  return valeur.trim(); 
       }
       
	}
	
	private String getValRadio(HttpServletRequest request, String nomChamp){
		String valeur = request.getParameter(nomChamp);
		return valeur;
	}
	
	private boolean addNewPartenaire(Partner part) {
		
		int nb_race;
		Long n = 0L;
		n = partnerDao.create(part);
		
		if(n > 0){	
			
			//ajout d'une de configuration
			Config conf = new Config();
			conf.setCoderace(coderace);
			configDao.create(conf);
			
			//ajout d'un tirage par defaut
			Keno ken = new Keno();
			ken.setDrawnumK("1");
			ken.setMultiplicateur("0");
			ken.setDrawnumbK("'1-2-3-4-5-6-7-8-9-10-11-12-13-14-15-16-17-18-19-20'");
			ken.setCoderace(coderace);
			ken.setHeureTirage("01/01/2020-00:00:00");
			nb_race = kenoDao.create(ken);
			
			//misetDao.createFree(n);
			
			if(nb_race > 0){
				resultat = "Partenaire enregistré avec succes";
			}
			else{
				setErreurs(FIELD_CODERACE, "Echec de creation");
				resultat = "Echec de creation";
				return Boolean.FALSE;
			}
			
			for (Partner pp : lpartner) {
				pp.setActif(0);
				pp.setCob("closed");
				partnerDao.update(pp);
			}
		}
		else {
			setErreurs(FIELD_CODERACE, "Echec de creation");
			resultat = "Echec de creation";
			return Boolean.FALSE;
		}
		
		return Boolean.TRUE;
	}		
}

----------------------------------- SOURCE END -------------------------------------
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:344)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1272)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:868)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider$1.run(CoreASTProvider.java:294)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.createAST(CoreASTProvider.java:286)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.getAST(CoreASTProvider.java:199)
	at org.eclipse.jdt.core.manipulation.SharedASTProviderCore.getAST(SharedASTProviderCore.java:138)
	at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup.calculateASTandInform(SelectionListenerWithASTManager.java:166)
	at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup$1.run(SelectionListenerWithASTManager.java:151)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:63)

!ENTRY org.eclipse.jdt.core.manipulation 4 2 2023-07-23 23:37:36.091
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.jdt.core.manipulation".
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:344)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1272)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:868)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider$1.run(CoreASTProvider.java:294)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.createAST(CoreASTProvider.java:286)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.getAST(CoreASTProvider.java:199)
	at org.eclipse.jdt.core.manipulation.SharedASTProviderCore.getAST(SharedASTProviderCore.java:138)
	at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup.calculateASTandInform(SelectionListenerWithASTManager.java:166)
	at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup$1.run(SelectionListenerWithASTManager.java:151)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:63)

!ENTRY org.eclipse.jdt.core.manipulation 4 0 2023-07-23 23:37:36.093
!MESSAGE Error in JDT Core during AST creation
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:344)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1272)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:868)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider$1.run(CoreASTProvider.java:294)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.createAST(CoreASTProvider.java:286)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.getAST(CoreASTProvider.java:199)
	at org.eclipse.jdt.core.manipulation.SharedASTProviderCore.getAST(SharedASTProviderCore.java:138)
	at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup.calculateASTandInform(SelectionListenerWithASTManager.java:166)
	at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup$1.run(SelectionListenerWithASTManager.java:151)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:63)

!ENTRY org.eclipse.jdt.core 4 4 2023-07-23 23:37:36.458
!MESSAGE Exception occurred during compilation unit conversion:
----------------------------------- SOURCE BEGIN -------------------------------------
package business;

import java.io.IOException;
import java.net.URISyntaxException;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.servlet.http.HttpServletRequest;

import org.apache.commons.lang3.StringUtils;
import org.codehaus.jettison.json.JSONException;
import org.jasypt.util.password.ConfigurablePasswordEncryptor;

import config.Params;
import modele.CagnotteDto;
import modele.Caissier;
import modele.CaissierDto;
import modele.Config;
import modele.Keno;
import modele.Partner;
import modele.PartnerDto;
import modele.ResPartner;
import superbetDAO.AirtimeDAO;
import superbetDAO.CagnotteDAO;
import superbetDAO.CaissierDAO;
import superbetDAO.ConfigDAO;
import superbetDAO.EffChoicekDAO;
import superbetDAO.GameCycleDAO;
import superbetDAO.KenoDAO;
import superbetDAO.MisekDAO;
import superbetDAO.Misek_tempDAO;
import superbetDAO.MisetDAO;
import superbetDAO.PartnerDAO;
import superbetDAO.SpinDAO;
import superbetDAO.UtilDAO;
import superbetDAO.VersementDAO;
import superbetDAO.api.exeception.DAOAPIException;
import superbetDAO.api.implementations.SuperGameDAOAPI;
import superbetDAO.api.interfaces.ISuperGameDAOAPILocal;

public final class ConfigForm {
	
	private static final String FIELD_CODERACE = "ncpartner";
	private static final String FIELD_ZONE = "nczone";
	
	private static final String FIELD_NOM_CAISSIER = "ncuser";
	private static final String FIELD_LOGIN = "nclogin";
	private static final String FIELD_PASS = "ncpass";
	private static final String FIELD_PROFIL = "ncprofil";
	private static final String FIELD_PARTNER = "ncsalle_cais";
	private static final String FIELD_JEU = "ncbonus_jeu";
	
	private static final String FIELD_BONUSK0 = "bonu_sum_min";
	private static final String FIELD_BONUSK1 = "bonu_sum_max";
	private static final String FIELD_BONUSK_RATE = "ncbonus_rate";
	private static final String FIELD_BONUSK_RESERVE = "ncbonus_reserve";
	private static final String FIELD_KCODERACE = "ncbonus_part1";
	private static final String FIELD_DATE1 = "cgddebut";
	private  ISuperGameDAOAPILocal  supergameAPI;
	
	private  String resultat = null;
	private  String resultat_u = null;
	private  String resultat_b = null;
	private  String resultat_c = null;
	private  Map<String, String> erreurs;
	private  Map<String, String> erreurs_u;
	private  Map<String, String> erreurs_b;
	private  Map<String, String> erreurs_c;
	private String action="";
	private String coderace="", dat1;
	private String zone="";
	
	private String bonusk0;
	private String bonusk1;
    private double mbonusk0;
    private double mbonusk1;
    private int ajout = 0;
   
	
	private  Map<String, String> user;
	private List<Partner> lpartner;
	
	private KenoDAO kenoDao;
	private MisetDAO misetDao;
	private EffChoicekDAO effchoicekDao;
	private MisekDAO misekDao;
	private VersementDAO verstDao;
	private PartnerDAO partnerDao;
	private Misek_tempDAO misektpDao;
	private UtilDAO utilDao;
	private CaissierDAO caissierDao;
	private ConfigDAO configDao;
	private SpinDAO spinDao;
	private AirtimeDAO airtimeDao;
	private GameCycleDAO game_cycleDao;
	private CagnotteDAO cagnotteDao;
	
	
	public String getResultat() {
		return resultat;
	}
	
	public Map<String, String> getErreurs_u() {
		return erreurs_u;
	}

	public void setErreurs_u(String champ, String message) {
		erreurs_u.put(champ, message);
	}

	public Map<String, String> getErreurs_b() {
		return erreurs_b;
	}

	public void setErreurs_b(String champ, String message) {
		erreurs_b.put(champ, message);
	}

	public Map<String, String> getErreurs_c() {
		return erreurs_c;
	}

	public void setErreurs_c(String champ, String message) {
		erreurs_c.put(champ, message);
	}
	
	public String getResultat_u() {
		return resultat_u;
	}

	public String getResultat_b() {
		return resultat_b;
	}

	public String getResultat_c() {
		return resultat_c;
	}
	public String getAction() {
		return action;
	}
	
	public String getCoderace() {
		return coderace;
	}
	
	public String getZone() {
		return zone;
	}
	
	public Map<String, String> getErreurs() {
		return erreurs;
	}
	public void setErreurs(String champ, String message) {
		erreurs.put(champ, message);
	}
	
	
	
	public Map<String, String> getUser() {
		return user;
	}

	public void setUser(String champ, String message) {
		user.put(champ, message);;
	}
	
	public String getBonusk0() {
		return bonusk0;
	}

	public void setBonusk0(String bonusk0) {
		this.bonusk0 = bonusk0;
	}

	public String getBonusk1() {
		return bonusk1;
	}

	public void setBonusk1(String bonusk1) {
		this.bonusk1 = bonusk1;
	}

	public void setResultat(String resultat) {
		this.resultat = resultat;
	}

	public String getDat1() {
		return dat1;
	}

	public void setDat1(String dat1) {
		this.dat1 = dat1;
	}

	public ConfigForm(KenoDAO kenoDao,MisetDAO misetDao,UtilDAO utilDao,EffChoicekDAO effchoicekDao,MisekDAO misekDao,
			VersementDAO verstDao, PartnerDAO partnerDao, Misek_tempDAO misektpDao, CaissierDAO caissierDao, ConfigDAO configDao, SpinDAO spinDao, 
			AirtimeDAO airtimeDao, GameCycleDAO game_cycleDao){
		this.kenoDao = kenoDao;
		this.misetDao = misetDao;
		this.effchoicekDao = effchoicekDao;
		this.misekDao = misekDao;
		this.verstDao = verstDao;
		this.partnerDao = partnerDao;
		this.misektpDao = misektpDao;
		this.utilDao = utilDao;
		this.caissierDao = caissierDao;
		this.configDao = configDao;
		this.spinDao = spinDao;
		this.airtimeDao = airtimeDao;
		this.game_cycleDao = game_cycleDao;
		supergameAPI = SuperGameDAOAPI.getInstance();
	}
	
	public void manage_config(HttpServletRequest request){
		erreurs = new HashMap<String, String>();
		erreurs_u = new HashMap<String, String>();
		erreurs_b = new HashMap<String, String>();
		erreurs_c = new HashMap<String, String>();
		action = getName( request, "idconfig" );// definit l'action Ã  traiter. ajout partner, ajout caissier...
		
		if(action.equalsIgnoreCase("addpartner")){
			
			coderace = getName( request, FIELD_CODERACE );
			zone = getName( request, FIELD_ZONE );
			
			// recupere tous les partenaires
		    lpartner = partnerDao.getAllPartners();
		   
			
			if(StringUtils.isBlank(coderace)){
				return;
			}
			
			String[] spaceCoderace = coderace.trim().split(" ");
			
			if(coderace.length() < 5){
				
	  		  	setErreurs(FIELD_CODERACE, "Longueur du nom très court");
	  		  	resultat = "Nom très court, 5 caractères minimum";
	  		  	return;
	  		  	
			}
			else if(spaceCoderace.length > 1) {
				
				setErreurs_u(FIELD_LOGIN, "Pas d'espace dans le nom du partenaire");
				resultat = "Pas d'espace dans le nom du partenaire.";
		  		return;
		  		
			}
			
			 Partner partn = partnerDao.find(coderace);
			 
			 if(partn == null) {
				 
				 Partner part = new Partner();
				 part.setCoderace(coderace);
				 part.setZone(zone);
				 part.setGroupe(1);
				 part.setActif(1);
				 part.setCob("opened");
				 boolean isAdded = addNewPartenaire(part);
				 
				 if(isAdded) {
					 
					 PartnerDto pdto = new PartnerDto();
					 pdto.setCoderace(coderace);
					 pdto.setZone(zone);
					 ResPartner resp = supergameAPI.getSuperGameDAO().submitPartner(Params.url, pdto);
					 
				 }
				 
			 }
			
			
		
			//Partner partner = partnerDao.find(coderace);
			
			 PartnerDto pdto = new PartnerDto();
			 pdto.setCoderace(coderace);
			 pdto.setZone(zone);
			 ResPartner resp = supergameAPI.getSuperGameDAO().submitPartner(Params.url, pdto);
			 Partner p = resp.getPartner();
			 String respMess = resp.getMessage();

			 Partner part = new Partner();
			 part.setCoderace(coderace);
			 part.setZone(zone);
			 part.setGroupe(1);
			 part.setActif(1);
			 part.setCob("opened");

			 if ("EXISTS".equalsIgnoreCase(respMess)) {

				 Partner partner = partnerDao.find(coderace);

				 if (partner == null) {
					 addNewPartenaire(part);
				 }
				 else {
					 setErreurs(FIELD_CODERACE, "present");
					 resultat = "Partenaire/Salle deja présent.";
				 }

			 }
			 else if("NEW".equalsIgnoreCase(respMess)) {
				 addNewPartenaire(part);
			 }

		 } catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
			 // TODO Auto-generated catch block
			 e.printStackTrace();
		 }
		}
		else if(action.equalsIgnoreCase("addcaissier")){
			user = new HashMap<String, String>();
			
			String nom_user = getName(request, FIELD_NOM_CAISSIER);
			String login = getName(request, FIELD_LOGIN);
			String pass = getPass(request, FIELD_PASS);
			String profil = getName(request, FIELD_PROFIL);
			String partner = getName(request, FIELD_PARTNER);
			
			if(StringUtils.isBlank(login) || StringUtils.isBlank(pass) || StringUtils.isBlank(profil) || StringUtils.isBlank(partner)){
				return;
			}
			
			String[] spaceLogin = login.trim().split(" ");
			if(login.length() < 5){
	  		  setErreurs_u(FIELD_LOGIN, "Longueur du login très court");
	  		  resultat_u = "Login très court, 5 caractères minimum";
	  		  return;
			}
			else if(spaceLogin.length > 1) {
				setErreurs_u(FIELD_LOGIN, "Pas d'espace dans le login");
		  		resultat_u = "Pas d'espace dans le login.";
		  		return;
			}
			
			
			if(pass.length() < 6){
	  		  setErreurs_u(FIELD_PASS, "Longueur du mot de passe très court");
	  		  resultat_u = "pass très court, 5 caractÃ¨res minimum";
	  		  return;
			}
			
			ConfigurablePasswordEncryptor passwordEncryptor = new ConfigurablePasswordEncryptor();
			passwordEncryptor.setAlgorithm( Params.ALGO_CHIFFREMENT );
			passwordEncryptor.setPlainDigest( false );
			
			Caissier caissier = caissierDao.findByLogin(login);
			Long idpartner = partnerDao.find(partner).getIdpartner();
			Long idprofil = 2L;
			if(profil.equalsIgnoreCase("CAISSIER")){
				idprofil = 2L;
			}
			else if(profil.equalsIgnoreCase("ADMINISTRATEUR")){
				idprofil = 1L;
			}
			
			String passChiffre = passwordEncryptor.encryptPassword(pass);
			setUser("nomc", nom_user);
			setUser("loginc", login);
			setUser("passc", "******");
			
			if(caissier == null){
				
				int n = 0;
				Caissier cais = new Caissier();
				cais.setNomc(nom_user);
				cais.setLoginc(login);
				cais.setMdpc(passChiffre);
				cais.setPartner(partner);
				cais.setProfil(idprofil);
				cais.setGrpe(1);
				//System.out.println(cais);
				n = caissierDao.create(cais);
				
				try {
					
					if (n > 0) {
						// Utilisateur crée en local
						
						CaissierDto caisDto = new CaissierDto();
						caisDto.setNomc(nom_user);
						caisDto.setLoginc(login);
						caisDto.setMdpc(pass);
						caisDto.setPartner(partner);
						caisDto.setProfil(idprofil);
						caisDto.setGrpe(1);
						//System.out.println(caisDto);
						Caissier caisse = supergameAPI.getSuperGameDAO().saveUser(Params.url, caisDto, partner);
						if(caisse == null) {
							
							caissierDao.delete(cais);
							setErreurs_u(FIELD_LOGIN, "Echec lors de la creation");
							resultat_u = "Echec lors de la creation.";
							return;
						}
						
						resultat_u="Caissier crée avec succes";
						
					}
					
				} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
					e.printStackTrace();
					return;
				}
				
//				if(n > 0){	
//					Caissier user = caissierDao.findByLogin(login);
//					//creation de la ligne des mouvements
//					airtimeDao.createMvt(user.getIdCaissier(), 0);
//					resultat_u="Caissier crée avec succes";
//					return;
//				}
//				else{
//					setErreurs_u(FIELD_LOGIN, "Echec de creation");
//					resultat_u = "Echec de creation";
//					return;
//				}
				
				
			}
			else{
				setErreurs_u(FIELD_LOGIN, "present");
				resultat_u = "Login utilisé, veuillez entrer un autre";
			}
		}
		else if(action.equalsIgnoreCase("addbonus")){
			bonusk0 = getName(request, FIELD_BONUSK0);
			bonusk1 = getName(request, FIELD_BONUSK1);
			String jeu = getName(request, FIELD_JEU);
			//System.out.println("BONUSMIN: "+bonusk0+" BONUSMAX: "+bonusk1+" | "+jeu);
			coderace = getName( request, FIELD_KCODERACE );
			String bonusk_rate = getName(request,  FIELD_BONUSK_RATE);
			//System.out.println("coderace: "+coderace+" | "+bonusk_rate);
			Long idpartner = partnerDao.find(coderace).getIdpartner();
			resultat_b = "";
			erreurs_b.clear();
			if(jeu == null || jeu.equalsIgnoreCase("")){
				setErreurs_b(FIELD_JEU, "Mauvais jeu");
				resultat_b = "Veuillez selectionner un type de jeu";
				return;
			}
			
			if(jeu.equalsIgnoreCase("keno")){
				if(coderace == null || coderace.equalsIgnoreCase("")){
					setErreurs_b(FIELD_KCODERACE, "Mauvais partenaire");
					resultat_b = "Veuillez selectionner un partenaire";
					return;
				}
				if(jeu == null || jeu.equalsIgnoreCase("")){
					setErreurs_b(FIELD_JEU, "Mauvais jeu");
					resultat_b = "Veuillez selectionner un type de jeu";
					return;
				}
				if(bonusk0 != null && !bonusk0.equalsIgnoreCase("")){
					mbonusk0 = Double.parseDouble(bonusk0);
				}
				else{
					setErreurs_b(FIELD_BONUSK0, "Mauvais montant min");
					resultat_b = "Veuillez saisir un montant min valide";
					return;
				}
				if(bonusk1 != null && !bonusk1.equalsIgnoreCase("")){
					mbonusk1 = Double.parseDouble(bonusk1);
				}
				else{
					setErreurs_b(FIELD_BONUSK1, "Mauvais montant max");
					resultat_b = "Veuillez saisir un montant max valide";
					return;
				}
				if(mbonusk0 > mbonusk1){
					setErreurs_b(FIELD_BONUSK1, "Mauvais montant");
					resultat_b = "Bonus Min supérieur à Bonus Max";
					return;
				}
				if(bonusk_rate == null || bonusk_rate.equalsIgnoreCase("")){
					bonusk_rate = "2";
					//return;
				}
				double k_rate = Double.parseDouble(bonusk_rate)/100;
				
				try {
					//ajout = configDao.updateBonusK(k_rate, mbonusk0, mbonusk1, coderace );
					ajout = supergameAPI.getSuperGameDAO().updateBonusK(Params.url, k_rate, mbonusk0, mbonusk1, coderace);
					if(ajout != 0){
						erreurs.clear();
						resultat_b = "Mise à jour du bonus effectué avec succès";
					}
					else{
						setErreurs_b("Update", "Echec de la mise à jour");
						resultat_b = "Echec de la mise à jour";
						return;
					}
				} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
				
			}
			else if(jeu.equalsIgnoreCase("spin")){
				
			}
			else if(jeu.equalsIgnoreCase("dog")){
				
			}
		}
		else if(action.equalsIgnoreCase("addcagnotte")){
			
			String detail_lot = "";
			CagnotteDto cagnotte = new CagnotteDto();
			
			dat1 = getName(request, FIELD_DATE1);
			String partner = getName(request, "ncbonus_part2");
			String lot = getName(request, "ncbonus_part");
			String heur = getName(request, "cg_heure");
			
			if(lot == null) {
				setErreurs_c("Update", "Veuillez choisir un lot");
				resultat_c = "Veuillez choisir un lot";
				return;
			}
			if(dat1 == null) {
				setErreurs_c("Update", "Veuillez choisir le jour de tombée");
				resultat_c = "Veuillez choisir le jour de tombée";
				return;
			}
			
			System.out.println("Lot: "+lot+" Date: "+dat1+":"+heur+" partner: "+partner);
			if(lot.equalsIgnoreCase("1")) {
				detail_lot = "tel";
			}
			else if(lot.equalsIgnoreCase("2")) {
				detail_lot = "woofer";
			}
			else if(lot.equalsIgnoreCase("3")) {
				detail_lot = "tricot";
			}
			else if(lot.equalsIgnoreCase("4")) {
				detail_lot = "conso";
			}
			else if(lot.equalsIgnoreCase("5")) {
				detail_lot = "ecran";
			}
			else if(lot.equalsIgnoreCase("6")) {
				detail_lot = "cash";
			}
			
			cagnotte.setLot(detail_lot);
			cagnotte.setHeur(dat1 + " " + heur);
			cagnotte.setJeu("");
			
			
			try {
				cagnotte = supergameAPI.getSuperGameDAO().saveJackpot(Params.url, cagnotte, partner);
				resultat_c = "Cagnotte mis à  jour";
			} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
				setErreurs_c("Update", "Erreur de creation cagnotte");
				resultat = "Erreur de creation cagnotte";
				return;
			}
			
		}
		
		
	}
	
	private String getName( HttpServletRequest request,String nomChamp ) {
        String valeur = request.getParameter( nomChamp );
       
       if ( valeur == null || valeur.trim().length() == 0) {
           return null;
       } else{
    
    	  return valeur.trim(); 
       }
       
	}
	
	private String getPass( HttpServletRequest request,String nomChamp ) {
        String valeur = request.getParameter( nomChamp );
       
       if ( valeur == null || valeur.trim().length() == 0) {
           return null;
       } else{
    	  return valeur.trim(); 
       }
       
	}
	
	private String getValRadio(HttpServletRequest request, String nomChamp){
		String valeur = request.getParameter(nomChamp);
		return valeur;
	}
	
	private boolean addNewPartenaire(Partner part) {
		
		int nb_race;
		Long n = 0L;
		n = partnerDao.create(part);
		
		if(n > 0){	
			
			//ajout d'une de configuration
			Config conf = new Config();
			conf.setCoderace(coderace);
			configDao.create(conf);
			
			//ajout d'un tirage par defaut
			Keno ken = new Keno();
			ken.setDrawnumK("1");
			ken.setMultiplicateur("0");
			ken.setDrawnumbK("'1-2-3-4-5-6-7-8-9-10-11-12-13-14-15-16-17-18-19-20'");
			ken.setCoderace(coderace);
			ken.setHeureTirage("01/01/2020-00:00:00");
			nb_race = kenoDao.create(ken);
			
			//misetDao.createFree(n);
			
			if(nb_race > 0){
				resultat = "Partenaire enregistré avec succes";
			}
			else{
				setErreurs(FIELD_CODERACE, "Echec de creation");
				resultat = "Echec de creation";
				return Boolean.FALSE;
			}
			
			for (Partner pp : lpartner) {
				pp.setActif(0);
				pp.setCob("closed");
				partnerDao.update(pp);
			}
		}
		else {
			setErreurs(FIELD_CODERACE, "Echec de creation");
			resultat = "Echec de creation";
			return Boolean.FALSE;
		}
		
		return Boolean.TRUE;
	}		
}

----------------------------------- SOURCE END -------------------------------------
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:344)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1272)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:868)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider$1.run(CoreASTProvider.java:294)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.createAST(CoreASTProvider.java:286)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.getAST(CoreASTProvider.java:199)
	at org.eclipse.jdt.core.manipulation.SharedASTProviderCore.getAST(SharedASTProviderCore.java:138)
	at org.eclipse.jdt.internal.ui.text.java.hover.NLSStringHover.internalGetHoverInfo(NLSStringHover.java:141)
	at org.eclipse.jdt.internal.ui.text.java.hover.NLSStringHover.getHoverInfo2(NLSStringHover.java:120)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:163)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:130)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo2(JavaEditorTextHoverProxy.java:89)
	at org.eclipse.jface.text.TextViewerHoverManager$1.run(TextViewerHoverManager.java:155)

!ENTRY org.eclipse.jdt.core.manipulation 4 2 2023-07-23 23:37:36.460
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.jdt.core.manipulation".
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:344)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1272)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:868)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider$1.run(CoreASTProvider.java:294)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.createAST(CoreASTProvider.java:286)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.getAST(CoreASTProvider.java:199)
	at org.eclipse.jdt.core.manipulation.SharedASTProviderCore.getAST(SharedASTProviderCore.java:138)
	at org.eclipse.jdt.internal.ui.text.java.hover.NLSStringHover.internalGetHoverInfo(NLSStringHover.java:141)
	at org.eclipse.jdt.internal.ui.text.java.hover.NLSStringHover.getHoverInfo2(NLSStringHover.java:120)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:163)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:130)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo2(JavaEditorTextHoverProxy.java:89)
	at org.eclipse.jface.text.TextViewerHoverManager$1.run(TextViewerHoverManager.java:155)

!ENTRY org.eclipse.jdt.core.manipulation 4 0 2023-07-23 23:37:36.461
!MESSAGE Error in JDT Core during AST creation
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:344)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1272)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:868)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider$1.run(CoreASTProvider.java:294)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.createAST(CoreASTProvider.java:286)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.getAST(CoreASTProvider.java:199)
	at org.eclipse.jdt.core.manipulation.SharedASTProviderCore.getAST(SharedASTProviderCore.java:138)
	at org.eclipse.jdt.internal.ui.text.java.hover.NLSStringHover.internalGetHoverInfo(NLSStringHover.java:141)
	at org.eclipse.jdt.internal.ui.text.java.hover.NLSStringHover.getHoverInfo2(NLSStringHover.java:120)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:163)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:130)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo2(JavaEditorTextHoverProxy.java:89)
	at org.eclipse.jface.text.TextViewerHoverManager$1.run(TextViewerHoverManager.java:155)

!ENTRY org.eclipse.jdt.core 4 4 2023-07-23 23:37:37.176
!MESSAGE Exception occurred during compilation unit conversion:
----------------------------------- SOURCE BEGIN -------------------------------------
package business;

import java.io.IOException;
import java.net.URISyntaxException;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.servlet.http.HttpServletRequest;

import org.apache.commons.lang3.StringUtils;
import org.codehaus.jettison.json.JSONException;
import org.jasypt.util.password.ConfigurablePasswordEncryptor;

import config.Params;
import modele.CagnotteDto;
import modele.Caissier;
import modele.CaissierDto;
import modele.Config;
import modele.Keno;
import modele.Partner;
import modele.PartnerDto;
import modele.ResPartner;
import superbetDAO.AirtimeDAO;
import superbetDAO.CagnotteDAO;
import superbetDAO.CaissierDAO;
import superbetDAO.ConfigDAO;
import superbetDAO.EffChoicekDAO;
import superbetDAO.GameCycleDAO;
import superbetDAO.KenoDAO;
import superbetDAO.MisekDAO;
import superbetDAO.Misek_tempDAO;
import superbetDAO.MisetDAO;
import superbetDAO.PartnerDAO;
import superbetDAO.SpinDAO;
import superbetDAO.UtilDAO;
import superbetDAO.VersementDAO;
import superbetDAO.api.exeception.DAOAPIException;
import superbetDAO.api.implementations.SuperGameDAOAPI;
import superbetDAO.api.interfaces.ISuperGameDAOAPILocal;

public final class ConfigForm {
	
	private static final String FIELD_CODERACE = "ncpartner";
	private static final String FIELD_ZONE = "nczone";
	
	private static final String FIELD_NOM_CAISSIER = "ncuser";
	private static final String FIELD_LOGIN = "nclogin";
	private static final String FIELD_PASS = "ncpass";
	private static final String FIELD_PROFIL = "ncprofil";
	private static final String FIELD_PARTNER = "ncsalle_cais";
	private static final String FIELD_JEU = "ncbonus_jeu";
	
	private static final String FIELD_BONUSK0 = "bonu_sum_min";
	private static final String FIELD_BONUSK1 = "bonu_sum_max";
	private static final String FIELD_BONUSK_RATE = "ncbonus_rate";
	private static final String FIELD_BONUSK_RESERVE = "ncbonus_reserve";
	private static final String FIELD_KCODERACE = "ncbonus_part1";
	private static final String FIELD_DATE1 = "cgddebut";
	private  ISuperGameDAOAPILocal  supergameAPI;
	
	private  String resultat = null;
	private  String resultat_u = null;
	private  String resultat_b = null;
	private  String resultat_c = null;
	private  Map<String, String> erreurs;
	private  Map<String, String> erreurs_u;
	private  Map<String, String> erreurs_b;
	private  Map<String, String> erreurs_c;
	private String action="";
	private String coderace="", dat1;
	private String zone="";
	
	private String bonusk0;
	private String bonusk1;
    private double mbonusk0;
    private double mbonusk1;
    private int ajout = 0;
   
	
	private  Map<String, String> user;
	private List<Partner> lpartner;
	
	private KenoDAO kenoDao;
	private MisetDAO misetDao;
	private EffChoicekDAO effchoicekDao;
	private MisekDAO misekDao;
	private VersementDAO verstDao;
	private PartnerDAO partnerDao;
	private Misek_tempDAO misektpDao;
	private UtilDAO utilDao;
	private CaissierDAO caissierDao;
	private ConfigDAO configDao;
	private SpinDAO spinDao;
	private AirtimeDAO airtimeDao;
	private GameCycleDAO game_cycleDao;
	private CagnotteDAO cagnotteDao;
	
	
	public String getResultat() {
		return resultat;
	}
	
	public Map<String, String> getErreurs_u() {
		return erreurs_u;
	}

	public void setErreurs_u(String champ, String message) {
		erreurs_u.put(champ, message);
	}

	public Map<String, String> getErreurs_b() {
		return erreurs_b;
	}

	public void setErreurs_b(String champ, String message) {
		erreurs_b.put(champ, message);
	}

	public Map<String, String> getErreurs_c() {
		return erreurs_c;
	}

	public void setErreurs_c(String champ, String message) {
		erreurs_c.put(champ, message);
	}
	
	public String getResultat_u() {
		return resultat_u;
	}

	public String getResultat_b() {
		return resultat_b;
	}

	public String getResultat_c() {
		return resultat_c;
	}
	public String getAction() {
		return action;
	}
	
	public String getCoderace() {
		return coderace;
	}
	
	public String getZone() {
		return zone;
	}
	
	public Map<String, String> getErreurs() {
		return erreurs;
	}
	public void setErreurs(String champ, String message) {
		erreurs.put(champ, message);
	}
	
	
	
	public Map<String, String> getUser() {
		return user;
	}

	public void setUser(String champ, String message) {
		user.put(champ, message);;
	}
	
	public String getBonusk0() {
		return bonusk0;
	}

	public void setBonusk0(String bonusk0) {
		this.bonusk0 = bonusk0;
	}

	public String getBonusk1() {
		return bonusk1;
	}

	public void setBonusk1(String bonusk1) {
		this.bonusk1 = bonusk1;
	}

	public void setResultat(String resultat) {
		this.resultat = resultat;
	}

	public String getDat1() {
		return dat1;
	}

	public void setDat1(String dat1) {
		this.dat1 = dat1;
	}

	public ConfigForm(KenoDAO kenoDao,MisetDAO misetDao,UtilDAO utilDao,EffChoicekDAO effchoicekDao,MisekDAO misekDao,
			VersementDAO verstDao, PartnerDAO partnerDao, Misek_tempDAO misektpDao, CaissierDAO caissierDao, ConfigDAO configDao, SpinDAO spinDao, 
			AirtimeDAO airtimeDao, GameCycleDAO game_cycleDao){
		this.kenoDao = kenoDao;
		this.misetDao = misetDao;
		this.effchoicekDao = effchoicekDao;
		this.misekDao = misekDao;
		this.verstDao = verstDao;
		this.partnerDao = partnerDao;
		this.misektpDao = misektpDao;
		this.utilDao = utilDao;
		this.caissierDao = caissierDao;
		this.configDao = configDao;
		this.spinDao = spinDao;
		this.airtimeDao = airtimeDao;
		this.game_cycleDao = game_cycleDao;
		supergameAPI = SuperGameDAOAPI.getInstance();
	}
	
	public void manage_config(HttpServletRequest request){
		erreurs = new HashMap<String, String>();
		erreurs_u = new HashMap<String, String>();
		erreurs_b = new HashMap<String, String>();
		erreurs_c = new HashMap<String, String>();
		action = getName( request, "idconfig" );// definit l'action Ã  traiter. ajout partner, ajout caissier...
		
		if(action.equalsIgnoreCase("addpartner")){
			
			coderace = getName( request, FIELD_CODERACE );
			zone = getName( request, FIELD_ZONE );
			
			// recupere tous les partenaires
		    lpartner = partnerDao.getAllPartners();
		   
			
			if(StringUtils.isBlank(coderace)){
				return;
			}
			
			String[] spaceCoderace = coderace.trim().split(" ");
			
			if(coderace.length() < 5){
				
	  		  	setErreurs(FIELD_CODERACE, "Longueur du nom très court");
	  		  	resultat = "Nom très court, 5 caractères minimum";
	  		  	return;
	  		  	
			}
			else if(spaceCoderace.length > 1) {
				
				setErreurs_u(FIELD_LOGIN, "Pas d'espace dans le nom du partenaire");
				resultat = "Pas d'espace dans le nom du partenaire.";
		  		return;
		  		
			}
		
			
			 Partner partn = partnerDao.find(coderace);
			 
			 if(partn == null) {
				 
				 Partner part = new Partner();
				 part.setCoderace(coderace);
				 part.setZone(zone);
				 part.setGroupe(1);
				 part.setActif(1);
				 part.setCob("opened");
				 boolean isAdded = addNewPartenaire(part);
				 
				 if(isAdded) {
					 
					 PartnerDto pdto = new PartnerDto();
					 pdto.setCoderace(coderace);
					 pdto.setZone(zone);
					 ResPartner resp = supergameAPI.getSuperGameDAO().submitPartner(Params.url, pdto);
					 
				 }
				 
			 }
			
			
		
			//Partner partner = partnerDao.find(coderace);
			
			 PartnerDto pdto = new PartnerDto();
			 pdto.setCoderace(coderace);
			 pdto.setZone(zone);
			 ResPartner resp = supergameAPI.getSuperGameDAO().submitPartner(Params.url, pdto);
			 Partner p = resp.getPartner();
			 String respMess = resp.getMessage();

			 Partner part = new Partner();
			 part.setCoderace(coderace);
			 part.setZone(zone);
			 part.setGroupe(1);
			 part.setActif(1);
			 part.setCob("opened");

			 if ("EXISTS".equalsIgnoreCase(respMess)) {

				 Partner partner = partnerDao.find(coderace);

				 if (partner == null) {
					 addNewPartenaire(part);
				 }
				 else {
					 setErreurs(FIELD_CODERACE, "present");
					 resultat = "Partenaire/Salle deja présent.";
				 }

			 }
			 else if("NEW".equalsIgnoreCase(respMess)) {
				 addNewPartenaire(part);
			 }

		 } catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
			 // TODO Auto-generated catch block
			 e.printStackTrace();
		 }
		}
		else if(action.equalsIgnoreCase("addcaissier")){
			user = new HashMap<String, String>();
			
			String nom_user = getName(request, FIELD_NOM_CAISSIER);
			String login = getName(request, FIELD_LOGIN);
			String pass = getPass(request, FIELD_PASS);
			String profil = getName(request, FIELD_PROFIL);
			String partner = getName(request, FIELD_PARTNER);
			
			if(StringUtils.isBlank(login) || StringUtils.isBlank(pass) || StringUtils.isBlank(profil) || StringUtils.isBlank(partner)){
				return;
			}
			
			String[] spaceLogin = login.trim().split(" ");
			if(login.length() < 5){
	  		  setErreurs_u(FIELD_LOGIN, "Longueur du login très court");
	  		  resultat_u = "Login très court, 5 caractères minimum";
	  		  return;
			}
			else if(spaceLogin.length > 1) {
				setErreurs_u(FIELD_LOGIN, "Pas d'espace dans le login");
		  		resultat_u = "Pas d'espace dans le login.";
		  		return;
			}
			
			
			if(pass.length() < 6){
	  		  setErreurs_u(FIELD_PASS, "Longueur du mot de passe très court");
	  		  resultat_u = "pass très court, 5 caractÃ¨res minimum";
	  		  return;
			}
			
			ConfigurablePasswordEncryptor passwordEncryptor = new ConfigurablePasswordEncryptor();
			passwordEncryptor.setAlgorithm( Params.ALGO_CHIFFREMENT );
			passwordEncryptor.setPlainDigest( false );
			
			Caissier caissier = caissierDao.findByLogin(login);
			Long idpartner = partnerDao.find(partner).getIdpartner();
			Long idprofil = 2L;
			if(profil.equalsIgnoreCase("CAISSIER")){
				idprofil = 2L;
			}
			else if(profil.equalsIgnoreCase("ADMINISTRATEUR")){
				idprofil = 1L;
			}
			
			String passChiffre = passwordEncryptor.encryptPassword(pass);
			setUser("nomc", nom_user);
			setUser("loginc", login);
			setUser("passc", "******");
			
			if(caissier == null){
				
				int n = 0;
				Caissier cais = new Caissier();
				cais.setNomc(nom_user);
				cais.setLoginc(login);
				cais.setMdpc(passChiffre);
				cais.setPartner(partner);
				cais.setProfil(idprofil);
				cais.setGrpe(1);
				//System.out.println(cais);
				n = caissierDao.create(cais);
				
				try {
					
					if (n > 0) {
						// Utilisateur crée en local
						
						CaissierDto caisDto = new CaissierDto();
						caisDto.setNomc(nom_user);
						caisDto.setLoginc(login);
						caisDto.setMdpc(pass);
						caisDto.setPartner(partner);
						caisDto.setProfil(idprofil);
						caisDto.setGrpe(1);
						//System.out.println(caisDto);
						Caissier caisse = supergameAPI.getSuperGameDAO().saveUser(Params.url, caisDto, partner);
						if(caisse == null) {
							
							caissierDao.delete(cais);
							setErreurs_u(FIELD_LOGIN, "Echec lors de la creation");
							resultat_u = "Echec lors de la creation.";
							return;
						}
						
						resultat_u="Caissier crée avec succes";
						
					}
					
				} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
					e.printStackTrace();
					return;
				}
				
//				if(n > 0){	
//					Caissier user = caissierDao.findByLogin(login);
//					//creation de la ligne des mouvements
//					airtimeDao.createMvt(user.getIdCaissier(), 0);
//					resultat_u="Caissier crée avec succes";
//					return;
//				}
//				else{
//					setErreurs_u(FIELD_LOGIN, "Echec de creation");
//					resultat_u = "Echec de creation";
//					return;
//				}
				
				
			}
			else{
				setErreurs_u(FIELD_LOGIN, "present");
				resultat_u = "Login utilisé, veuillez entrer un autre";
			}
		}
		else if(action.equalsIgnoreCase("addbonus")){
			bonusk0 = getName(request, FIELD_BONUSK0);
			bonusk1 = getName(request, FIELD_BONUSK1);
			String jeu = getName(request, FIELD_JEU);
			//System.out.println("BONUSMIN: "+bonusk0+" BONUSMAX: "+bonusk1+" | "+jeu);
			coderace = getName( request, FIELD_KCODERACE );
			String bonusk_rate = getName(request,  FIELD_BONUSK_RATE);
			//System.out.println("coderace: "+coderace+" | "+bonusk_rate);
			Long idpartner = partnerDao.find(coderace).getIdpartner();
			resultat_b = "";
			erreurs_b.clear();
			if(jeu == null || jeu.equalsIgnoreCase("")){
				setErreurs_b(FIELD_JEU, "Mauvais jeu");
				resultat_b = "Veuillez selectionner un type de jeu";
				return;
			}
			
			if(jeu.equalsIgnoreCase("keno")){
				if(coderace == null || coderace.equalsIgnoreCase("")){
					setErreurs_b(FIELD_KCODERACE, "Mauvais partenaire");
					resultat_b = "Veuillez selectionner un partenaire";
					return;
				}
				if(jeu == null || jeu.equalsIgnoreCase("")){
					setErreurs_b(FIELD_JEU, "Mauvais jeu");
					resultat_b = "Veuillez selectionner un type de jeu";
					return;
				}
				if(bonusk0 != null && !bonusk0.equalsIgnoreCase("")){
					mbonusk0 = Double.parseDouble(bonusk0);
				}
				else{
					setErreurs_b(FIELD_BONUSK0, "Mauvais montant min");
					resultat_b = "Veuillez saisir un montant min valide";
					return;
				}
				if(bonusk1 != null && !bonusk1.equalsIgnoreCase("")){
					mbonusk1 = Double.parseDouble(bonusk1);
				}
				else{
					setErreurs_b(FIELD_BONUSK1, "Mauvais montant max");
					resultat_b = "Veuillez saisir un montant max valide";
					return;
				}
				if(mbonusk0 > mbonusk1){
					setErreurs_b(FIELD_BONUSK1, "Mauvais montant");
					resultat_b = "Bonus Min supérieur à Bonus Max";
					return;
				}
				if(bonusk_rate == null || bonusk_rate.equalsIgnoreCase("")){
					bonusk_rate = "2";
					//return;
				}
				double k_rate = Double.parseDouble(bonusk_rate)/100;
				
				try {
					//ajout = configDao.updateBonusK(k_rate, mbonusk0, mbonusk1, coderace );
					ajout = supergameAPI.getSuperGameDAO().updateBonusK(Params.url, k_rate, mbonusk0, mbonusk1, coderace);
					if(ajout != 0){
						erreurs.clear();
						resultat_b = "Mise à jour du bonus effectué avec succès";
					}
					else{
						setErreurs_b("Update", "Echec de la mise à jour");
						resultat_b = "Echec de la mise à jour";
						return;
					}
				} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
				
			}
			else if(jeu.equalsIgnoreCase("spin")){
				
			}
			else if(jeu.equalsIgnoreCase("dog")){
				
			}
		}
		else if(action.equalsIgnoreCase("addcagnotte")){
			
			String detail_lot = "";
			CagnotteDto cagnotte = new CagnotteDto();
			
			dat1 = getName(request, FIELD_DATE1);
			String partner = getName(request, "ncbonus_part2");
			String lot = getName(request, "ncbonus_part");
			String heur = getName(request, "cg_heure");
			
			if(lot == null) {
				setErreurs_c("Update", "Veuillez choisir un lot");
				resultat_c = "Veuillez choisir un lot";
				return;
			}
			if(dat1 == null) {
				setErreurs_c("Update", "Veuillez choisir le jour de tombée");
				resultat_c = "Veuillez choisir le jour de tombée";
				return;
			}
			
			System.out.println("Lot: "+lot+" Date: "+dat1+":"+heur+" partner: "+partner);
			if(lot.equalsIgnoreCase("1")) {
				detail_lot = "tel";
			}
			else if(lot.equalsIgnoreCase("2")) {
				detail_lot = "woofer";
			}
			else if(lot.equalsIgnoreCase("3")) {
				detail_lot = "tricot";
			}
			else if(lot.equalsIgnoreCase("4")) {
				detail_lot = "conso";
			}
			else if(lot.equalsIgnoreCase("5")) {
				detail_lot = "ecran";
			}
			else if(lot.equalsIgnoreCase("6")) {
				detail_lot = "cash";
			}
			
			cagnotte.setLot(detail_lot);
			cagnotte.setHeur(dat1 + " " + heur);
			cagnotte.setJeu("");
			
			
			try {
				cagnotte = supergameAPI.getSuperGameDAO().saveJackpot(Params.url, cagnotte, partner);
				resultat_c = "Cagnotte mis à  jour";
			} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
				setErreurs_c("Update", "Erreur de creation cagnotte");
				resultat = "Erreur de creation cagnotte";
				return;
			}
			
		}
		
		
	}
	
	private String getName( HttpServletRequest request,String nomChamp ) {
        String valeur = request.getParameter( nomChamp );
       
       if ( valeur == null || valeur.trim().length() == 0) {
           return null;
       } else{
    
    	  return valeur.trim(); 
       }
       
	}
	
	private String getPass( HttpServletRequest request,String nomChamp ) {
        String valeur = request.getParameter( nomChamp );
       
       if ( valeur == null || valeur.trim().length() == 0) {
           return null;
       } else{
    	  return valeur.trim(); 
       }
       
	}
	
	private String getValRadio(HttpServletRequest request, String nomChamp){
		String valeur = request.getParameter(nomChamp);
		return valeur;
	}
	
	private boolean addNewPartenaire(Partner part) {
		
		int nb_race;
		Long n = 0L;
		n = partnerDao.create(part);
		
		if(n > 0){	
			
			//ajout d'une de configuration
			Config conf = new Config();
			conf.setCoderace(coderace);
			configDao.create(conf);
			
			//ajout d'un tirage par defaut
			Keno ken = new Keno();
			ken.setDrawnumK("1");
			ken.setMultiplicateur("0");
			ken.setDrawnumbK("'1-2-3-4-5-6-7-8-9-10-11-12-13-14-15-16-17-18-19-20'");
			ken.setCoderace(coderace);
			ken.setHeureTirage("01/01/2020-00:00:00");
			nb_race = kenoDao.create(ken);
			
			//misetDao.createFree(n);
			
			if(nb_race > 0){
				resultat = "Partenaire enregistré avec succes";
			}
			else{
				setErreurs(FIELD_CODERACE, "Echec de creation");
				resultat = "Echec de creation";
				return Boolean.FALSE;
			}
			
			for (Partner pp : lpartner) {
				pp.setActif(0);
				pp.setCob("closed");
				partnerDao.update(pp);
			}
		}
		else {
			setErreurs(FIELD_CODERACE, "Echec de creation");
			resultat = "Echec de creation";
			return Boolean.FALSE;
		}
		
		return Boolean.TRUE;
	}		
}

----------------------------------- SOURCE END -------------------------------------
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:540)
	at org.eclipse.jdt.internal.core.CompilationUnit.buildStructure(CompilationUnit.java:201)
	at org.eclipse.jdt.internal.core.Openable.generateInfos(Openable.java:266)
	at org.eclipse.jdt.internal.core.JavaElement.openWhenClosed(JavaElement.java:597)
	at org.eclipse.jdt.internal.core.CompilationUnit.makeConsistent(CompilationUnit.java:1142)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:173)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:94)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:740)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:806)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1319)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:132)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:94)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:91)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:158)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:94)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:107)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:76)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:207)

!ENTRY org.eclipse.jdt.ui 4 2 2023-07-23 23:37:37.178
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.jdt.ui".
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:540)
	at org.eclipse.jdt.internal.core.CompilationUnit.buildStructure(CompilationUnit.java:201)
	at org.eclipse.jdt.internal.core.Openable.generateInfos(Openable.java:266)
	at org.eclipse.jdt.internal.core.JavaElement.openWhenClosed(JavaElement.java:597)
	at org.eclipse.jdt.internal.core.CompilationUnit.makeConsistent(CompilationUnit.java:1142)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:173)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:94)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:740)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:806)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1319)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:132)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:94)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:91)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:158)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:94)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:107)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:76)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:207)

!ENTRY org.eclipse.jdt.ui 4 0 2023-07-23 23:37:37.179
!MESSAGE Error in JDT Core during reconcile
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:540)
	at org.eclipse.jdt.internal.core.CompilationUnit.buildStructure(CompilationUnit.java:201)
	at org.eclipse.jdt.internal.core.Openable.generateInfos(Openable.java:266)
	at org.eclipse.jdt.internal.core.JavaElement.openWhenClosed(JavaElement.java:597)
	at org.eclipse.jdt.internal.core.CompilationUnit.makeConsistent(CompilationUnit.java:1142)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:173)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:94)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:740)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:806)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1319)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:132)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:94)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:91)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:158)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:94)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:107)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:76)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:207)

!ENTRY org.eclipse.jdt.core 4 4 2023-07-23 23:37:37.294
!MESSAGE Exception occurred during compilation unit conversion:
----------------------------------- SOURCE BEGIN -------------------------------------
package business;

import java.io.IOException;
import java.net.URISyntaxException;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.servlet.http.HttpServletRequest;

import org.apache.commons.lang3.StringUtils;
import org.codehaus.jettison.json.JSONException;
import org.jasypt.util.password.ConfigurablePasswordEncryptor;

import config.Params;
import modele.CagnotteDto;
import modele.Caissier;
import modele.CaissierDto;
import modele.Config;
import modele.Keno;
import modele.Partner;
import modele.PartnerDto;
import modele.ResPartner;
import superbetDAO.AirtimeDAO;
import superbetDAO.CagnotteDAO;
import superbetDAO.CaissierDAO;
import superbetDAO.ConfigDAO;
import superbetDAO.EffChoicekDAO;
import superbetDAO.GameCycleDAO;
import superbetDAO.KenoDAO;
import superbetDAO.MisekDAO;
import superbetDAO.Misek_tempDAO;
import superbetDAO.MisetDAO;
import superbetDAO.PartnerDAO;
import superbetDAO.SpinDAO;
import superbetDAO.UtilDAO;
import superbetDAO.VersementDAO;
import superbetDAO.api.exeception.DAOAPIException;
import superbetDAO.api.implementations.SuperGameDAOAPI;
import superbetDAO.api.interfaces.ISuperGameDAOAPILocal;

public final class ConfigForm {
	
	private static final String FIELD_CODERACE = "ncpartner";
	private static final String FIELD_ZONE = "nczone";
	
	private static final String FIELD_NOM_CAISSIER = "ncuser";
	private static final String FIELD_LOGIN = "nclogin";
	private static final String FIELD_PASS = "ncpass";
	private static final String FIELD_PROFIL = "ncprofil";
	private static final String FIELD_PARTNER = "ncsalle_cais";
	private static final String FIELD_JEU = "ncbonus_jeu";
	
	private static final String FIELD_BONUSK0 = "bonu_sum_min";
	private static final String FIELD_BONUSK1 = "bonu_sum_max";
	private static final String FIELD_BONUSK_RATE = "ncbonus_rate";
	private static final String FIELD_BONUSK_RESERVE = "ncbonus_reserve";
	private static final String FIELD_KCODERACE = "ncbonus_part1";
	private static final String FIELD_DATE1 = "cgddebut";
	private  ISuperGameDAOAPILocal  supergameAPI;
	
	private  String resultat = null;
	private  String resultat_u = null;
	private  String resultat_b = null;
	private  String resultat_c = null;
	private  Map<String, String> erreurs;
	private  Map<String, String> erreurs_u;
	private  Map<String, String> erreurs_b;
	private  Map<String, String> erreurs_c;
	private String action="";
	private String coderace="", dat1;
	private String zone="";
	
	private String bonusk0;
	private String bonusk1;
    private double mbonusk0;
    private double mbonusk1;
    private int ajout = 0;
   
	
	private  Map<String, String> user;
	private List<Partner> lpartner;
	
	private KenoDAO kenoDao;
	private MisetDAO misetDao;
	private EffChoicekDAO effchoicekDao;
	private MisekDAO misekDao;
	private VersementDAO verstDao;
	private PartnerDAO partnerDao;
	private Misek_tempDAO misektpDao;
	private UtilDAO utilDao;
	private CaissierDAO caissierDao;
	private ConfigDAO configDao;
	private SpinDAO spinDao;
	private AirtimeDAO airtimeDao;
	private GameCycleDAO game_cycleDao;
	private CagnotteDAO cagnotteDao;
	
	
	public String getResultat() {
		return resultat;
	}
	
	public Map<String, String> getErreurs_u() {
		return erreurs_u;
	}

	public void setErreurs_u(String champ, String message) {
		erreurs_u.put(champ, message);
	}

	public Map<String, String> getErreurs_b() {
		return erreurs_b;
	}

	public void setErreurs_b(String champ, String message) {
		erreurs_b.put(champ, message);
	}

	public Map<String, String> getErreurs_c() {
		return erreurs_c;
	}

	public void setErreurs_c(String champ, String message) {
		erreurs_c.put(champ, message);
	}
	
	public String getResultat_u() {
		return resultat_u;
	}

	public String getResultat_b() {
		return resultat_b;
	}

	public String getResultat_c() {
		return resultat_c;
	}
	public String getAction() {
		return action;
	}
	
	public String getCoderace() {
		return coderace;
	}
	
	public String getZone() {
		return zone;
	}
	
	public Map<String, String> getErreurs() {
		return erreurs;
	}
	public void setErreurs(String champ, String message) {
		erreurs.put(champ, message);
	}
	
	
	
	public Map<String, String> getUser() {
		return user;
	}

	public void setUser(String champ, String message) {
		user.put(champ, message);;
	}
	
	public String getBonusk0() {
		return bonusk0;
	}

	public void setBonusk0(String bonusk0) {
		this.bonusk0 = bonusk0;
	}

	public String getBonusk1() {
		return bonusk1;
	}

	public void setBonusk1(String bonusk1) {
		this.bonusk1 = bonusk1;
	}

	public void setResultat(String resultat) {
		this.resultat = resultat;
	}

	public String getDat1() {
		return dat1;
	}

	public void setDat1(String dat1) {
		this.dat1 = dat1;
	}

	public ConfigForm(KenoDAO kenoDao,MisetDAO misetDao,UtilDAO utilDao,EffChoicekDAO effchoicekDao,MisekDAO misekDao,
			VersementDAO verstDao, PartnerDAO partnerDao, Misek_tempDAO misektpDao, CaissierDAO caissierDao, ConfigDAO configDao, SpinDAO spinDao, 
			AirtimeDAO airtimeDao, GameCycleDAO game_cycleDao){
		this.kenoDao = kenoDao;
		this.misetDao = misetDao;
		this.effchoicekDao = effchoicekDao;
		this.misekDao = misekDao;
		this.verstDao = verstDao;
		this.partnerDao = partnerDao;
		this.misektpDao = misektpDao;
		this.utilDao = utilDao;
		this.caissierDao = caissierDao;
		this.configDao = configDao;
		this.spinDao = spinDao;
		this.airtimeDao = airtimeDao;
		this.game_cycleDao = game_cycleDao;
		supergameAPI = SuperGameDAOAPI.getInstance();
	}
	
	public void manage_config(HttpServletRequest request){
		erreurs = new HashMap<String, String>();
		erreurs_u = new HashMap<String, String>();
		erreurs_b = new HashMap<String, String>();
		erreurs_c = new HashMap<String, String>();
		action = getName( request, "idconfig" );// definit l'action Ã  traiter. ajout partner, ajout caissier...
		
		if(action.equalsIgnoreCase("addpartner")){
			
			coderace = getName( request, FIELD_CODERACE );
			zone = getName( request, FIELD_ZONE );
			
			// recupere tous les partenaires
		    lpartner = partnerDao.getAllPartners();
		   
			
			if(StringUtils.isBlank(coderace)){
				return;
			}
			
			String[] spaceCoderace = coderace.trim().split(" ");
			
			if(coderace.length() < 5){
				
	  		  	setErreurs(FIELD_CODERACE, "Longueur du nom très court");
	  		  	resultat = "Nom très court, 5 caractères minimum";
	  		  	return;
	  		  	
			}
			else if(spaceCoderace.length > 1) {
				
				setErreurs_u(FIELD_LOGIN, "Pas d'espace dans le nom du partenaire");
				resultat = "Pas d'espace dans le nom du partenaire.";
		  		return;
		  		
			}
		
			
			 Partner partn = partnerDao.find(coderace);
			 
			 if(partn == null) {
				 
				 Partner part = new Partner();
				 part.setCoderace(coderace);
				 part.setZone(zone);
				 part.setGroupe(1);
				 part.setActif(1);
				 part.setCob("opened");
				 boolean isAdded = addNewPartenaire(part);
				 
				 if(isAdded) {
					 
					 PartnerDto pdto = new PartnerDto();
					 pdto.setCoderace(coderace);
					 pdto.setZone(zone);
					 ResPartner resp = supergameAPI.getSuperGameDAO().submitPartner(Params.url, pdto);
					 
				 }
				 
			 }
			
			
		
			//Partner partner = partnerDao.find(coderace);
			
			 PartnerDto pdto = new PartnerDto();
			 pdto.setCoderace(coderace);
			 pdto.setZone(zone);
			 ResPartner resp = supergameAPI.getSuperGameDAO().submitPartner(Params.url, pdto);
			 Partner p = resp.getPartner();
			 String respMess = resp.getMessage();

			 Partner part = new Partner();
			 part.setCoderace(coderace);
			 part.setZone(zone);
			 part.setGroupe(1);
			 part.setActif(1);
			 part.setCob("opened");

			 if ("EXISTS".equalsIgnoreCase(respMess)) {

				 Partner partner = partnerDao.find(coderace);

				 if (partner == null) {
					 addNewPartenaire(part);
				 }
				 else {
					 setErreurs(FIELD_CODERACE, "present");
					 resultat = "Partenaire/Salle deja présent.";
				 }

			 }
			 else if("NEW".equalsIgnoreCase(respMess)) {
				 addNewPartenaire(part);
			 }

		 } catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
			 // TODO Auto-generated catch block
			 e.printStackTrace();
		 }
		}
		else if(action.equalsIgnoreCase("addcaissier")){
			user = new HashMap<String, String>();
			
			String nom_user = getName(request, FIELD_NOM_CAISSIER);
			String login = getName(request, FIELD_LOGIN);
			String pass = getPass(request, FIELD_PASS);
			String profil = getName(request, FIELD_PROFIL);
			String partner = getName(request, FIELD_PARTNER);
			
			if(StringUtils.isBlank(login) || StringUtils.isBlank(pass) || StringUtils.isBlank(profil) || StringUtils.isBlank(partner)){
				return;
			}
			
			String[] spaceLogin = login.trim().split(" ");
			if(login.length() < 5){
	  		  setErreurs_u(FIELD_LOGIN, "Longueur du login très court");
	  		  resultat_u = "Login très court, 5 caractères minimum";
	  		  return;
			}
			else if(spaceLogin.length > 1) {
				setErreurs_u(FIELD_LOGIN, "Pas d'espace dans le login");
		  		resultat_u = "Pas d'espace dans le login.";
		  		return;
			}
			
			
			if(pass.length() < 6){
	  		  setErreurs_u(FIELD_PASS, "Longueur du mot de passe très court");
	  		  resultat_u = "pass très court, 5 caractÃ¨res minimum";
	  		  return;
			}
			
			ConfigurablePasswordEncryptor passwordEncryptor = new ConfigurablePasswordEncryptor();
			passwordEncryptor.setAlgorithm( Params.ALGO_CHIFFREMENT );
			passwordEncryptor.setPlainDigest( false );
			
			Caissier caissier = caissierDao.findByLogin(login);
			Long idpartner = partnerDao.find(partner).getIdpartner();
			Long idprofil = 2L;
			if(profil.equalsIgnoreCase("CAISSIER")){
				idprofil = 2L;
			}
			else if(profil.equalsIgnoreCase("ADMINISTRATEUR")){
				idprofil = 1L;
			}
			
			String passChiffre = passwordEncryptor.encryptPassword(pass);
			setUser("nomc", nom_user);
			setUser("loginc", login);
			setUser("passc", "******");
			
			if(caissier == null){
				
				int n = 0;
				Caissier cais = new Caissier();
				cais.setNomc(nom_user);
				cais.setLoginc(login);
				cais.setMdpc(passChiffre);
				cais.setPartner(partner);
				cais.setProfil(idprofil);
				cais.setGrpe(1);
				//System.out.println(cais);
				n = caissierDao.create(cais);
				
				try {
					
					if (n > 0) {
						// Utilisateur crée en local
						
						CaissierDto caisDto = new CaissierDto();
						caisDto.setNomc(nom_user);
						caisDto.setLoginc(login);
						caisDto.setMdpc(pass);
						caisDto.setPartner(partner);
						caisDto.setProfil(idprofil);
						caisDto.setGrpe(1);
						//System.out.println(caisDto);
						Caissier caisse = supergameAPI.getSuperGameDAO().saveUser(Params.url, caisDto, partner);
						if(caisse == null) {
							
							caissierDao.delete(cais);
							setErreurs_u(FIELD_LOGIN, "Echec lors de la creation");
							resultat_u = "Echec lors de la creation.";
							return;
						}
						
						resultat_u="Caissier crée avec succes";
						
					}
					
				} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
					e.printStackTrace();
					return;
				}
				
//				if(n > 0){	
//					Caissier user = caissierDao.findByLogin(login);
//					//creation de la ligne des mouvements
//					airtimeDao.createMvt(user.getIdCaissier(), 0);
//					resultat_u="Caissier crée avec succes";
//					return;
//				}
//				else{
//					setErreurs_u(FIELD_LOGIN, "Echec de creation");
//					resultat_u = "Echec de creation";
//					return;
//				}
				
				
			}
			else{
				setErreurs_u(FIELD_LOGIN, "present");
				resultat_u = "Login utilisé, veuillez entrer un autre";
			}
		}
		else if(action.equalsIgnoreCase("addbonus")){
			bonusk0 = getName(request, FIELD_BONUSK0);
			bonusk1 = getName(request, FIELD_BONUSK1);
			String jeu = getName(request, FIELD_JEU);
			//System.out.println("BONUSMIN: "+bonusk0+" BONUSMAX: "+bonusk1+" | "+jeu);
			coderace = getName( request, FIELD_KCODERACE );
			String bonusk_rate = getName(request,  FIELD_BONUSK_RATE);
			//System.out.println("coderace: "+coderace+" | "+bonusk_rate);
			Long idpartner = partnerDao.find(coderace).getIdpartner();
			resultat_b = "";
			erreurs_b.clear();
			if(jeu == null || jeu.equalsIgnoreCase("")){
				setErreurs_b(FIELD_JEU, "Mauvais jeu");
				resultat_b = "Veuillez selectionner un type de jeu";
				return;
			}
			
			if(jeu.equalsIgnoreCase("keno")){
				if(coderace == null || coderace.equalsIgnoreCase("")){
					setErreurs_b(FIELD_KCODERACE, "Mauvais partenaire");
					resultat_b = "Veuillez selectionner un partenaire";
					return;
				}
				if(jeu == null || jeu.equalsIgnoreCase("")){
					setErreurs_b(FIELD_JEU, "Mauvais jeu");
					resultat_b = "Veuillez selectionner un type de jeu";
					return;
				}
				if(bonusk0 != null && !bonusk0.equalsIgnoreCase("")){
					mbonusk0 = Double.parseDouble(bonusk0);
				}
				else{
					setErreurs_b(FIELD_BONUSK0, "Mauvais montant min");
					resultat_b = "Veuillez saisir un montant min valide";
					return;
				}
				if(bonusk1 != null && !bonusk1.equalsIgnoreCase("")){
					mbonusk1 = Double.parseDouble(bonusk1);
				}
				else{
					setErreurs_b(FIELD_BONUSK1, "Mauvais montant max");
					resultat_b = "Veuillez saisir un montant max valide";
					return;
				}
				if(mbonusk0 > mbonusk1){
					setErreurs_b(FIELD_BONUSK1, "Mauvais montant");
					resultat_b = "Bonus Min supérieur à Bonus Max";
					return;
				}
				if(bonusk_rate == null || bonusk_rate.equalsIgnoreCase("")){
					bonusk_rate = "2";
					//return;
				}
				double k_rate = Double.parseDouble(bonusk_rate)/100;
				
				try {
					//ajout = configDao.updateBonusK(k_rate, mbonusk0, mbonusk1, coderace );
					ajout = supergameAPI.getSuperGameDAO().updateBonusK(Params.url, k_rate, mbonusk0, mbonusk1, coderace);
					if(ajout != 0){
						erreurs.clear();
						resultat_b = "Mise à jour du bonus effectué avec succès";
					}
					else{
						setErreurs_b("Update", "Echec de la mise à jour");
						resultat_b = "Echec de la mise à jour";
						return;
					}
				} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
				
			}
			else if(jeu.equalsIgnoreCase("spin")){
				
			}
			else if(jeu.equalsIgnoreCase("dog")){
				
			}
		}
		else if(action.equalsIgnoreCase("addcagnotte")){
			
			String detail_lot = "";
			CagnotteDto cagnotte = new CagnotteDto();
			
			dat1 = getName(request, FIELD_DATE1);
			String partner = getName(request, "ncbonus_part2");
			String lot = getName(request, "ncbonus_part");
			String heur = getName(request, "cg_heure");
			
			if(lot == null) {
				setErreurs_c("Update", "Veuillez choisir un lot");
				resultat_c = "Veuillez choisir un lot";
				return;
			}
			if(dat1 == null) {
				setErreurs_c("Update", "Veuillez choisir le jour de tombée");
				resultat_c = "Veuillez choisir le jour de tombée";
				return;
			}
			
			System.out.println("Lot: "+lot+" Date: "+dat1+":"+heur+" partner: "+partner);
			if(lot.equalsIgnoreCase("1")) {
				detail_lot = "tel";
			}
			else if(lot.equalsIgnoreCase("2")) {
				detail_lot = "woofer";
			}
			else if(lot.equalsIgnoreCase("3")) {
				detail_lot = "tricot";
			}
			else if(lot.equalsIgnoreCase("4")) {
				detail_lot = "conso";
			}
			else if(lot.equalsIgnoreCase("5")) {
				detail_lot = "ecran";
			}
			else if(lot.equalsIgnoreCase("6")) {
				detail_lot = "cash";
			}
			
			cagnotte.setLot(detail_lot);
			cagnotte.setHeur(dat1 + " " + heur);
			cagnotte.setJeu("");
			
			
			try {
				cagnotte = supergameAPI.getSuperGameDAO().saveJackpot(Params.url, cagnotte, partner);
				resultat_c = "Cagnotte mis à  jour";
			} catch (IOException | JSONException | URISyntaxException | DAOAPIException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
				setErreurs_c("Update", "Erreur de creation cagnotte");
				resultat = "Erreur de creation cagnotte";
				return;
			}
			
		}
		
		
	}
	
	private String getName( HttpServletRequest request,String nomChamp ) {
        String valeur = request.getParameter( nomChamp );
       
       if ( valeur == null || valeur.trim().length() == 0) {
           return null;
       } else{
    
    	  return valeur.trim(); 
       }
       
	}
	
	private String getPass( HttpServletRequest request,String nomChamp ) {
        String valeur = request.getParameter( nomChamp );
       
       if ( valeur == null || valeur.trim().length() == 0) {
           return null;
       } else{
    	  return valeur.trim(); 
       }
       
	}
	
	private String getValRadio(HttpServletRequest request, String nomChamp){
		String valeur = request.getParameter(nomChamp);
		return valeur;
	}
	
	private boolean addNewPartenaire(Partner part) {
		
		int nb_race;
		Long n = 0L;
		n = partnerDao.create(part);
		
		if(n > 0){	
			
			//ajout d'une de configuration
			Config conf = new Config();
			conf.setCoderace(coderace);
			configDao.create(conf);
			
			//ajout d'un tirage par defaut
			Keno ken = new Keno();
			ken.setDrawnumK("1");
			ken.setMultiplicateur("0");
			ken.setDrawnumbK("'1-2-3-4-5-6-7-8-9-10-11-12-13-14-15-16-17-18-19-20'");
			ken.setCoderace(coderace);
			ken.setHeureTirage("01/01/2020-00:00:00");
			nb_race = kenoDao.create(ken);
			
			//misetDao.createFree(n);
			
			if(nb_race > 0){
				resultat = "Partenaire enregistré avec succes";
			}
			else{
				setErreurs(FIELD_CODERACE, "Echec de creation");
				resultat = "Echec de creation";
				return Boolean.FALSE;
			}
			
			for (Partner pp : lpartner) {
				pp.setActif(0);
				pp.setCob("closed");
				partnerDao.update(pp);
			}
		}
		else {
			setErreurs(FIELD_CODERACE, "Echec de creation");
			resultat = "Echec de creation";
			return Boolean.FALSE;
		}
		
		return Boolean.TRUE;
	}		
}

----------------------------------- SOURCE END -------------------------------------
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:344)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1272)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:868)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider$1.run(CoreASTProvider.java:294)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.createAST(CoreASTProvider.java:286)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.getAST(CoreASTProvider.java:199)
	at org.eclipse.jdt.core.manipulation.SharedASTProviderCore.getAST(SharedASTProviderCore.java:138)
	at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup.calculateASTandInform(SelectionListenerWithASTManager.java:166)
	at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup$1.run(SelectionListenerWithASTManager.java:151)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:63)

!ENTRY org.eclipse.jdt.core.manipulation 4 2 2023-07-23 23:37:37.296
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.jdt.core.manipulation".
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:344)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1272)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:868)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider$1.run(CoreASTProvider.java:294)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.createAST(CoreASTProvider.java:286)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.getAST(CoreASTProvider.java:199)
	at org.eclipse.jdt.core.manipulation.SharedASTProviderCore.getAST(SharedASTProviderCore.java:138)
	at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup.calculateASTandInform(SelectionListenerWithASTManager.java:166)
	at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup$1.run(SelectionListenerWithASTManager.java:151)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:63)

!ENTRY org.eclipse.jdt.core.manipulation 4 0 2023-07-23 23:37:37.297
!MESSAGE Error in JDT Core during AST creation
!STACK 0
java.lang.IllegalArgumentException
	at org.eclipse.jdt.core.dom.InfixExpression.setOperator(InfixExpression.java:383)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1287)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2047)
	at org.eclipse.jdt.core.dom.ASTConverter.convertToParenthesizedExpression(ASTConverter.java:3853)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1953)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1204)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1990)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3095)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:751)
	at org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:208)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:3390)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:344)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1272)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:868)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider$1.run(CoreASTProvider.java:294)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.createAST(CoreASTProvider.java:286)
	at org.eclipse.jdt.core.manipulation.CoreASTProvider.getAST(CoreASTProvider.java:199)
	at org.eclipse.jdt.core.manipulation.SharedASTProviderCore.getAST(SharedASTProviderCore.java:138)
	at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup.calculateASTandInform(SelectionListenerWithASTManager.java:166)
	at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup$1.run(SelectionListenerWithASTManager.java:151)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:63)

!ENTRY org.eclipse.lsp4e 4 0 2023-07-24 21:44:03.551
!MESSAGE org.eclipse.lsp4j.jsonrpc.JsonRpcException: java.io.IOException: Le canal de communication est sur le point d’être fermé
!STACK 0
java.util.concurrent.ExecutionException: org.eclipse.lsp4j.jsonrpc.JsonRpcException: java.io.IOException: Le canal de communication est sur le point d’être fermé
	at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:396)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2096)
	at org.eclipse.lsp4e.LanguageServerWrapper.lambda$12(LanguageServerWrapper.java:456)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.exec(CompletableFuture.java:1796)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182)
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165)
Caused by: org.eclipse.lsp4j.jsonrpc.JsonRpcException: java.io.IOException: Le canal de communication est sur le point d’être fermé
	at org.eclipse.lsp4j.jsonrpc.json.StreamMessageConsumer.consume(StreamMessageConsumer.java:72)
	at org.eclipse.lsp4e.LanguageServerWrapper.lambda$3(LanguageServerWrapper.java:270)
	at org.eclipse.lsp4j.jsonrpc.RemoteEndpoint.request(RemoteEndpoint.java:161)
	at org.eclipse.lsp4j.jsonrpc.services.EndpointProxy.invoke(EndpointProxy.java:91)
	at jdk.proxy12/jdk.proxy12.$Proxy35.shutdown(Unknown Source)
	at org.eclipse.lsp4e.LanguageServerWrapper.lambda$12(LanguageServerWrapper.java:454)
	... 7 more
Caused by: java.io.IOException: Le canal de communication est sur le point d’être fermé
	at java.base/java.io.FileOutputStream.writeBytes(Native Method)
	at java.base/java.io.FileOutputStream.write(FileOutputStream.java:349)
	at java.base/java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:81)
	at java.base/java.io.BufferedOutputStream.flush(BufferedOutputStream.java:142)
	at org.eclipse.lsp4j.jsonrpc.json.StreamMessageConsumer.consume(StreamMessageConsumer.java:69)
	... 12 more

!ENTRY org.eclipse.lsp4e 4 0 2023-07-24 21:44:03.564
!MESSAGE org.eclipse.lsp4j.jsonrpc.JsonRpcException: java.io.IOException: Le canal de communication est sur le point d’être fermé
!STACK 0
java.util.concurrent.ExecutionException: org.eclipse.lsp4j.jsonrpc.JsonRpcException: java.io.IOException: Le canal de communication est sur le point d’être fermé
	at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:396)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2096)
	at org.eclipse.lsp4e.LanguageServerWrapper.lambda$12(LanguageServerWrapper.java:456)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.exec(CompletableFuture.java:1796)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182)
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165)
Caused by: org.eclipse.lsp4j.jsonrpc.JsonRpcException: java.io.IOException: Le canal de communication est sur le point d’être fermé
	at org.eclipse.lsp4j.jsonrpc.json.StreamMessageConsumer.consume(StreamMessageConsumer.java:72)
	at org.eclipse.lsp4e.LanguageServerWrapper.lambda$3(LanguageServerWrapper.java:270)
	at org.eclipse.lsp4j.jsonrpc.RemoteEndpoint.request(RemoteEndpoint.java:161)
	at org.eclipse.lsp4j.jsonrpc.services.EndpointProxy.invoke(EndpointProxy.java:91)
	at jdk.proxy12/jdk.proxy12.$Proxy34.shutdown(Unknown Source)
	at org.eclipse.lsp4e.LanguageServerWrapper.lambda$12(LanguageServerWrapper.java:454)
	... 7 more
Caused by: java.io.IOException: Le canal de communication est sur le point d’être fermé
	at java.base/java.io.FileOutputStream.writeBytes(Native Method)
	at java.base/java.io.FileOutputStream.write(FileOutputStream.java:349)
	at java.base/java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:81)
	at java.base/java.io.BufferedOutputStream.flush(BufferedOutputStream.java:142)
	at org.eclipse.lsp4j.jsonrpc.json.StreamMessageConsumer.consume(StreamMessageConsumer.java:69)
	... 12 more

!ENTRY org.eclipse.lsp4e 4 0 2023-07-24 21:44:03.569
!MESSAGE org.eclipse.lsp4j.jsonrpc.JsonRpcException: java.io.IOException: Le canal de communication est sur le point d’être fermé
!STACK 0
java.util.concurrent.ExecutionException: org.eclipse.lsp4j.jsonrpc.JsonRpcException: java.io.IOException: Le canal de communication est sur le point d’être fermé
	at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:396)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2096)
	at org.eclipse.lsp4e.LanguageServerWrapper.lambda$12(LanguageServerWrapper.java:456)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.exec(CompletableFuture.java:1796)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182)
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165)
Caused by: org.eclipse.lsp4j.jsonrpc.JsonRpcException: java.io.IOException: Le canal de communication est sur le point d’être fermé
	at org.eclipse.lsp4j.jsonrpc.json.StreamMessageConsumer.consume(StreamMessageConsumer.java:72)
	at org.eclipse.lsp4e.LanguageServerWrapper.lambda$3(LanguageServerWrapper.java:270)
	at org.eclipse.lsp4j.jsonrpc.RemoteEndpoint.request(RemoteEndpoint.java:161)
	at org.eclipse.lsp4j.jsonrpc.services.EndpointProxy.invoke(EndpointProxy.java:91)
	at jdk.proxy12/jdk.proxy12.$Proxy34.shutdown(Unknown Source)
	at org.eclipse.lsp4e.LanguageServerWrapper.lambda$12(LanguageServerWrapper.java:454)
	... 7 more
Caused by: java.io.IOException: Le canal de communication est sur le point d’être fermé
	at java.base/java.io.FileOutputStream.writeBytes(Native Method)
	at java.base/java.io.FileOutputStream.write(FileOutputStream.java:349)
	at java.base/java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:81)
	at java.base/java.io.BufferedOutputStream.flush(BufferedOutputStream.java:142)
	at org.eclipse.lsp4j.jsonrpc.json.StreamMessageConsumer.consume(StreamMessageConsumer.java:69)
	... 12 more

!ENTRY org.eclipse.lsp4e 4 0 2023-07-24 21:44:03.578
!MESSAGE org.eclipse.lsp4j.jsonrpc.JsonRpcException: java.io.IOException: Le canal de communication est sur le point d’être fermé
!STACK 0
java.util.concurrent.ExecutionException: org.eclipse.lsp4j.jsonrpc.JsonRpcException: java.io.IOException: Le canal de communication est sur le point d’être fermé
	at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:396)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2096)
	at org.eclipse.lsp4e.LanguageServerWrapper.lambda$12(LanguageServerWrapper.java:456)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.exec(CompletableFuture.java:1796)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182)
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165)
Caused by: org.eclipse.lsp4j.jsonrpc.JsonRpcException: java.io.IOException: Le canal de communication est sur le point d’être fermé
	at org.eclipse.lsp4j.jsonrpc.json.StreamMessageConsumer.consume(StreamMessageConsumer.java:72)
	at org.eclipse.lsp4e.LanguageServerWrapper.lambda$3(LanguageServerWrapper.java:270)
	at org.eclipse.lsp4j.jsonrpc.RemoteEndpoint.request(RemoteEndpoint.java:161)
	at org.eclipse.lsp4j.jsonrpc.services.EndpointProxy.invoke(EndpointProxy.java:91)
	at jdk.proxy12/jdk.proxy12.$Proxy35.shutdown(Unknown Source)
	at org.eclipse.lsp4e.LanguageServerWrapper.lambda$12(LanguageServerWrapper.java:454)
	... 7 more
Caused by: java.io.IOException: Le canal de communication est sur le point d’être fermé
	at java.base/java.io.FileOutputStream.writeBytes(Native Method)
	at java.base/java.io.FileOutputStream.write(FileOutputStream.java:349)
	at java.base/java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:81)
	at java.base/java.io.BufferedOutputStream.flush(BufferedOutputStream.java:142)
	at org.eclipse.lsp4j.jsonrpc.json.StreamMessageConsumer.consume(StreamMessageConsumer.java:69)
	... 12 more

!ENTRY org.eclipse.lsp4e 2 0 2023-07-24 21:44:04.490
!MESSAGE Timeout waiting for data to generate LS hover
!STACK 0
java.util.concurrent.TimeoutException
	at java.base/java.util.concurrent.CompletableFuture.timedGet(CompletableFuture.java:1960)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2095)
	at org.eclipse.lsp4e.jdt.LSJavaHoverProvider.getHoverInfo2(LSJavaHoverProvider.java:70)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:163)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:130)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo2(JavaEditorTextHoverProxy.java:89)
	at org.eclipse.jface.text.TextViewerHoverManager$1.run(TextViewerHoverManager.java:155)

!ENTRY org.eclipse.lsp4e 2 0 2023-07-24 22:14:50.983
!MESSAGE Javadoc unavailable. Failed to obtain it.
!STACK 0
java.lang.InterruptedException
	at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:386)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2096)
	at org.eclipse.lsp4e.jdt.LSJavaHoverProvider.getHoverInfo2(LSJavaHoverProvider.java:70)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:163)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:130)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo2(JavaEditorTextHoverProxy.java:89)
	at org.eclipse.jface.text.TextViewerHoverManager$1.run(TextViewerHoverManager.java:155)

!ENTRY org.eclipse.lsp4e 2 0 2023-07-25 01:01:51.506
!MESSAGE Javadoc unavailable. Failed to obtain it.
!STACK 0
java.lang.InterruptedException
	at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:386)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2096)
	at org.eclipse.lsp4e.jdt.LSJavaHoverProvider.getHoverInfo2(LSJavaHoverProvider.java:70)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:163)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:130)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo2(JavaEditorTextHoverProxy.java:89)
	at org.eclipse.jface.text.TextViewerHoverManager$1.run(TextViewerHoverManager.java:155)

!ENTRY org.eclipse.lsp4e 2 0 2023-07-25 06:15:08.652
!MESSAGE Timeout waiting for data to generate LS hover
!STACK 0
java.util.concurrent.TimeoutException
	at java.base/java.util.concurrent.CompletableFuture.timedGet(CompletableFuture.java:1960)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2095)
	at org.eclipse.lsp4e.jdt.LSJavaHoverProvider.getHoverInfo2(LSJavaHoverProvider.java:70)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:163)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:130)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo2(JavaEditorTextHoverProxy.java:89)
	at org.eclipse.jface.text.TextViewerHoverManager$1.run(TextViewerHoverManager.java:155)

!ENTRY org.eclipse.lsp4e 2 0 2023-07-25 06:15:36.724
!MESSAGE Javadoc unavailable. Failed to obtain it.
!STACK 0
java.lang.InterruptedException
	at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:386)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2096)
	at org.eclipse.lsp4e.jdt.LSJavaHoverProvider.getHoverInfo2(LSJavaHoverProvider.java:70)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:163)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:130)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo2(JavaEditorTextHoverProxy.java:89)
	at org.eclipse.jface.text.TextViewerHoverManager$1.run(TextViewerHoverManager.java:155)

!ENTRY org.eclipse.lsp4e 2 0 2023-07-25 06:18:35.174
!MESSAGE Timeout waiting for data to generate LS hover
!STACK 0
java.util.concurrent.TimeoutException
	at java.base/java.util.concurrent.CompletableFuture.timedGet(CompletableFuture.java:1960)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2095)
	at org.eclipse.lsp4e.jdt.LSJavaHoverProvider.getHoverInfo2(LSJavaHoverProvider.java:70)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:163)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:130)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo2(JavaEditorTextHoverProxy.java:89)
	at org.eclipse.jface.text.TextViewerHoverManager$1.run(TextViewerHoverManager.java:155)

!ENTRY org.eclipse.lsp4e 2 0 2023-07-25 06:57:47.309
!MESSAGE Javadoc unavailable. Failed to obtain it.
!STACK 0
java.lang.InterruptedException
	at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:386)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2096)
	at org.eclipse.lsp4e.jdt.LSJavaHoverProvider.getHoverInfo2(LSJavaHoverProvider.java:70)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:163)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:130)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo2(JavaEditorTextHoverProxy.java:89)
	at org.eclipse.jface.text.TextViewerHoverManager$1.run(TextViewerHoverManager.java:155)

!ENTRY org.eclipse.lsp4e 2 0 2023-07-25 07:00:53.062
!MESSAGE Timeout waiting for data to generate LS hover
!STACK 0
java.util.concurrent.TimeoutException
	at java.base/java.util.concurrent.CompletableFuture.timedGet(CompletableFuture.java:1960)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2095)
	at org.eclipse.lsp4e.jdt.LSJavaHoverProvider.getHoverInfo2(LSJavaHoverProvider.java:70)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:163)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:130)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo2(JavaEditorTextHoverProxy.java:89)
	at org.eclipse.jface.text.TextViewerHoverManager$1.run(TextViewerHoverManager.java:155)

!ENTRY org.eclipse.lsp4e 2 0 2023-07-25 07:09:01.327
!MESSAGE Javadoc unavailable. Failed to obtain it.
!STACK 0
java.lang.InterruptedException
	at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:386)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2096)
	at org.eclipse.lsp4e.jdt.LSJavaHoverProvider.getHoverInfo2(LSJavaHoverProvider.java:70)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:163)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:130)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo2(JavaEditorTextHoverProxy.java:89)
	at org.eclipse.jface.text.TextViewerHoverManager$1.run(TextViewerHoverManager.java:155)

!ENTRY org.eclipse.lsp4e 2 0 2023-07-25 07:14:16.007
!MESSAGE Javadoc unavailable. Failed to obtain it.
!STACK 0
java.lang.InterruptedException
	at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:386)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2096)
	at org.eclipse.lsp4e.jdt.LSJavaHoverProvider.getHoverInfo2(LSJavaHoverProvider.java:70)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:163)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:130)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo2(JavaEditorTextHoverProxy.java:89)
	at org.eclipse.jface.text.TextViewerHoverManager$1.run(TextViewerHoverManager.java:155)

!ENTRY org.eclipse.lsp4e 2 0 2023-07-25 08:19:15.455
!MESSAGE Javadoc unavailable. Failed to obtain it.
!STACK 0
java.lang.InterruptedException
	at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:386)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2096)
	at org.eclipse.lsp4e.jdt.LSJavaHoverProvider.getHoverInfo2(LSJavaHoverProvider.java:70)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:163)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:130)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo2(JavaEditorTextHoverProxy.java:89)
	at org.eclipse.jface.text.TextViewerHoverManager$1.run(TextViewerHoverManager.java:155)
